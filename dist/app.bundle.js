(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["l2js"] = factory();
	else
		root["l2js"] = factory();
})(window, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "../node_modules/node-libs-browser/node_modules/buffer/index.js":
/*!**********************************************************************!*\
  !*** ../node_modules/node-libs-browser/node_modules/buffer/index.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/* eslint-disable no-proto */



var base64 = __webpack_require__(/*! base64-js */ "base64-js")
var ieee754 = __webpack_require__(/*! ieee754 */ "ieee754")
var isArray = __webpack_require__(/*! isarray */ "isarray")

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined
  ? global.TYPED_ARRAY_SUPPORT
  : typedArraySupport()

/*
 * Export kMaxLength after typed array support is determined.
 */
exports.kMaxLength = kMaxLength()

function typedArraySupport () {
  try {
    var arr = new Uint8Array(1)
    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}
    return arr.foo() === 42 && // typed array instances can be augmented
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
}

function kMaxLength () {
  return Buffer.TYPED_ARRAY_SUPPORT
    ? 0x7fffffff
    : 0x3fffffff
}

function createBuffer (that, length) {
  if (kMaxLength() < length) {
    throw new RangeError('Invalid typed array length')
  }
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = new Uint8Array(length)
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    if (that === null) {
      that = new Buffer(length)
    }
    that.length = length
  }

  return that
}

/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */

function Buffer (arg, encodingOrOffset, length) {
  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {
    return new Buffer(arg, encodingOrOffset, length)
  }

  // Common case.
  if (typeof arg === 'number') {
    if (typeof encodingOrOffset === 'string') {
      throw new Error(
        'If encoding is specified then the first argument must be a string'
      )
    }
    return allocUnsafe(this, arg)
  }
  return from(this, arg, encodingOrOffset, length)
}

Buffer.poolSize = 8192 // not used by this implementation

// TODO: Legacy, not needed anymore. Remove in next major version.
Buffer._augment = function (arr) {
  arr.__proto__ = Buffer.prototype
  return arr
}

function from (that, value, encodingOrOffset, length) {
  if (typeof value === 'number') {
    throw new TypeError('"value" argument must not be a number')
  }

  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {
    return fromArrayBuffer(that, value, encodingOrOffset, length)
  }

  if (typeof value === 'string') {
    return fromString(that, value, encodingOrOffset)
  }

  return fromObject(that, value)
}

/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/
Buffer.from = function (value, encodingOrOffset, length) {
  return from(null, value, encodingOrOffset, length)
}

if (Buffer.TYPED_ARRAY_SUPPORT) {
  Buffer.prototype.__proto__ = Uint8Array.prototype
  Buffer.__proto__ = Uint8Array
  if (typeof Symbol !== 'undefined' && Symbol.species &&
      Buffer[Symbol.species] === Buffer) {
    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97
    Object.defineProperty(Buffer, Symbol.species, {
      value: null,
      configurable: true
    })
  }
}

function assertSize (size) {
  if (typeof size !== 'number') {
    throw new TypeError('"size" argument must be a number')
  } else if (size < 0) {
    throw new RangeError('"size" argument must not be negative')
  }
}

function alloc (that, size, fill, encoding) {
  assertSize(size)
  if (size <= 0) {
    return createBuffer(that, size)
  }
  if (fill !== undefined) {
    // Only pay attention to encoding if it's a string. This
    // prevents accidentally sending in a number that would
    // be interpretted as a start offset.
    return typeof encoding === 'string'
      ? createBuffer(that, size).fill(fill, encoding)
      : createBuffer(that, size).fill(fill)
  }
  return createBuffer(that, size)
}

/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/
Buffer.alloc = function (size, fill, encoding) {
  return alloc(null, size, fill, encoding)
}

function allocUnsafe (that, size) {
  assertSize(size)
  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < size; ++i) {
      that[i] = 0
    }
  }
  return that
}

/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */
Buffer.allocUnsafe = function (size) {
  return allocUnsafe(null, size)
}
/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */
Buffer.allocUnsafeSlow = function (size) {
  return allocUnsafe(null, size)
}

function fromString (that, string, encoding) {
  if (typeof encoding !== 'string' || encoding === '') {
    encoding = 'utf8'
  }

  if (!Buffer.isEncoding(encoding)) {
    throw new TypeError('"encoding" must be a valid string encoding')
  }

  var length = byteLength(string, encoding) | 0
  that = createBuffer(that, length)

  var actual = that.write(string, encoding)

  if (actual !== length) {
    // Writing a hex string, for example, that contains invalid characters will
    // cause everything after the first invalid character to be ignored. (e.g.
    // 'abxxcd' will be treated as 'ab')
    that = that.slice(0, actual)
  }

  return that
}

function fromArrayLike (that, array) {
  var length = array.length < 0 ? 0 : checked(array.length) | 0
  that = createBuffer(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

function fromArrayBuffer (that, array, byteOffset, length) {
  array.byteLength // this throws if `array` is not a valid ArrayBuffer

  if (byteOffset < 0 || array.byteLength < byteOffset) {
    throw new RangeError('\'offset\' is out of bounds')
  }

  if (array.byteLength < byteOffset + (length || 0)) {
    throw new RangeError('\'length\' is out of bounds')
  }

  if (byteOffset === undefined && length === undefined) {
    array = new Uint8Array(array)
  } else if (length === undefined) {
    array = new Uint8Array(array, byteOffset)
  } else {
    array = new Uint8Array(array, byteOffset, length)
  }

  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = array
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    that = fromArrayLike(that, array)
  }
  return that
}

function fromObject (that, obj) {
  if (Buffer.isBuffer(obj)) {
    var len = checked(obj.length) | 0
    that = createBuffer(that, len)

    if (that.length === 0) {
      return that
    }

    obj.copy(that, 0, 0, len)
    return that
  }

  if (obj) {
    if ((typeof ArrayBuffer !== 'undefined' &&
        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {
      if (typeof obj.length !== 'number' || isnan(obj.length)) {
        return createBuffer(that, 0)
      }
      return fromArrayLike(that, obj)
    }

    if (obj.type === 'Buffer' && isArray(obj.data)) {
      return fromArrayLike(that, obj.data)
    }
  }

  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')
}

function checked (length) {
  // Note: cannot use `length < kMaxLength()` here because that fails when
  // length is NaN (which is otherwise coerced to zero.)
  if (length >= kMaxLength()) {
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
                         'size: 0x' + kMaxLength().toString(16) + ' bytes')
  }
  return length | 0
}

function SlowBuffer (length) {
  if (+length != length) { // eslint-disable-line eqeqeq
    length = 0
  }
  return Buffer.alloc(+length)
}

Buffer.isBuffer = function isBuffer (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function compare (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    throw new TypeError('Arguments must be Buffers')
  }

  if (a === b) return 0

  var x = a.length
  var y = b.length

  for (var i = 0, len = Math.min(x, y); i < len; ++i) {
    if (a[i] !== b[i]) {
      x = a[i]
      y = b[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function isEncoding (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'latin1':
    case 'binary':
    case 'base64':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function concat (list, length) {
  if (!isArray(list)) {
    throw new TypeError('"list" argument must be an Array of Buffers')
  }

  if (list.length === 0) {
    return Buffer.alloc(0)
  }

  var i
  if (length === undefined) {
    length = 0
    for (i = 0; i < list.length; ++i) {
      length += list[i].length
    }
  }

  var buffer = Buffer.allocUnsafe(length)
  var pos = 0
  for (i = 0; i < list.length; ++i) {
    var buf = list[i]
    if (!Buffer.isBuffer(buf)) {
      throw new TypeError('"list" argument must be an Array of Buffers')
    }
    buf.copy(buffer, pos)
    pos += buf.length
  }
  return buffer
}

function byteLength (string, encoding) {
  if (Buffer.isBuffer(string)) {
    return string.length
  }
  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&
      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {
    return string.byteLength
  }
  if (typeof string !== 'string') {
    string = '' + string
  }

  var len = string.length
  if (len === 0) return 0

  // Use a for loop to avoid recursion
  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'ascii':
      case 'latin1':
      case 'binary':
        return len
      case 'utf8':
      case 'utf-8':
      case undefined:
        return utf8ToBytes(string).length
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return len * 2
      case 'hex':
        return len >>> 1
      case 'base64':
        return base64ToBytes(string).length
      default:
        if (loweredCase) return utf8ToBytes(string).length // assume utf8
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}
Buffer.byteLength = byteLength

function slowToString (encoding, start, end) {
  var loweredCase = false

  // No need to verify that "this.length <= MAX_UINT32" since it's a read-only
  // property of a typed array.

  // This behaves neither like String nor Uint8Array in that we set start/end
  // to their upper/lower bounds if the value passed is out of range.
  // undefined is handled specially as per ECMA-262 6th Edition,
  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.
  if (start === undefined || start < 0) {
    start = 0
  }
  // Return early if start > this.length. Done here to prevent potential uint32
  // coercion fail below.
  if (start > this.length) {
    return ''
  }

  if (end === undefined || end > this.length) {
    end = this.length
  }

  if (end <= 0) {
    return ''
  }

  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.
  end >>>= 0
  start >>>= 0

  if (end <= start) {
    return ''
  }

  if (!encoding) encoding = 'utf8'

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'latin1':
      case 'binary':
        return latin1Slice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect
// Buffer instances.
Buffer.prototype._isBuffer = true

function swap (b, n, m) {
  var i = b[n]
  b[n] = b[m]
  b[m] = i
}

Buffer.prototype.swap16 = function swap16 () {
  var len = this.length
  if (len % 2 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 16-bits')
  }
  for (var i = 0; i < len; i += 2) {
    swap(this, i, i + 1)
  }
  return this
}

Buffer.prototype.swap32 = function swap32 () {
  var len = this.length
  if (len % 4 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 32-bits')
  }
  for (var i = 0; i < len; i += 4) {
    swap(this, i, i + 3)
    swap(this, i + 1, i + 2)
  }
  return this
}

Buffer.prototype.swap64 = function swap64 () {
  var len = this.length
  if (len % 8 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 64-bits')
  }
  for (var i = 0; i < len; i += 8) {
    swap(this, i, i + 7)
    swap(this, i + 1, i + 6)
    swap(this, i + 2, i + 5)
    swap(this, i + 3, i + 4)
  }
  return this
}

Buffer.prototype.toString = function toString () {
  var length = this.length | 0
  if (length === 0) return ''
  if (arguments.length === 0) return utf8Slice(this, 0, length)
  return slowToString.apply(this, arguments)
}

Buffer.prototype.equals = function equals (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return true
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function inspect () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max) str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {
  if (!Buffer.isBuffer(target)) {
    throw new TypeError('Argument must be a Buffer')
  }

  if (start === undefined) {
    start = 0
  }
  if (end === undefined) {
    end = target ? target.length : 0
  }
  if (thisStart === undefined) {
    thisStart = 0
  }
  if (thisEnd === undefined) {
    thisEnd = this.length
  }

  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
    throw new RangeError('out of range index')
  }

  if (thisStart >= thisEnd && start >= end) {
    return 0
  }
  if (thisStart >= thisEnd) {
    return -1
  }
  if (start >= end) {
    return 1
  }

  start >>>= 0
  end >>>= 0
  thisStart >>>= 0
  thisEnd >>>= 0

  if (this === target) return 0

  var x = thisEnd - thisStart
  var y = end - start
  var len = Math.min(x, y)

  var thisCopy = this.slice(thisStart, thisEnd)
  var targetCopy = target.slice(start, end)

  for (var i = 0; i < len; ++i) {
    if (thisCopy[i] !== targetCopy[i]) {
      x = thisCopy[i]
      y = targetCopy[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {
  // Empty buffer means no match
  if (buffer.length === 0) return -1

  // Normalize byteOffset
  if (typeof byteOffset === 'string') {
    encoding = byteOffset
    byteOffset = 0
  } else if (byteOffset > 0x7fffffff) {
    byteOffset = 0x7fffffff
  } else if (byteOffset < -0x80000000) {
    byteOffset = -0x80000000
  }
  byteOffset = +byteOffset  // Coerce to Number.
  if (isNaN(byteOffset)) {
    // byteOffset: it it's undefined, null, NaN, "foo", etc, search whole buffer
    byteOffset = dir ? 0 : (buffer.length - 1)
  }

  // Normalize byteOffset: negative offsets start from the end of the buffer
  if (byteOffset < 0) byteOffset = buffer.length + byteOffset
  if (byteOffset >= buffer.length) {
    if (dir) return -1
    else byteOffset = buffer.length - 1
  } else if (byteOffset < 0) {
    if (dir) byteOffset = 0
    else return -1
  }

  // Normalize val
  if (typeof val === 'string') {
    val = Buffer.from(val, encoding)
  }

  // Finally, search either indexOf (if dir is true) or lastIndexOf
  if (Buffer.isBuffer(val)) {
    // Special case: looking for empty string/buffer always fails
    if (val.length === 0) {
      return -1
    }
    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)
  } else if (typeof val === 'number') {
    val = val & 0xFF // Search for a byte value [0-255]
    if (Buffer.TYPED_ARRAY_SUPPORT &&
        typeof Uint8Array.prototype.indexOf === 'function') {
      if (dir) {
        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)
      } else {
        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)
      }
    }
    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)
  }

  throw new TypeError('val must be string, number or Buffer')
}

function arrayIndexOf (arr, val, byteOffset, encoding, dir) {
  var indexSize = 1
  var arrLength = arr.length
  var valLength = val.length

  if (encoding !== undefined) {
    encoding = String(encoding).toLowerCase()
    if (encoding === 'ucs2' || encoding === 'ucs-2' ||
        encoding === 'utf16le' || encoding === 'utf-16le') {
      if (arr.length < 2 || val.length < 2) {
        return -1
      }
      indexSize = 2
      arrLength /= 2
      valLength /= 2
      byteOffset /= 2
    }
  }

  function read (buf, i) {
    if (indexSize === 1) {
      return buf[i]
    } else {
      return buf.readUInt16BE(i * indexSize)
    }
  }

  var i
  if (dir) {
    var foundIndex = -1
    for (i = byteOffset; i < arrLength; i++) {
      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {
        if (foundIndex === -1) foundIndex = i
        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize
      } else {
        if (foundIndex !== -1) i -= i - foundIndex
        foundIndex = -1
      }
    }
  } else {
    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength
    for (i = byteOffset; i >= 0; i--) {
      var found = true
      for (var j = 0; j < valLength; j++) {
        if (read(arr, i + j) !== read(val, j)) {
          found = false
          break
        }
      }
      if (found) return i
    }
  }

  return -1
}

Buffer.prototype.includes = function includes (val, byteOffset, encoding) {
  return this.indexOf(val, byteOffset, encoding) !== -1
}

Buffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)
}

Buffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; ++i) {
    var parsed = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(parsed)) return i
    buf[offset + i] = parsed
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

function asciiWrite (buf, string, offset, length) {
  return blitBuffer(asciiToBytes(string), buf, offset, length)
}

function latin1Write (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  return blitBuffer(base64ToBytes(string), buf, offset, length)
}

function ucs2Write (buf, string, offset, length) {
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = function write (string, offset, length, encoding) {
  // Buffer#write(string)
  if (offset === undefined) {
    encoding = 'utf8'
    length = this.length
    offset = 0
  // Buffer#write(string, encoding)
  } else if (length === undefined && typeof offset === 'string') {
    encoding = offset
    length = this.length
    offset = 0
  // Buffer#write(string, offset[, length][, encoding])
  } else if (isFinite(offset)) {
    offset = offset | 0
    if (isFinite(length)) {
      length = length | 0
      if (encoding === undefined) encoding = 'utf8'
    } else {
      encoding = length
      length = undefined
    }
  // legacy write(string, encoding, offset, length) - remove in v0.13
  } else {
    throw new Error(
      'Buffer.write(string, encoding, offset[, length]) is no longer supported'
    )
  }

  var remaining = this.length - offset
  if (length === undefined || length > remaining) length = remaining

  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {
    throw new RangeError('Attempt to write outside buffer bounds')
  }

  if (!encoding) encoding = 'utf8'

  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'hex':
        return hexWrite(this, string, offset, length)

      case 'utf8':
      case 'utf-8':
        return utf8Write(this, string, offset, length)

      case 'ascii':
        return asciiWrite(this, string, offset, length)

      case 'latin1':
      case 'binary':
        return latin1Write(this, string, offset, length)

      case 'base64':
        // Warning: maxLength not taken into account in base64Write
        return base64Write(this, string, offset, length)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return ucs2Write(this, string, offset, length)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toJSON = function toJSON () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  end = Math.min(buf.length, end)
  var res = []

  var i = start
  while (i < end) {
    var firstByte = buf[i]
    var codePoint = null
    var bytesPerSequence = (firstByte > 0xEF) ? 4
      : (firstByte > 0xDF) ? 3
      : (firstByte > 0xBF) ? 2
      : 1

    if (i + bytesPerSequence <= end) {
      var secondByte, thirdByte, fourthByte, tempCodePoint

      switch (bytesPerSequence) {
        case 1:
          if (firstByte < 0x80) {
            codePoint = firstByte
          }
          break
        case 2:
          secondByte = buf[i + 1]
          if ((secondByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)
            if (tempCodePoint > 0x7F) {
              codePoint = tempCodePoint
            }
          }
          break
        case 3:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)
            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
              codePoint = tempCodePoint
            }
          }
          break
        case 4:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          fourthByte = buf[i + 3]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
              codePoint = tempCodePoint
            }
          }
      }
    }

    if (codePoint === null) {
      // we did not generate a valid codePoint so insert a
      // replacement char (U+FFFD) and advance only 1 byte
      codePoint = 0xFFFD
      bytesPerSequence = 1
    } else if (codePoint > 0xFFFF) {
      // encode to utf16 (surrogate pair dance)
      codePoint -= 0x10000
      res.push(codePoint >>> 10 & 0x3FF | 0xD800)
      codePoint = 0xDC00 | codePoint & 0x3FF
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
  var len = codePoints.length
  if (len <= MAX_ARGUMENTS_LENGTH) {
    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()
  }

  // Decode in chunks to avoid "call stack size exceeded".
  var res = ''
  var i = 0
  while (i < len) {
    res += String.fromCharCode.apply(
      String,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    )
  }
  return res
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function latin1Slice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; ++i) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function slice (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len
    if (start < 0) start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0) end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start) end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = this.subarray(start, end)
    newBuf.__proto__ = Buffer.prototype
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined)
    for (var i = 0; i < sliceLen; ++i) {
      newBuf[i] = this[i + start]
    }
  }

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')
  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }

  return val
}

Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    checkOffset(offset, byteLength, this.length)
  }

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100)) {
    val += this[offset + --byteLength] * mul
  }

  return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
    ((this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    this[offset + 3])
}

Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100)) {
    val += this[offset + --i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80)) return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset]) |
    (this[offset + 1] << 8) |
    (this[offset + 2] << 16) |
    (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
    (this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    (this[offset + 3])
}

Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('"value" argument is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = (value & 0xff)
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = 0
  var mul = 1
  var sub = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = byteLength - 1
  var mul = 1
  var sub = 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = (value & 0xff)
  return offset + 1
}

Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
  if (offset < 0) throw new RangeError('Index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  }
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  }
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function copy (target, targetStart, start, end) {
  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (targetStart >= target.length) targetStart = target.length
  if (!targetStart) targetStart = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || this.length === 0) return 0

  // Fatal error conditions
  if (targetStart < 0) {
    throw new RangeError('targetStart out of bounds')
  }
  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length) end = this.length
  if (target.length - targetStart < end - start) {
    end = target.length - targetStart + start
  }

  var len = end - start
  var i

  if (this === target && start < targetStart && targetStart < end) {
    // descending copy from end
    for (i = len - 1; i >= 0; --i) {
      target[i + targetStart] = this[i + start]
    }
  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    // ascending copy from start
    for (i = 0; i < len; ++i) {
      target[i + targetStart] = this[i + start]
    }
  } else {
    Uint8Array.prototype.set.call(
      target,
      this.subarray(start, start + len),
      targetStart
    )
  }

  return len
}

// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
Buffer.prototype.fill = function fill (val, start, end, encoding) {
  // Handle string cases:
  if (typeof val === 'string') {
    if (typeof start === 'string') {
      encoding = start
      start = 0
      end = this.length
    } else if (typeof end === 'string') {
      encoding = end
      end = this.length
    }
    if (val.length === 1) {
      var code = val.charCodeAt(0)
      if (code < 256) {
        val = code
      }
    }
    if (encoding !== undefined && typeof encoding !== 'string') {
      throw new TypeError('encoding must be a string')
    }
    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {
      throw new TypeError('Unknown encoding: ' + encoding)
    }
  } else if (typeof val === 'number') {
    val = val & 255
  }

  // Invalid ranges are not set to a default, so can range check early.
  if (start < 0 || this.length < start || this.length < end) {
    throw new RangeError('Out of range index')
  }

  if (end <= start) {
    return this
  }

  start = start >>> 0
  end = end === undefined ? this.length : end >>> 0

  if (!val) val = 0

  var i
  if (typeof val === 'number') {
    for (i = start; i < end; ++i) {
      this[i] = val
    }
  } else {
    var bytes = Buffer.isBuffer(val)
      ? val
      : utf8ToBytes(new Buffer(val, encoding).toString())
    var len = bytes.length
    for (i = 0; i < end - start; ++i) {
      this[i + start] = bytes[i % len]
    }
  }

  return this
}

// HELPER FUNCTIONS
// ================

var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes (string, units) {
  units = units || Infinity
  var codePoint
  var length = string.length
  var leadSurrogate = null
  var bytes = []

  for (var i = 0; i < length; ++i) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {
      // last char was a lead
      if (!leadSurrogate) {
        // no lead yet
        if (codePoint > 0xDBFF) {
          // unexpected trail
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        } else if (i + 1 === length) {
          // unpaired lead
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        leadSurrogate = codePoint

        continue
      }

      // 2 leads in a row
      if (codePoint < 0xDC00) {
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
        leadSurrogate = codePoint
        continue
      }

      // valid surrogate pair
      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000
    } else if (leadSurrogate) {
      // valid bmp char, but last char was a lead
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
    }

    leadSurrogate = null

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    } else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x110000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length) {
  for (var i = 0; i < length; ++i) {
    if ((i + offset >= dst.length) || (i >= src.length)) break
    dst[i + offset] = src[i]
  }
  return i
}

function isnan (val) {
  return val !== val // eslint-disable-line no-self-compare
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/global.js */ "../node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "../node_modules/webpack/buildin/global.js":
/*!*************************************************!*\
  !*** ../node_modules/webpack/buildin/global.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "./config/ERC20.json":
/*!***************************!*\
  !*** ./config/ERC20.json ***!
  \***************************/
/*! exports provided: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, default */
/***/ (function(module) {

module.exports = [{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}];

/***/ }),

/***/ "./config/TypedData.ts":
/*!*****************************!*\
  !*** ./config/TypedData.ts ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var cov_x15vq8o3i=function(){var path="/Users/zhang/work/DigiCash/l2app/l2.js/src/config/TypedData.ts",hash="7145ec8de5e9e75660191db830a6f8befb08cbb0",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/zhang/work/DigiCash/l2app/l2.js/src/config/TypedData.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:16,column:2}}},fnMap:{},branchMap:{},s:{"0":0,"1":0},f:{},b:{},inputSourceMap:{version:3,file:"/Users/zhang/work/DigiCash/l2app/l2.js/src/config/TypedData.ts",sourceRoot:"/Users/zhang/work/DigiCash/l2app/l2.js/",sources:["node_modules/source-map-loader/index.js!/Users/zhang/work/DigiCash/l2app/l2.js/src/config/TypedData.ts"],names:[],mappings:";;AAAa,QAAA,YAAY,GAAG;IAC1B,YAAY,EAAE;QACZ,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE;QAChC,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE;QACnC,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,SAAS,EAAE;QACpC,EAAE,IAAI,EAAE,mBAAmB,EAAE,IAAI,EAAE,SAAS,EAAE;KAC/C;IACD,QAAQ,EAAE;QACR,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,EAAE,SAAS,EAAE;QACtC,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,SAAS,EAAE;QACpC,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE;QAClC,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,SAAS,EAAE;KAC5C;CACF,CAAC",sourcesContent:["export const EIP712_TYPES = {\n  EIP712Domain: [\n    { name: 'name', type: 'string' },\n    { name: 'version', type: 'string' },\n    { name: 'chainId', type: 'uint256' },\n    { name: 'verifyingContract', type: 'address' },\n  ],\n  Transfer: [\n    { name: 'channelID', type: 'bytes32' },\n    { name: 'balance', type: 'uint256' },\n    { name: 'nonce', type: 'uint256' },\n    { name: 'additionalHash', type: 'bytes32' },\n  ],\n};\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_x15vq8o3i.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_x15vq8o3i.s[1]++;exports.EIP712_TYPES={EIP712Domain:[{name:'name',type:'string'},{name:'version',type:'string'},{name:'chainId',type:'uint256'},{name:'verifyingContract',type:'address'}],Transfer:[{name:'channelID',type:'bytes32'},{name:'balance',type:'uint256'},{name:'nonce',type:'uint256'},{name:'additionalHash',type:'bytes32'}]};

/***/ }),

/***/ "./config/offchainPayment.json":
/*!*************************************!*\
  !*** ./config/offchainPayment.json ***!
  \*************************************/
/*! exports provided: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, default */
/***/ (function(module) {

module.exports = [{"constant":true,"inputs":[],"name":"TRANSFER_TYPEHASH","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"cooperativeSettleProofMap","outputs":[{"name":"isConfirmed","type":"bool"},{"name":"balance","type":"uint256"},{"name":"lastCommitBlock","type":"uint256"},{"name":"providerSignature","type":"bytes"},{"name":"regulatorSignature","type":"bytes"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"provider","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"DOMAIN_SEPERATOR","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"userWithdrawProofMap","outputs":[{"name":"isConfirmed","type":"bool"},{"name":"amount","type":"uint256"},{"name":"lastCommitBlock","type":"uint256"},{"name":"providerSignature","type":"bytes"},{"name":"regulatorSignature","type":"bytes"},{"name":"receiver","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"operator","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"onchainPayment","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"channelMap","outputs":[{"name":"user","type":"address"},{"name":"token","type":"address"},{"name":"userDeposit","type":"uint256"},{"name":"userWithdraw","type":"uint256"},{"name":"userBalance","type":"uint256"},{"name":"providerBalance","type":"uint256"},{"name":"status","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"arrearBalanceProofMap","outputs":[{"name":"channelID","type":"bytes32"},{"name":"balance","type":"uint256"},{"name":"nonce","type":"uint256"},{"name":"additionalHash","type":"bytes32"},{"name":"signature","type":"bytes"},{"name":"consignorSignature","type":"bytes"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"providerWithdrawProofMap","outputs":[{"name":"amount","type":"uint256"},{"name":"lastCommitBlock","type":"uint256"},{"name":"signature","type":"bytes"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"paymentNetworkMap","outputs":[{"name":"userCount","type":"uint256"},{"name":"userTotalDeposit","type":"uint256"},{"name":"userTotalWithdraw","type":"uint256"},{"name":"providerDeposit","type":"uint256"},{"name":"providerWithdraw","type":"uint256"},{"name":"providerRebalanceIn","type":"uint256"},{"name":"providerTotalSettled","type":"int256"},{"name":"onchainFeeWithdraw","type":"uint256"},{"name":"providerBalance","type":"uint256"},{"name":"providerOnchainBalance","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"rebalanceProofMap","outputs":[{"name":"channelID","type":"bytes32"},{"name":"amount","type":"uint256"},{"name":"nonce","type":"uint256"},{"name":"providerSignature","type":"bytes"},{"name":"regulatorSignature","type":"bytes"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"EIP712DOMAIN_TYPEHASH","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"regulator","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"uint256"}],"name":"puppets","outputs":[{"name":"p","type":"address"},{"name":"enabled","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"proposeRebalanceProofMap","outputs":[{"name":"channelID","type":"bytes32"},{"name":"amount","type":"uint256"},{"name":"nonce","type":"uint256"},{"name":"providerSignature","type":"bytes"},{"name":"regulatorSignature","type":"bytes"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"feeRateMap","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"closingChannelMap","outputs":[{"name":"closer","type":"address"},{"name":"userTransferredAmount","type":"uint256"},{"name":"userTransferredNonce","type":"uint256"},{"name":"providerTransferredAmount","type":"uint256"},{"name":"providerTransferredNonce","type":"uint256"},{"name":"providerRebalanceInAmount","type":"uint256"},{"name":"providerRebalanceOutAmount","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"},{"name":"","type":"address"}],"name":"balanceProofMap","outputs":[{"name":"channelID","type":"bytes32"},{"name":"balance","type":"uint256"},{"name":"nonce","type":"uint256"},{"name":"additionalHash","type":"bytes32"},{"name":"signature","type":"bytes"},{"name":"consignorSignature","type":"bytes"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"feeProofMap","outputs":[{"name":"amount","type":"uint256"},{"name":"nonce","type":"uint256"},{"name":"signature","type":"bytes"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_onchainPayment","type":"address"},{"name":"_provider","type":"address"},{"name":"_regulator","type":"address"},{"name":"_operator","type":"address"},{"name":"_chainID","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"oldOperator","type":"address"},{"indexed":true,"name":"newOperator","type":"address"}],"name":"OperatorChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"balance","type":"uint256"},{"indexed":false,"name":"transferAmount","type":"uint256"},{"indexed":false,"name":"nonce","type":"uint256"},{"indexed":false,"name":"additionalHash","type":"bytes32"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"user","type":"address"},{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"balance","type":"uint256"},{"indexed":false,"name":"nonce","type":"uint256"}],"name":"GuardBalanceProof","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"token","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"nonce","type":"uint256"}],"name":"SubmitFee","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"user","type":"address"},{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"balance","type":"uint256"},{"indexed":false,"name":"receiver","type":"address"},{"indexed":false,"name":"lastCommitBlock","type":"uint256"}],"name":"UserProposeWithdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"user","type":"address"},{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"confirmer","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"lastCommitBlock","type":"uint256"},{"indexed":false,"name":"isAllConfirmed","type":"bool"},{"indexed":false,"name":"providerSignature","type":"bytes"},{"indexed":false,"name":"regulatorSignature","type":"bytes"}],"name":"ConfirmUserWithdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"token","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"lastCommitBlock","type":"uint256"}],"name":"ProviderProposeWithdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"token","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"lastCommitBlock","type":"uint256"},{"indexed":false,"name":"signature","type":"bytes"}],"name":"ConfirmProviderWithdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"user","type":"address"},{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"balance","type":"uint256"},{"indexed":false,"name":"lastCommitBlock","type":"uint256"}],"name":"ProposeCooperativeSettle","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"user","type":"address"},{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"confirmer","type":"address"},{"indexed":false,"name":"balance","type":"uint256"},{"indexed":false,"name":"lastCommitBlock","type":"uint256"},{"indexed":false,"name":"isAllConfirmed","type":"bool"},{"indexed":false,"name":"providerSignature","type":"bytes"},{"indexed":false,"name":"regulatorSignature","type":"bytes"}],"name":"ConfirmCooperativeSettle","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"nonce","type":"uint256"},{"indexed":false,"name":"id","type":"bytes32"}],"name":"ProposeRebalance","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":true,"name":"id","type":"bytes32"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"nonce","type":"uint256"}],"name":"ConfirmRebalance","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"user","type":"address"},{"indexed":true,"name":"token","type":"address"},{"indexed":false,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"OnchainOpenChannel","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"user","type":"address"},{"indexed":true,"name":"puppet","type":"address"}],"name":"OnchainAddPuppet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"user","type":"address"},{"indexed":true,"name":"puppet","type":"address"}],"name":"OnchainDisablePuppet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"user","type":"address"},{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"deposit","type":"uint256"},{"indexed":false,"name":"totalDeposit","type":"uint256"}],"name":"OnchainUserDeposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"token","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"OnchainProviderDeposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"user","type":"address"},{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"withdraw","type":"uint256"},{"indexed":false,"name":"lastCommitBlock","type":"uint256"}],"name":"OnchainUserWithdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"token","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"balance","type":"int256"},{"indexed":false,"name":"lastCommitBlock","type":"uint256"}],"name":"OnchainProviderWithdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"user","type":"address"},{"indexed":false,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"token","type":"address"},{"indexed":false,"name":"balance","type":"uint256"},{"indexed":false,"name":"lastCommitBlock","type":"uint256"}],"name":"OnchainCooperativeSettleChannel","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"closer","type":"address"},{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"balance","type":"uint256"},{"indexed":false,"name":"nonce","type":"uint256"},{"indexed":false,"name":"inAmount","type":"uint256"}],"name":"OnchainCloseChannel","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"userBalance","type":"uint256"},{"indexed":false,"name":"userNonce","type":"uint256"},{"indexed":false,"name":"providerBalance","type":"uint256"},{"indexed":false,"name":"providerNonce","type":"uint256"}],"name":"OnchainPartnerUpdateProof","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"inAmount","type":"uint256"}],"name":"OnchainRegulatorUpdateProof","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"user","type":"address"},{"indexed":true,"name":"token","type":"address"},{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"userSettleAmount","type":"uint256"},{"indexed":false,"name":"providerSettleAmount","type":"int256"}],"name":"OnchainSettleChannel","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"token","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"OnchainRegulatorWithdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"channelID","type":"bytes32"}],"name":"UnlockUserWithdrawProof","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"channelID","type":"bytes32"}],"name":"UnlockCooperativeSettle","type":"event"},{"constant":false,"inputs":[{"name":"token","type":"address"},{"name":"rate","type":"uint256"}],"name":"setFeeRate","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"channelID","type":"bytes32"},{"name":"balance","type":"uint256"},{"name":"nonce","type":"uint256"},{"name":"additionalHash","type":"bytes32"},{"name":"signature","type":"bytes"}],"name":"transfer","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"balance","type":"uint256"},{"name":"nonce","type":"uint256"},{"name":"additionalHash","type":"bytes32"},{"name":"signature","type":"bytes"},{"name":"consignorSignature","type":"bytes"}],"name":"guardBalanceProof","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"token","type":"address"},{"name":"amount","type":"uint256"},{"name":"nonce","type":"uint256"},{"name":"signature","type":"bytes"}],"name":"submitFee","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"amount","type":"uint256"},{"name":"receiver","type":"address"},{"name":"lastCommitBlock","type":"uint256"}],"name":"userProposeWithdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"signature","type":"bytes"}],"name":"confirmUserWithdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address"},{"name":"amount","type":"uint256"},{"name":"lastCommitBlock","type":"uint256"}],"name":"providerProposeWithdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address"},{"name":"signature","type":"bytes"}],"name":"confirmProviderWithdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"balance","type":"uint256"},{"name":"lastCommitBlock","type":"uint256"}],"name":"proposeCooperativeSettle","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"signature","type":"bytes"}],"name":"confirmCooperativeSettle","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"amount","type":"uint256"},{"name":"nonce","type":"uint256"},{"name":"signature","type":"bytes"}],"name":"proposeRebalance","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"id","type":"bytes32"},{"name":"signature","type":"bytes"}],"name":"confirmRebalance","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"user","type":"address"},{"name":"token","type":"address"},{"name":"channelID","type":"bytes32"},{"name":"amount","type":"uint256"}],"name":"onchainOpenChannel","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"user","type":"address"},{"name":"puppet","type":"address"}],"name":"onchainAddPuppet","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"user","type":"address"},{"name":"puppet","type":"address"}],"name":"onchainDisablePuppet","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"user","type":"address"},{"name":"deposit","type":"uint256"}],"name":"onchainUserDeposit","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address"},{"name":"amount","type":"uint256"}],"name":"onchainProviderDeposit","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"amount","type":"uint256"},{"name":"withdraw","type":"uint256"},{"name":"lastCommitBlock","type":"uint256"}],"name":"onchainUserWithdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address"},{"name":"amount","type":"uint256"},{"name":"balance","type":"int256"},{"name":"lastCommitBlock","type":"uint256"}],"name":"onchainProviderWithdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"user","type":"address"},{"name":"balance","type":"uint256"},{"name":"providerRegain","type":"int256"},{"name":"lastCommitBlock","type":"uint256"}],"name":"onchainCooperativeSettleChannel","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"closer","type":"address"},{"name":"balance","type":"uint256"},{"name":"nonce","type":"uint256"},{"name":"inAmount","type":"uint256"}],"name":"onchainCloseChannel","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"userBalance","type":"uint256"},{"name":"userNonce","type":"uint256"},{"name":"providerBalance","type":"uint256"},{"name":"providerNonce","type":"uint256"}],"name":"onchainPartnerUpdateProof","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"inAmount","type":"uint256"}],"name":"onchainRegulatorUpdateProof","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"userSettleAmount","type":"uint256"},{"name":"providerRegain","type":"int256"}],"name":"onchainSettleChannel","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address"},{"name":"amount","type":"uint256"}],"name":"onchainRegulatorWithdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"newOperator","type":"address"}],"name":"setOperator","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"}],"name":"unlockUserWithdrawProof","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"}],"name":"unlockCooperativeSettle","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"user","type":"address"},{"name":"puppet","type":"address"}],"name":"isPuppet","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"}];

/***/ }),

/***/ "./config/onchainPayment.json":
/*!************************************!*\
  !*** ./config/onchainPayment.json ***!
  \************************************/
/*! exports provided: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, default */
/***/ (function(module) {

module.exports = [{"constant":true,"inputs":[],"name":"TRANSFER_TYPEHASH","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"provider","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"DOMAIN_SEPERATOR","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"providerWithdrawMap","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"address"}],"name":"puppetMap","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"version","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"counter","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"channels","outputs":[{"name":"status","type":"uint8"},{"name":"user","type":"address"},{"name":"isCloser","type":"bool"},{"name":"settleBlock","type":"uint256"},{"name":"token","type":"address"},{"name":"deposit","type":"uint256"},{"name":"withdraw","type":"uint256"},{"name":"userBalance","type":"uint256"},{"name":"userNonce","type":"uint256"},{"name":"providerBalance","type":"uint256"},{"name":"providerNonce","type":"uint256"},{"name":"inAmount","type":"uint256"},{"name":"inNonce","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"providerDepositMap","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"settleWindowMax","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"providerBalance","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"EIP712DOMAIN_TYPEHASH","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"settleWindowMin","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"address"}],"name":"channelCounter","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"regulator","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"providerRegainMap","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"regulatorWithdrawMap","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_regulator","type":"address"},{"name":"_provider","type":"address"},{"name":"_settleWindowMin","type":"uint256"},{"name":"_settleWindowMax","type":"uint256"},{"name":"_chainID","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sender","type":"address"},{"indexed":true,"name":"user","type":"address"},{"indexed":true,"name":"token","type":"address"},{"indexed":false,"name":"puppet","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"settleWindow","type":"uint256"},{"indexed":false,"name":"channelID","type":"bytes32"}],"name":"ChannelOpened","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"user","type":"address"},{"indexed":false,"name":"puppet","type":"address"}],"name":"PuppetAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"user","type":"address"},{"indexed":false,"name":"puppet","type":"address"}],"name":"PuppetDisabled","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"user","type":"address"},{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"newDeposit","type":"uint256"},{"indexed":false,"name":"totalDeposit","type":"uint256"}],"name":"UserNewDeposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"token","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"balance","type":"int256"}],"name":"ProviderNewDeposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"user","type":"address"},{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"totalWithdraw","type":"uint256"},{"indexed":false,"name":"lastCommitBlock","type":"uint256"}],"name":"UserWithdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"token","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"balance","type":"int256"},{"indexed":false,"name":"lastCommitBlock","type":"uint256"}],"name":"ProviderWithdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"token","type":"address"},{"indexed":false,"name":"withdrawAmount","type":"uint256"},{"indexed":false,"name":"feeAmount","type":"uint256"},{"indexed":false,"name":"feeNonce","type":"uint256"}],"name":"RegulatorWithdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"user","type":"address"},{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"token","type":"address"},{"indexed":false,"name":"balance","type":"uint256"},{"indexed":false,"name":"providerRegain","type":"int256"},{"indexed":false,"name":"lastCommitBlock","type":"uint256"}],"name":"CooperativeSettled","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"balance","type":"uint256"},{"indexed":false,"name":"nonce","type":"uint256"},{"indexed":false,"name":"inAmount","type":"uint256"},{"indexed":false,"name":"inNonce","type":"uint256"}],"name":"ChannelClosed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"userBalance","type":"uint256"},{"indexed":false,"name":"userNonce","type":"uint256"},{"indexed":false,"name":"providerBalance","type":"uint256"},{"indexed":false,"name":"providerNonce","type":"uint256"}],"name":"PartnerUpdateProof","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"inAmount","type":"uint256"},{"indexed":false,"name":"inNonce","type":"uint256"}],"name":"RegulatorUpdateProof","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"user","type":"address"},{"indexed":true,"name":"token","type":"address"},{"indexed":true,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"transferToUserAmount","type":"uint256"},{"indexed":false,"name":"providerRegain","type":"int256"}],"name":"ChannelSettled","type":"event"},{"constant":false,"inputs":[{"name":"user","type":"address"},{"name":"puppet","type":"address"},{"name":"settleWindow","type":"uint256"},{"name":"token","type":"address"},{"name":"amount","type":"uint256"}],"name":"openChannel","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"puppet","type":"address"}],"name":"addPuppet","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"puppet","type":"address"}],"name":"disablePuppet","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"amount","type":"uint256"}],"name":"userDeposit","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address"},{"name":"amount","type":"uint256"}],"name":"providerDeposit","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"withdraw","type":"uint256"},{"name":"lastCommitBlock","type":"uint256"},{"name":"providerSignature","type":"bytes"},{"name":"regulatorSignature","type":"bytes"},{"name":"receiver","type":"address"}],"name":"userWithdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address"},{"name":"amount","type":"uint256"},{"name":"lastCommitBlock","type":"uint256"},{"name":"regulatorSignature","type":"bytes"}],"name":"providerWithdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address"},{"name":"withdrawAmount","type":"uint256"},{"name":"feeAmount","type":"uint256"},{"name":"feeNonce","type":"uint256"},{"name":"signature","type":"bytes"}],"name":"regulatorWithdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"balance","type":"uint256"},{"name":"lastCommitBlock","type":"uint256"},{"name":"providerSignature","type":"bytes"},{"name":"regulatorSignature","type":"bytes"}],"name":"cooperativeSettle","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"balance","type":"uint256"},{"name":"nonce","type":"uint256"},{"name":"additionalHash","type":"bytes32"},{"name":"partnerSignature","type":"bytes"},{"name":"inAmount","type":"uint256"},{"name":"inNonce","type":"uint256"},{"name":"regulatorSignature","type":"bytes"},{"name":"providerSignature","type":"bytes"}],"name":"closeChannel","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"balance","type":"uint256"},{"name":"nonce","type":"uint256"},{"name":"additionalHash","type":"bytes32"},{"name":"partnerSignature","type":"bytes"},{"name":"consignorSignature","type":"bytes"}],"name":"partnerUpdateProof","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"},{"name":"inAmount","type":"uint256"},{"name":"inNonce","type":"uint256"},{"name":"regulatorSignature","type":"bytes"},{"name":"inProviderSignature","type":"bytes"}],"name":"regulatorUpdateProof","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelID","type":"bytes32"}],"name":"settleChannel","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"user","type":"address"},{"name":"token","type":"address"}],"name":"getChannelID","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"}];

/***/ }),

/***/ "./config/sessionPayment.json":
/*!************************************!*\
  !*** ./config/sessionPayment.json ***!
  \************************************/
/*! exports provided: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, default */
/***/ (function(module) {

module.exports = [{"constant":true,"inputs":[{"name":"","type":"bytes32"},{"name":"","type":"uint256"}],"name":"players","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"},{"name":"","type":"uint256"}],"name":"messages","outputs":[{"name":"from","type":"address"},{"name":"to","type":"address"},{"name":"sessionID","type":"bytes32"},{"name":"mType","type":"uint256"},{"name":"content","type":"bytes"},{"name":"signature","type":"bytes"},{"name":"channelID","type":"bytes32"},{"name":"balance","type":"uint256"},{"name":"nonce","type":"uint256"},{"name":"amount","type":"uint256"},{"name":"additionalHash","type":"bytes32"},{"name":"paymentSignature","type":"bytes"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"sessions","outputs":[{"name":"status","type":"uint8"},{"name":"provider","type":"address"},{"name":"game","type":"address"},{"name":"paymentContract","type":"address"},{"name":"data","type":"bytes"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"provider","type":"address"},{"indexed":true,"name":"game","type":"address"},{"indexed":false,"name":"_players","type":"address[]"},{"indexed":false,"name":"sessionID","type":"bytes32"}],"name":"InitSession","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sessionID","type":"bytes32"},{"indexed":true,"name":"user","type":"address"}],"name":"JoinSession","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sessionID","type":"bytes32"},{"indexed":true,"name":"user","type":"address"}],"name":"KickUser","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":true,"name":"sessionID","type":"bytes32"},{"indexed":false,"name":"mType","type":"uint8"},{"indexed":false,"name":"content","type":"bytes"},{"indexed":false,"name":"signature","type":"bytes"},{"indexed":false,"name":"channelID","type":"bytes32"},{"indexed":false,"name":"balance","type":"uint256"},{"indexed":false,"name":"nonce","type":"uint256"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"additionalHash","type":"bytes32"},{"indexed":false,"name":"paymentSignature","type":"bytes"}],"name":"SendMessage","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"sessionID","type":"bytes32"}],"name":"CloseSession","type":"event"},{"constant":false,"inputs":[{"name":"sessionID","type":"bytes32"},{"name":"provider","type":"address"},{"name":"game","type":"address"},{"name":"_players","type":"address[]"},{"name":"paymentContract","type":"address"},{"name":"data","type":"bytes"}],"name":"initSession","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"sessionID","type":"bytes32"},{"name":"user","type":"address"}],"name":"joinSession","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"sessionID","type":"bytes32"},{"name":"user","type":"address"}],"name":"kickUser","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"from","type":"address"},{"name":"to","type":"address"},{"name":"sessionID","type":"bytes32"},{"name":"mType","type":"uint8"},{"name":"content","type":"bytes"},{"name":"signature","type":"bytes"},{"name":"protoData","type":"bytes"},{"name":"paymentSig","type":"bytes"}],"name":"sendMessage","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"sessionID","type":"bytes32"}],"name":"closeSession","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"sessionID","type":"bytes32"},{"name":"user","type":"address"}],"name":"isUserExist","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"sessionID","type":"bytes32"}],"name":"exportSession","outputs":[{"components":[{"name":"from","type":"address"},{"name":"to","type":"address"},{"name":"sessionID","type":"bytes32"},{"name":"mType","type":"uint256"},{"name":"content","type":"bytes"},{"name":"signature","type":"bytes"},{"name":"channelID","type":"bytes32"},{"name":"balance","type":"uint256"},{"name":"nonce","type":"uint256"},{"name":"amount","type":"uint256"},{"name":"additionalHash","type":"bytes32"},{"name":"paymentSignature","type":"bytes"}],"name":"","type":"tuple[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"sessionID","type":"bytes32"}],"name":"exportPlayer","outputs":[{"name":"","type":"address[]"}],"payable":false,"stateMutability":"nonpayable","type":"function"}];

/***/ }),

/***/ "./config/transfer.json":
/*!******************************!*\
  !*** ./config/transfer.json ***!
  \******************************/
/*! exports provided: nested, default */
/***/ (function(module) {

module.exports = {"nested":{"TransferData":{"nested":{"soltype":{"type":"string","id":1002,"extend":"google.protobuf.FieldOptions"},"Transfer":{"fields":{"channelID":{"type":"bytes","id":1,"options":{"(soltype)":"bytes32"}},"balance":{"type":"uint64","id":2,"options":{"(soltype)":"uint"}},"nonce":{"type":"uint64","id":3,"options":{"(soltype)":"uint"}},"amount":{"type":"uint64","id":4,"options":{"(soltype)":"uint"}},"additionalHash":{"type":"bytes","id":5,"options":{"(soltype)":"bytes32"}}}}}},"google":{"nested":{"protobuf":{"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}}}}}}}};

/***/ }),

/***/ "./httpwatcher.ts":
/*!************************!*\
  !*** ./httpwatcher.ts ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var cov_dw31q1tnh=function(){var path="/Users/zhang/work/DigiCash/l2app/l2.js/src/httpwatcher.ts",hash="75363021a2ce9a96b122bc21906b969d66b7d249",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/zhang/work/DigiCash/l2app/l2.js/src/httpwatcher.ts",statementMap:{"0":{start:{line:2,column:16},end:{line:9,column:1}},"1":{start:{line:3,column:4},end:{line:8,column:7}},"2":{start:{line:4,column:36},end:{line:4,column:97}},"3":{start:{line:4,column:42},end:{line:4,column:70}},"4":{start:{line:4,column:85},end:{line:4,column:95}},"5":{start:{line:5,column:35},end:{line:5,column:100}},"6":{start:{line:5,column:41},end:{line:5,column:73}},"7":{start:{line:5,column:88},end:{line:5,column:98}},"8":{start:{line:6,column:32},end:{line:6,column:149}},"9":{start:{line:6,column:97},end:{line:6,column:119}},"10":{start:{line:7,column:8},end:{line:7,column:78}},"11":{start:{line:10,column:18},end:{line:36,column:1}},"12":{start:{line:11,column:12},end:{line:11,column:104}},"13":{start:{line:11,column:43},end:{line:11,column:68}},"14":{start:{line:11,column:57},end:{line:11,column:68}},"15":{start:{line:11,column:69},end:{line:11,column:81}},"16":{start:{line:12,column:4},end:{line:12,column:157}},"17":{start:{line:12,column:138},end:{line:12,column:150}},"18":{start:{line:13,column:23},end:{line:13,column:68}},"19":{start:{line:13,column:45},end:{line:13,column:65}},"20":{start:{line:15,column:8},end:{line:15,column:70}},"21":{start:{line:15,column:15},end:{line:15,column:70}},"22":{start:{line:16,column:8},end:{line:33,column:66}},"23":{start:{line:16,column:18},end:{line:33,column:66}},"24":{start:{line:17,column:12},end:{line:17,column:169}},"25":{start:{line:17,column:160},end:{line:17,column:169}},"26":{start:{line:18,column:12},end:{line:18,column:52}},"27":{start:{line:18,column:26},end:{line:18,column:52}},"28":{start:{line:19,column:12},end:{line:31,column:13}},"29":{start:{line:20,column:32},end:{line:20,column:39}},"30":{start:{line:20,column:40},end:{line:20,column:46}},"31":{start:{line:21,column:24},end:{line:21,column:34}},"32":{start:{line:21,column:35},end:{line:21,column:72}},"33":{start:{line:22,column:24},end:{line:22,column:34}},"34":{start:{line:22,column:35},end:{line:22,column:45}},"35":{start:{line:22,column:46},end:{line:22,column:55}},"36":{start:{line:22,column:56},end:{line:22,column:65}},"37":{start:{line:23,column:24},end:{line:23,column:41}},"38":{start:{line:23,column:42},end:{line:23,column:55}},"39":{start:{line:23,column:56},end:{line:23,column:65}},"40":{start:{line:25,column:20},end:{line:25,column:128}},"41":{start:{line:25,column:110},end:{line:25,column:116}},"42":{start:{line:25,column:117},end:{line:25,column:126}},"43":{start:{line:26,column:20},end:{line:26,column:106}},"44":{start:{line:26,column:81},end:{line:26,column:97}},"45":{start:{line:26,column:98},end:{line:26,column:104}},"46":{start:{line:27,column:20},end:{line:27,column:89}},"47":{start:{line:27,column:57},end:{line:27,column:72}},"48":{start:{line:27,column:73},end:{line:27,column:80}},"49":{start:{line:27,column:81},end:{line:27,column:87}},"50":{start:{line:28,column:20},end:{line:28,column:87}},"51":{start:{line:28,column:47},end:{line:28,column:62}},"52":{start:{line:28,column:63},end:{line:28,column:78}},"53":{start:{line:28,column:79},end:{line:28,column:85}},"54":{start:{line:29,column:20},end:{line:29,column:42}},"55":{start:{line:29,column:30},end:{line:29,column:42}},"56":{start:{line:30,column:20},end:{line:30,column:33}},"57":{start:{line:30,column:34},end:{line:30,column:43}},"58":{start:{line:32,column:12},end:{line:32,column:39}},"59":{start:{line:33,column:22},end:{line:33,column:34}},"60":{start:{line:33,column:35},end:{line:33,column:41}},"61":{start:{line:33,column:54},end:{line:33,column:64}},"62":{start:{line:34,column:8},end:{line:34,column:35}},"63":{start:{line:34,column:23},end:{line:34,column:35}},"64":{start:{line:34,column:36},end:{line:34,column:89}},"65":{start:{line:37,column:0},end:{line:37,column:62}},"66":{start:{line:38,column:15},end:{line:38,column:40}},"67":{start:{line:39,column:19},end:{line:198,column:3}},"68":{start:{line:41,column:8},end:{line:41,column:25}},"69":{start:{line:42,column:8},end:{line:42,column:43}},"70":{start:{line:43,column:8},end:{line:43,column:35}},"71":{start:{line:44,column:8},end:{line:44,column:28}},"72":{start:{line:46,column:4},end:{line:74,column:6}},"73":{start:{line:47,column:8},end:{line:73,column:11}},"74":{start:{line:49,column:12},end:{line:72,column:15}},"75":{start:{line:50,column:16},end:{line:71,column:17}},"76":{start:{line:51,column:28},end:{line:55,column:28}},"77":{start:{line:57,column:24},end:{line:57,column:43}},"78":{start:{line:58,column:24},end:{line:58,column:50}},"79":{start:{line:59,column:24},end:{line:59,column:37}},"80":{start:{line:61,column:24},end:{line:61,column:67}},"81":{start:{line:61,column:53},end:{line:61,column:67}},"82":{start:{line:62,column:24},end:{line:62,column:47}},"83":{start:{line:63,column:24},end:{line:63,column:66}},"84":{start:{line:65,column:24},end:{line:65,column:34}},"85":{start:{line:66,column:24},end:{line:66,column:37}},"86":{start:{line:68,column:24},end:{line:68,column:29}},"87":{start:{line:69,column:24},end:{line:69,column:38}},"88":{start:{line:70,column:28},end:{line:70,column:39}},"89":{start:{line:75,column:4},end:{line:109,column:6}},"90":{start:{line:76,column:8},end:{line:108,column:11}},"91":{start:{line:78,column:12},end:{line:107,column:15}},"92":{start:{line:79,column:16},end:{line:106,column:17}},"93":{start:{line:80,column:28},end:{line:84,column:28}},"94":{start:{line:86,column:24},end:{line:86,column:43}},"95":{start:{line:87,column:24},end:{line:104,column:25}},"96":{start:{line:88,column:28},end:{line:88,column:51}},"97":{start:{line:89,column:28},end:{line:89,column:91}},"98":{start:{line:90,column:28},end:{line:103,column:29}},"99":{start:{line:91,column:32},end:{line:91,column:80}},"100":{start:{line:92,column:32},end:{line:92,column:52}},"101":{start:{line:93,column:32},end:{line:99,column:33}},"102":{start:{line:94,column:36},end:{line:98,column:37}},"103":{start:{line:96,column:40},end:{line:96,column:61}},"104":{start:{line:97,column:40},end:{line:97,column:46}},"105":{start:{line:100,column:32},end:{line:102,column:33}},"106":{start:{line:101,column:36},end:{line:101,column:83}},"107":{start:{line:105,column:24},end:{line:105,column:35}},"108":{start:{line:110,column:4},end:{line:188,column:6}},"109":{start:{line:111,column:8},end:{line:111,column:64}},"110":{start:{line:111,column:42},end:{line:111,column:62}},"111":{start:{line:112,column:8},end:{line:187,column:11}},"112":{start:{line:114,column:12},end:{line:186,column:15}},"113":{start:{line:115,column:16},end:{line:185,column:17}},"114":{start:{line:116,column:28},end:{line:116,column:67}},"115":{start:{line:118,column:24},end:{line:118,column:55}},"116":{start:{line:119,column:24},end:{line:119,column:84}},"117":{start:{line:120,column:24},end:{line:120,column:98}},"118":{start:{line:121,column:24},end:{line:121,column:37}},"119":{start:{line:123,column:24},end:{line:123,column:84}},"120":{start:{line:123,column:70},end:{line:123,column:84}},"121":{start:{line:124,column:24},end:{line:124,column:52}},"122":{start:{line:125,column:24},end:{line:125,column:37}},"123":{start:{line:127,column:24},end:{line:127,column:61}},"124":{start:{line:127,column:47},end:{line:127,column:61}},"125":{start:{line:128,column:24},end:{line:128,column:43}},"126":{start:{line:129,column:24},end:{line:129,column:105}},"127":{start:{line:131,column:24},end:{line:131,column:34}},"128":{start:{line:132,column:24},end:{line:134,column:25}},"129":{start:{line:133,column:28},end:{line:133,column:39}},"130":{start:{line:135,column:24},end:{line:135,column:37}},"131":{start:{line:137,column:24},end:{line:137,column:29}},"132":{start:{line:138,column:24},end:{line:138,column:38}},"133":{start:{line:140,column:24},end:{line:140,column:65}},"134":{start:{line:141,column:24},end:{line:141,column:63}},"135":{start:{line:143,column:24},end:{line:143,column:55}},"136":{start:{line:144,column:24},end:{line:144,column:38}},"137":{start:{line:146,column:24},end:{line:146,column:82}},"138":{start:{line:147,column:24},end:{line:147,column:37}},"139":{start:{line:149,column:24},end:{line:149,column:50}},"140":{start:{line:149,column:35},end:{line:149,column:50}},"141":{start:{line:150,column:24},end:{line:150,column:71}},"142":{start:{line:152,column:24},end:{line:152,column:34}},"143":{start:{line:153,column:24},end:{line:153,column:38}},"144":{start:{line:155,column:24},end:{line:155,column:53}},"145":{start:{line:156,column:24},end:{line:156,column:65}},"146":{start:{line:157,column:24},end:{line:157,column:63}},"147":{start:{line:159,column:24},end:{line:159,column:55}},"148":{start:{line:160,column:24},end:{line:162,column:25}},"149":{start:{line:161,column:28},end:{line:161,column:42}},"150":{start:{line:163,column:24},end:{line:163,column:52}},"151":{start:{line:164,column:24},end:{line:164,column:38}},"152":{start:{line:166,column:24},end:{line:166,column:62}},"153":{start:{line:166,column:47},end:{line:166,column:62}},"154":{start:{line:167,column:24},end:{line:167,column:43}},"155":{start:{line:168,column:24},end:{line:168,column:105}},"156":{start:{line:170,column:24},end:{line:170,column:34}},"157":{start:{line:171,column:24},end:{line:173,column:25}},"158":{start:{line:172,column:28},end:{line:172,column:39}},"159":{start:{line:174,column:24},end:{line:174,column:38}},"160":{start:{line:176,column:24},end:{line:176,column:29}},"161":{start:{line:177,column:24},end:{line:177,column:39}},"162":{start:{line:178,column:29},end:{line:178,column:44}},"163":{start:{line:180,column:24},end:{line:180,column:42}},"164":{start:{line:181,column:24},end:{line:181,column:61}},"165":{start:{line:182,column:24},end:{line:182,column:39}},"166":{start:{line:183,column:29},end:{line:183,column:43}},"167":{start:{line:184,column:29},end:{line:184,column:40}},"168":{start:{line:189,column:4},end:{line:196,column:6}},"169":{start:{line:190,column:8},end:{line:195,column:11}},"170":{start:{line:191,column:12},end:{line:194,column:15}},"171":{start:{line:192,column:16},end:{line:192,column:37}},"172":{start:{line:193,column:16},end:{line:193,column:27}},"173":{start:{line:197,column:4},end:{line:197,column:23}},"174":{start:{line:199,column:0},end:{line:199,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:2,column:44},end:{line:2,column:45}},loc:{start:{line:2,column:89},end:{line:9,column:1}},line:2},"1":{name:"(anonymous_1)",decl:{start:{line:3,column:36},end:{line:3,column:37}},loc:{start:{line:3,column:63},end:{line:8,column:5}},line:3},"2":{name:"fulfilled",decl:{start:{line:4,column:17},end:{line:4,column:26}},loc:{start:{line:4,column:34},end:{line:4,column:99}},line:4},"3":{name:"rejected",decl:{start:{line:5,column:17},end:{line:5,column:25}},loc:{start:{line:5,column:33},end:{line:5,column:102}},line:5},"4":{name:"step",decl:{start:{line:6,column:17},end:{line:6,column:21}},loc:{start:{line:6,column:30},end:{line:6,column:151}},line:6},"5":{name:"(anonymous_5)",decl:{start:{line:6,column:76},end:{line:6,column:77}},loc:{start:{line:6,column:95},end:{line:6,column:121}},line:6},"6":{name:"(anonymous_6)",decl:{start:{line:10,column:48},end:{line:10,column:49}},loc:{start:{line:10,column:73},end:{line:36,column:1}},line:10},"7":{name:"(anonymous_7)",decl:{start:{line:11,column:30},end:{line:11,column:31}},loc:{start:{line:11,column:41},end:{line:11,column:83}},line:11},"8":{name:"(anonymous_8)",decl:{start:{line:12,column:125},end:{line:12,column:126}},loc:{start:{line:12,column:136},end:{line:12,column:152}},line:12},"9":{name:"verb",decl:{start:{line:13,column:13},end:{line:13,column:17}},loc:{start:{line:13,column:21},end:{line:13,column:70}},line:13},"10":{name:"(anonymous_10)",decl:{start:{line:13,column:30},end:{line:13,column:31}},loc:{start:{line:13,column:43},end:{line:13,column:67}},line:13},"11":{name:"step",decl:{start:{line:14,column:13},end:{line:14,column:17}},loc:{start:{line:14,column:22},end:{line:35,column:5}},line:14},"12":{name:"(anonymous_12)",decl:{start:{line:39,column:19},end:{line:39,column:20}},loc:{start:{line:39,column:31},end:{line:198,column:1}},line:39},"13":{name:"HttpWatcher",decl:{start:{line:40,column:13},end:{line:40,column:24}},loc:{start:{line:40,column:57},end:{line:45,column:5}},line:40},"14":{name:"(anonymous_14)",decl:{start:{line:46,column:41},end:{line:46,column:42}},loc:{start:{line:46,column:118},end:{line:74,column:5}},line:46},"15":{name:"(anonymous_15)",decl:{start:{line:47,column:47},end:{line:47,column:48}},loc:{start:{line:47,column:59},end:{line:73,column:9}},line:47},"16":{name:"(anonymous_16)",decl:{start:{line:49,column:37},end:{line:49,column:38}},loc:{start:{line:49,column:51},end:{line:72,column:13}},line:49},"17":{name:"(anonymous_17)",decl:{start:{line:75,column:44},end:{line:75,column:45}},loc:{start:{line:75,column:97},end:{line:109,column:5}},line:75},"18":{name:"(anonymous_18)",decl:{start:{line:76,column:47},end:{line:76,column:48}},loc:{start:{line:76,column:59},end:{line:108,column:9}},line:76},"19":{name:"(anonymous_19)",decl:{start:{line:78,column:37},end:{line:78,column:38}},loc:{start:{line:78,column:51},end:{line:107,column:13}},line:78},"20":{name:"(anonymous_20)",decl:{start:{line:110,column:34},end:{line:110,column:35}},loc:{start:{line:110,column:61},end:{line:188,column:5}},line:110},"21":{name:"(anonymous_21)",decl:{start:{line:112,column:47},end:{line:112,column:48}},loc:{start:{line:112,column:59},end:{line:187,column:9}},line:112},"22":{name:"(anonymous_22)",decl:{start:{line:114,column:37},end:{line:114,column:38}},loc:{start:{line:114,column:51},end:{line:186,column:13}},line:114},"23":{name:"(anonymous_23)",decl:{start:{line:189,column:33},end:{line:189,column:34}},loc:{start:{line:189,column:45},end:{line:196,column:5}},line:189},"24":{name:"(anonymous_24)",decl:{start:{line:190,column:47},end:{line:190,column:48}},loc:{start:{line:190,column:59},end:{line:195,column:9}},line:190},"25":{name:"(anonymous_25)",decl:{start:{line:191,column:37},end:{line:191,column:38}},loc:{start:{line:191,column:51},end:{line:194,column:13}},line:191}},branchMap:{"0":{loc:{start:{line:2,column:16},end:{line:9,column:1}},type:"binary-expr",locations:[{start:{line:2,column:17},end:{line:2,column:21}},{start:{line:2,column:25},end:{line:2,column:39}},{start:{line:2,column:44},end:{line:9,column:1}}],line:2},"1":{loc:{start:{line:3,column:16},end:{line:3,column:34}},type:"binary-expr",locations:[{start:{line:3,column:16},end:{line:3,column:17}},{start:{line:3,column:22},end:{line:3,column:33}}],line:3},"2":{loc:{start:{line:6,column:32},end:{line:6,column:148}},type:"cond-expr",locations:[{start:{line:6,column:46},end:{line:6,column:67}},{start:{line:6,column:70},end:{line:6,column:148}}],line:6},"3":{loc:{start:{line:7,column:51},end:{line:7,column:67}},type:"binary-expr",locations:[{start:{line:7,column:51},end:{line:7,column:61}},{start:{line:7,column:65},end:{line:7,column:67}}],line:7},"4":{loc:{start:{line:10,column:18},end:{line:36,column:1}},type:"binary-expr",locations:[{start:{line:10,column:19},end:{line:10,column:23}},{start:{line:10,column:27},end:{line:10,column:43}},{start:{line:10,column:48},end:{line:36,column:1}}],line:10},"5":{loc:{start:{line:11,column:43},end:{line:11,column:68}},type:"if",locations:[{start:{line:11,column:43},end:{line:11,column:68}},{start:{line:11,column:43},end:{line:11,column:68}}],line:11},"6":{loc:{start:{line:12,column:71},end:{line:12,column:153}},type:"binary-expr",locations:[{start:{line:12,column:71},end:{line:12,column:99}},{start:{line:12,column:104},end:{line:12,column:152}}],line:12},"7":{loc:{start:{line:15,column:8},end:{line:15,column:70}},type:"if",locations:[{start:{line:15,column:8},end:{line:15,column:70}},{start:{line:15,column:8},end:{line:15,column:70}}],line:15},"8":{loc:{start:{line:17,column:12},end:{line:17,column:169}},type:"if",locations:[{start:{line:17,column:12},end:{line:17,column:169}},{start:{line:17,column:12},end:{line:17,column:169}}],line:17},"9":{loc:{start:{line:17,column:23},end:{line:17,column:158}},type:"binary-expr",locations:[{start:{line:17,column:23},end:{line:17,column:24}},{start:{line:17,column:29},end:{line:17,column:125}},{start:{line:17,column:130},end:{line:17,column:158}}],line:17},"10":{loc:{start:{line:17,column:33},end:{line:17,column:125}},type:"cond-expr",locations:[{start:{line:17,column:45},end:{line:17,column:56}},{start:{line:17,column:59},end:{line:17,column:125}}],line:17},"11":{loc:{start:{line:17,column:59},end:{line:17,column:125}},type:"cond-expr",locations:[{start:{line:17,column:67},end:{line:17,column:116}},{start:{line:17,column:119},end:{line:17,column:125}}],line:17},"12":{loc:{start:{line:17,column:67},end:{line:17,column:116}},type:"binary-expr",locations:[{start:{line:17,column:67},end:{line:17,column:77}},{start:{line:17,column:82},end:{line:17,column:115}}],line:17},"13":{loc:{start:{line:17,column:82},end:{line:17,column:112}},type:"binary-expr",locations:[{start:{line:17,column:83},end:{line:17,column:98}},{start:{line:17,column:103},end:{line:17,column:112}}],line:17},"14":{loc:{start:{line:18,column:12},end:{line:18,column:52}},type:"if",locations:[{start:{line:18,column:12},end:{line:18,column:52}},{start:{line:18,column:12},end:{line:18,column:52}}],line:18},"15":{loc:{start:{line:19,column:12},end:{line:31,column:13}},type:"switch",locations:[{start:{line:20,column:16},end:{line:20,column:23}},{start:{line:20,column:24},end:{line:20,column:46}},{start:{line:21,column:16},end:{line:21,column:72}},{start:{line:22,column:16},end:{line:22,column:65}},{start:{line:23,column:16},end:{line:23,column:65}},{start:{line:24,column:16},end:{line:30,column:43}}],line:19},"16":{loc:{start:{line:25,column:20},end:{line:25,column:128}},type:"if",locations:[{start:{line:25,column:20},end:{line:25,column:128}},{start:{line:25,column:20},end:{line:25,column:128}}],line:25},"17":{loc:{start:{line:25,column:24},end:{line:25,column:106}},type:"binary-expr",locations:[{start:{line:25,column:24},end:{line:25,column:74}},{start:{line:25,column:79},end:{line:25,column:90}},{start:{line:25,column:94},end:{line:25,column:105}}],line:25},"18":{loc:{start:{line:25,column:42},end:{line:25,column:73}},type:"binary-expr",locations:[{start:{line:25,column:42},end:{line:25,column:54}},{start:{line:25,column:58},end:{line:25,column:73}}],line:25},"19":{loc:{start:{line:26,column:20},end:{line:26,column:106}},type:"if",locations:[{start:{line:26,column:20},end:{line:26,column:106}},{start:{line:26,column:20},end:{line:26,column:106}}],line:26},"20":{loc:{start:{line:26,column:24},end:{line:26,column:77}},type:"binary-expr",locations:[{start:{line:26,column:24},end:{line:26,column:35}},{start:{line:26,column:40},end:{line:26,column:42}},{start:{line:26,column:47},end:{line:26,column:59}},{start:{line:26,column:63},end:{line:26,column:75}}],line:26},"21":{loc:{start:{line:27,column:20},end:{line:27,column:89}},type:"if",locations:[{start:{line:27,column:20},end:{line:27,column:89}},{start:{line:27,column:20},end:{line:27,column:89}}],line:27},"22":{loc:{start:{line:27,column:24},end:{line:27,column:53}},type:"binary-expr",locations:[{start:{line:27,column:24},end:{line:27,column:35}},{start:{line:27,column:39},end:{line:27,column:53}}],line:27},"23":{loc:{start:{line:28,column:20},end:{line:28,column:87}},type:"if",locations:[{start:{line:28,column:20},end:{line:28,column:87}},{start:{line:28,column:20},end:{line:28,column:87}}],line:28},"24":{loc:{start:{line:28,column:24},end:{line:28,column:43}},type:"binary-expr",locations:[{start:{line:28,column:24},end:{line:28,column:25}},{start:{line:28,column:29},end:{line:28,column:43}}],line:28},"25":{loc:{start:{line:29,column:20},end:{line:29,column:42}},type:"if",locations:[{start:{line:29,column:20},end:{line:29,column:42}},{start:{line:29,column:20},end:{line:29,column:42}}],line:29},"26":{loc:{start:{line:34,column:8},end:{line:34,column:35}},type:"if",locations:[{start:{line:34,column:8},end:{line:34,column:35}},{start:{line:34,column:8},end:{line:34,column:35}}],line:34},"27":{loc:{start:{line:34,column:52},end:{line:34,column:74}},type:"cond-expr",locations:[{start:{line:34,column:60},end:{line:34,column:65}},{start:{line:34,column:68},end:{line:34,column:74}}],line:34},"28":{loc:{start:{line:50,column:16},end:{line:71,column:17}},type:"switch",locations:[{start:{line:51,column:20},end:{line:55,column:28}},{start:{line:56,column:20},end:{line:59,column:37}},{start:{line:60,column:20},end:{line:63,column:66}},{start:{line:64,column:20},end:{line:66,column:37}},{start:{line:67,column:20},end:{line:69,column:38}},{start:{line:70,column:20},end:{line:70,column:39}}],line:50},"29":{loc:{start:{line:61,column:24},end:{line:61,column:67}},type:"if",locations:[{start:{line:61,column:24},end:{line:61,column:67}},{start:{line:61,column:24},end:{line:61,column:67}}],line:61},"30":{loc:{start:{line:79,column:16},end:{line:106,column:17}},type:"switch",locations:[{start:{line:80,column:20},end:{line:84,column:28}},{start:{line:85,column:20},end:{line:105,column:35}}],line:79},"31":{loc:{start:{line:90,column:28},end:{line:103,column:29}},type:"if",locations:[{start:{line:90,column:28},end:{line:103,column:29}},{start:{line:90,column:28},end:{line:103,column:29}}],line:90},"32":{loc:{start:{line:94,column:36},end:{line:98,column:37}},type:"if",locations:[{start:{line:94,column:36},end:{line:98,column:37}},{start:{line:94,column:36},end:{line:98,column:37}}],line:94},"33":{loc:{start:{line:94,column:40},end:{line:95,column:97}},type:"binary-expr",locations:[{start:{line:94,column:40},end:{line:94,column:56}},{start:{line:95,column:40},end:{line:95,column:97}}],line:94},"34":{loc:{start:{line:100,column:32},end:{line:102,column:33}},type:"if",locations:[{start:{line:100,column:32},end:{line:102,column:33}},{start:{line:100,column:32},end:{line:102,column:33}}],line:100},"35":{loc:{start:{line:111,column:8},end:{line:111,column:64}},type:"if",locations:[{start:{line:111,column:8},end:{line:111,column:64}},{start:{line:111,column:8},end:{line:111,column:64}}],line:111},"36":{loc:{start:{line:115,column:16},end:{line:185,column:17}},type:"switch",locations:[{start:{line:116,column:20},end:{line:116,column:67}},{start:{line:117,column:20},end:{line:121,column:37}},{start:{line:122,column:20},end:{line:125,column:37}},{start:{line:126,column:20},end:{line:129,column:105}},{start:{line:130,column:20},end:{line:135,column:37}},{start:{line:136,column:20},end:{line:138,column:38}},{start:{line:139,column:20},end:{line:141,column:63}},{start:{line:142,column:20},end:{line:144,column:38}},{start:{line:145,column:20},end:{line:147,column:37}},{start:{line:148,column:20},end:{line:150,column:71}},{start:{line:151,column:20},end:{line:153,column:38}},{start:{line:154,column:20},end:{line:157,column:63}},{start:{line:158,column:20},end:{line:164,column:38}},{start:{line:165,column:20},end:{line:168,column:105}},{start:{line:169,column:20},end:{line:174,column:38}},{start:{line:175,column:20},end:{line:177,column:39}},{start:{line:178,column:20},end:{line:178,column:44}},{start:{line:179,column:20},end:{line:182,column:39}},{start:{line:183,column:20},end:{line:183,column:43}},{start:{line:184,column:20},end:{line:184,column:40}}],line:115},"37":{loc:{start:{line:119,column:42},end:{line:119,column:83}},type:"binary-expr",locations:[{start:{line:119,column:42},end:{line:119,column:57}},{start:{line:119,column:61},end:{line:119,column:83}}],line:119},"38":{loc:{start:{line:123,column:24},end:{line:123,column:84}},type:"if",locations:[{start:{line:123,column:24},end:{line:123,column:84}},{start:{line:123,column:24},end:{line:123,column:84}}],line:123},"39":{loc:{start:{line:127,column:24},end:{line:127,column:61}},type:"if",locations:[{start:{line:127,column:24},end:{line:127,column:61}},{start:{line:127,column:24},end:{line:127,column:61}}],line:127},"40":{loc:{start:{line:132,column:24},end:{line:134,column:25}},type:"if",locations:[{start:{line:132,column:24},end:{line:134,column:25}},{start:{line:132,column:24},end:{line:134,column:25}}],line:132},"41":{loc:{start:{line:149,column:24},end:{line:149,column:50}},type:"if",locations:[{start:{line:149,column:24},end:{line:149,column:50}},{start:{line:149,column:24},end:{line:149,column:50}}],line:149},"42":{loc:{start:{line:160,column:24},end:{line:162,column:25}},type:"if",locations:[{start:{line:160,column:24},end:{line:162,column:25}},{start:{line:160,column:24},end:{line:162,column:25}}],line:160},"43":{loc:{start:{line:166,column:24},end:{line:166,column:62}},type:"if",locations:[{start:{line:166,column:24},end:{line:166,column:62}},{start:{line:166,column:24},end:{line:166,column:62}}],line:166},"44":{loc:{start:{line:171,column:24},end:{line:173,column:25}},type:"if",locations:[{start:{line:171,column:24},end:{line:173,column:25}},{start:{line:171,column:24},end:{line:173,column:25}}],line:171}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},b:{"0":[0,0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0,0,0,0],"16":[0,0],"17":[0,0,0],"18":[0,0],"19":[0,0],"20":[0,0,0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0,0,0,0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0]},inputSourceMap:{version:3,file:"/Users/zhang/work/DigiCash/l2app/l2.js/src/httpwatcher.ts",sourceRoot:"/Users/zhang/work/DigiCash/l2app/l2.js/",sources:["node_modules/source-map-loader/index.js!/Users/zhang/work/DigiCash/l2app/l2.js/src/httpwatcher.ts"],names:[],mappings:"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",sourcesContent:["import { Contract } from 'web3/node_modules/web3-eth-contract';\nimport { delay } from './utils/common';\n\n/**\n * because appchain can not suppport event subscription.\n * httpWatcher using http way to poll new event from blockchain, instead of websocket subscription\n */\nexport default class HttpWatcher {\n  private enabled: boolean;\n  private base: any;\n  private blockInterval: number;\n  private watchList: any;\n\n  /**\n   * constructor of HttpWatcher\n   *\n   * @param base  web3.eth/cita.base\n   * @param blockInterval the interval time to poll event\n   * @param watchList the contract and setting list to watch\n   */\n  constructor(base: any, blockInterval: number, watchList: any) {\n    this.base = base;\n    this.blockInterval = blockInterval;\n    this.watchList = watchList;\n    this.enabled = true;\n  }\n\n  /**\n   * search a specified event of contract from blockchain, and handle it\n   *\n   * @param fromBlockNumber start blockNumber\n   * @param toBlockNumber end blockNumber\n   * @param contract contract instance\n   * @param eventName event name\n   * @param eventSetting event setting, include filter and handler\n   */\n  async processEvent(\n    fromBlockNumber: number,\n    toBlockNumber: number,\n    contract: Contract,\n    eventName: string,\n    eventSetting: any\n  ) {\n    let events = await contract.getPastEvents(eventName, {\n      filter: eventSetting.filter(),\n      fromBlock: fromBlockNumber,\n      toBlock: toBlockNumber,\n    });\n\n    for (let event of events) {\n      await eventSetting.handler(event);\n    }\n  }\n\n  /**\n   * watch all event of a contract, and handle them\n   *\n   * @param fromBlockNumber start blockNumber\n   * @param toBlockNumber end blockNumber\n   * @param watchItem watch event list and settings\n   */\n  async processAllEvent(\n    fromBlockNumber: number,\n    toBlockNumber: number,\n    watchItem: any\n  ) {\n    let events = await watchItem.contract.getPastEvents('allEvents', {\n      filter: {},\n      fromBlock: fromBlockNumber,\n      toBlock: toBlockNumber,\n    });\n\n    for (let event of events) {\n      let { event: eventName, returnValues } = event;\n\n      if (watchItem.listener[eventName]) {\n        let filter = watchItem.listener[eventName].filter();\n        let filterResult = true;\n        for (let k in filter) {\n          if (\n            !returnValues[k] ||\n            returnValues[k].toLowerCase() !== filter[k].toLowerCase()\n          ) {\n            filterResult = false;\n            break;\n          }\n        }\n\n        if (filterResult) {\n          watchItem.listener[eventName].handler(event);\n        }\n      }\n    }\n  }\n\n  /**\n   * start httpwatcher to watch blockchain\n   *\n   * @param lastBlockNumber start block number\n   */\n  async start(lastBlockNumber: number = 0) {\n    let currentBlockNumber = await this.base.getBlockNumber();\n    lastBlockNumber = lastBlockNumber || currentBlockNumber - 1;\n\n    console.log('start syncing process', lastBlockNumber, currentBlockNumber);\n    while (lastBlockNumber <= currentBlockNumber) {\n      for (let watchItem of this.watchList) {\n        await this.processAllEvent(\n          lastBlockNumber,\n          currentBlockNumber,\n          watchItem\n        );\n        if (this.enabled === false) {\n          return;\n        }\n      }\n\n      lastBlockNumber = currentBlockNumber + 1;\n      currentBlockNumber = await this.base.getBlockNumber();\n    }\n\n    // finish sync process;\n    console.log('finish syncing process', currentBlockNumber);\n\n    while (true) {\n      await delay(this.blockInterval);\n\n      try {\n        lastBlockNumber = currentBlockNumber + 1;\n        currentBlockNumber = await this.base.getBlockNumber();\n\n        if (lastBlockNumber > currentBlockNumber) {\n          continue;\n        }\n\n        for (let watchItem of this.watchList) {\n          await this.processAllEvent(\n            lastBlockNumber,\n            currentBlockNumber,\n            watchItem\n          );\n\n          if (this.enabled === false) {\n            return;\n          }\n        }\n        // console.log('currentBlockNumber', currentBlockNumber);\n      } catch (err) {\n        console.error('watch error:', err);\n        // this.base.setProvider('ws://wallet.milewan.com:4337');\n        // alert \u673A\u5236\n      }\n    }\n  }\n\n  /**\n   * stop http watcher\n   */\n  async stop() {\n    this.enabled = false;\n  }\n}\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var __awaiter=(cov_dw31q1tnh.s[0]++,(cov_dw31q1tnh.b[0][0]++,this)&&(cov_dw31q1tnh.b[0][1]++,this.__awaiter)||(cov_dw31q1tnh.b[0][2]++,function(thisArg,_arguments,P,generator){cov_dw31q1tnh.f[0]++;cov_dw31q1tnh.s[1]++;return new((cov_dw31q1tnh.b[1][0]++,P)||(cov_dw31q1tnh.b[1][1]++,P=Promise))(function(resolve,reject){cov_dw31q1tnh.f[1]++;function fulfilled(value){cov_dw31q1tnh.f[2]++;cov_dw31q1tnh.s[2]++;try{cov_dw31q1tnh.s[3]++;step(generator.next(value));}catch(e){cov_dw31q1tnh.s[4]++;reject(e);}}function rejected(value){cov_dw31q1tnh.f[3]++;cov_dw31q1tnh.s[5]++;try{cov_dw31q1tnh.s[6]++;step(generator["throw"](value));}catch(e){cov_dw31q1tnh.s[7]++;reject(e);}}function step(result){cov_dw31q1tnh.f[4]++;cov_dw31q1tnh.s[8]++;result.done?(cov_dw31q1tnh.b[2][0]++,resolve(result.value)):(cov_dw31q1tnh.b[2][1]++,new P(function(resolve){cov_dw31q1tnh.f[5]++;cov_dw31q1tnh.s[9]++;resolve(result.value);}).then(fulfilled,rejected));}cov_dw31q1tnh.s[10]++;step((generator=generator.apply(thisArg,(cov_dw31q1tnh.b[3][0]++,_arguments)||(cov_dw31q1tnh.b[3][1]++,[]))).next());});}));var __generator=(cov_dw31q1tnh.s[11]++,(cov_dw31q1tnh.b[4][0]++,this)&&(cov_dw31q1tnh.b[4][1]++,this.__generator)||(cov_dw31q1tnh.b[4][2]++,function(thisArg,body){cov_dw31q1tnh.f[6]++;var _=(cov_dw31q1tnh.s[12]++,{label:0,sent:function(){cov_dw31q1tnh.f[7]++;cov_dw31q1tnh.s[13]++;if(t[0]&1){cov_dw31q1tnh.b[5][0]++;cov_dw31q1tnh.s[14]++;throw t[1];}else{cov_dw31q1tnh.b[5][1]++;}cov_dw31q1tnh.s[15]++;return t[1];},trys:[],ops:[]}),f,y,t,g;cov_dw31q1tnh.s[16]++;return g={next:verb(0),"throw":verb(1),"return":verb(2)},(cov_dw31q1tnh.b[6][0]++,typeof Symbol==="function")&&(cov_dw31q1tnh.b[6][1]++,g[Symbol.iterator]=function(){cov_dw31q1tnh.f[8]++;cov_dw31q1tnh.s[17]++;return this;}),g;function verb(n){cov_dw31q1tnh.f[9]++;cov_dw31q1tnh.s[18]++;return function(v){cov_dw31q1tnh.f[10]++;cov_dw31q1tnh.s[19]++;return step([n,v]);};}function step(op){cov_dw31q1tnh.f[11]++;cov_dw31q1tnh.s[20]++;if(f){cov_dw31q1tnh.b[7][0]++;cov_dw31q1tnh.s[21]++;throw new TypeError("Generator is already executing.");}else{cov_dw31q1tnh.b[7][1]++;}cov_dw31q1tnh.s[22]++;while(_){cov_dw31q1tnh.s[23]++;try{cov_dw31q1tnh.s[24]++;if(f=1,(cov_dw31q1tnh.b[9][0]++,y)&&(cov_dw31q1tnh.b[9][1]++,t=op[0]&2?(cov_dw31q1tnh.b[10][0]++,y["return"]):(cov_dw31q1tnh.b[10][1]++,op[0]?(cov_dw31q1tnh.b[11][0]++,(cov_dw31q1tnh.b[12][0]++,y["throw"])||(cov_dw31q1tnh.b[12][1]++,((cov_dw31q1tnh.b[13][0]++,t=y["return"])&&(cov_dw31q1tnh.b[13][1]++,t.call(y)),0))):(cov_dw31q1tnh.b[11][1]++,y.next)))&&(cov_dw31q1tnh.b[9][2]++,!(t=t.call(y,op[1])).done)){cov_dw31q1tnh.b[8][0]++;cov_dw31q1tnh.s[25]++;return t;}else{cov_dw31q1tnh.b[8][1]++;}cov_dw31q1tnh.s[26]++;if(y=0,t){cov_dw31q1tnh.b[14][0]++;cov_dw31q1tnh.s[27]++;op=[op[0]&2,t.value];}else{cov_dw31q1tnh.b[14][1]++;}cov_dw31q1tnh.s[28]++;switch(op[0]){case 0:cov_dw31q1tnh.b[15][0]++;case 1:cov_dw31q1tnh.b[15][1]++;cov_dw31q1tnh.s[29]++;t=op;cov_dw31q1tnh.s[30]++;break;case 4:cov_dw31q1tnh.b[15][2]++;cov_dw31q1tnh.s[31]++;_.label++;cov_dw31q1tnh.s[32]++;return{value:op[1],done:false};case 5:cov_dw31q1tnh.b[15][3]++;cov_dw31q1tnh.s[33]++;_.label++;cov_dw31q1tnh.s[34]++;y=op[1];cov_dw31q1tnh.s[35]++;op=[0];cov_dw31q1tnh.s[36]++;continue;case 7:cov_dw31q1tnh.b[15][4]++;cov_dw31q1tnh.s[37]++;op=_.ops.pop();cov_dw31q1tnh.s[38]++;_.trys.pop();cov_dw31q1tnh.s[39]++;continue;default:cov_dw31q1tnh.b[15][5]++;cov_dw31q1tnh.s[40]++;if((cov_dw31q1tnh.b[17][0]++,!(t=_.trys,t=(cov_dw31q1tnh.b[18][0]++,t.length>0)&&(cov_dw31q1tnh.b[18][1]++,t[t.length-1])))&&((cov_dw31q1tnh.b[17][1]++,op[0]===6)||(cov_dw31q1tnh.b[17][2]++,op[0]===2))){cov_dw31q1tnh.b[16][0]++;cov_dw31q1tnh.s[41]++;_=0;cov_dw31q1tnh.s[42]++;continue;}else{cov_dw31q1tnh.b[16][1]++;}cov_dw31q1tnh.s[43]++;if((cov_dw31q1tnh.b[20][0]++,op[0]===3)&&((cov_dw31q1tnh.b[20][1]++,!t)||(cov_dw31q1tnh.b[20][2]++,op[1]>t[0])&&(cov_dw31q1tnh.b[20][3]++,op[1]<t[3]))){cov_dw31q1tnh.b[19][0]++;cov_dw31q1tnh.s[44]++;_.label=op[1];cov_dw31q1tnh.s[45]++;break;}else{cov_dw31q1tnh.b[19][1]++;}cov_dw31q1tnh.s[46]++;if((cov_dw31q1tnh.b[22][0]++,op[0]===6)&&(cov_dw31q1tnh.b[22][1]++,_.label<t[1])){cov_dw31q1tnh.b[21][0]++;cov_dw31q1tnh.s[47]++;_.label=t[1];cov_dw31q1tnh.s[48]++;t=op;cov_dw31q1tnh.s[49]++;break;}else{cov_dw31q1tnh.b[21][1]++;}cov_dw31q1tnh.s[50]++;if((cov_dw31q1tnh.b[24][0]++,t)&&(cov_dw31q1tnh.b[24][1]++,_.label<t[2])){cov_dw31q1tnh.b[23][0]++;cov_dw31q1tnh.s[51]++;_.label=t[2];cov_dw31q1tnh.s[52]++;_.ops.push(op);cov_dw31q1tnh.s[53]++;break;}else{cov_dw31q1tnh.b[23][1]++;}cov_dw31q1tnh.s[54]++;if(t[2]){cov_dw31q1tnh.b[25][0]++;cov_dw31q1tnh.s[55]++;_.ops.pop();}else{cov_dw31q1tnh.b[25][1]++;}cov_dw31q1tnh.s[56]++;_.trys.pop();cov_dw31q1tnh.s[57]++;continue;}cov_dw31q1tnh.s[58]++;op=body.call(thisArg,_);}catch(e){cov_dw31q1tnh.s[59]++;op=[6,e];cov_dw31q1tnh.s[60]++;y=0;}finally{cov_dw31q1tnh.s[61]++;f=t=0;}}cov_dw31q1tnh.s[62]++;if(op[0]&5){cov_dw31q1tnh.b[26][0]++;cov_dw31q1tnh.s[63]++;throw op[1];}else{cov_dw31q1tnh.b[26][1]++;}cov_dw31q1tnh.s[64]++;return{value:op[0]?(cov_dw31q1tnh.b[27][0]++,op[1]):(cov_dw31q1tnh.b[27][1]++,void 0),done:true};}}));cov_dw31q1tnh.s[65]++;Object.defineProperty(exports,"__esModule",{value:true});var common_1=(cov_dw31q1tnh.s[66]++,__webpack_require__(/*! ./utils/common */ "./utils/common.ts"));var HttpWatcher=(cov_dw31q1tnh.s[67]++,function(){cov_dw31q1tnh.f[12]++;function HttpWatcher(base,blockInterval,watchList){cov_dw31q1tnh.f[13]++;cov_dw31q1tnh.s[68]++;this.base=base;cov_dw31q1tnh.s[69]++;this.blockInterval=blockInterval;cov_dw31q1tnh.s[70]++;this.watchList=watchList;cov_dw31q1tnh.s[71]++;this.enabled=true;}cov_dw31q1tnh.s[72]++;HttpWatcher.prototype.processEvent=function(fromBlockNumber,toBlockNumber,contract,eventName,eventSetting){cov_dw31q1tnh.f[14]++;cov_dw31q1tnh.s[73]++;return __awaiter(this,void 0,void 0,function(){cov_dw31q1tnh.f[15]++;var events,_i,events_1,event_1;cov_dw31q1tnh.s[74]++;return __generator(this,function(_a){cov_dw31q1tnh.f[16]++;cov_dw31q1tnh.s[75]++;switch(_a.label){case 0:cov_dw31q1tnh.b[28][0]++;cov_dw31q1tnh.s[76]++;return[4,contract.getPastEvents(eventName,{filter:eventSetting.filter(),fromBlock:fromBlockNumber,toBlock:toBlockNumber})];case 1:cov_dw31q1tnh.b[28][1]++;cov_dw31q1tnh.s[77]++;events=_a.sent();cov_dw31q1tnh.s[78]++;_i=0,events_1=events;cov_dw31q1tnh.s[79]++;_a.label=2;case 2:cov_dw31q1tnh.b[28][2]++;cov_dw31q1tnh.s[80]++;if(!(_i<events_1.length)){cov_dw31q1tnh.b[29][0]++;cov_dw31q1tnh.s[81]++;return[3,5];}else{cov_dw31q1tnh.b[29][1]++;}cov_dw31q1tnh.s[82]++;event_1=events_1[_i];cov_dw31q1tnh.s[83]++;return[4,eventSetting.handler(event_1)];case 3:cov_dw31q1tnh.b[28][3]++;cov_dw31q1tnh.s[84]++;_a.sent();cov_dw31q1tnh.s[85]++;_a.label=4;case 4:cov_dw31q1tnh.b[28][4]++;cov_dw31q1tnh.s[86]++;_i++;cov_dw31q1tnh.s[87]++;return[3,2];case 5:cov_dw31q1tnh.b[28][5]++;cov_dw31q1tnh.s[88]++;return[2];}});});};cov_dw31q1tnh.s[89]++;HttpWatcher.prototype.processAllEvent=function(fromBlockNumber,toBlockNumber,watchItem){cov_dw31q1tnh.f[17]++;cov_dw31q1tnh.s[90]++;return __awaiter(this,void 0,void 0,function(){cov_dw31q1tnh.f[18]++;var events,_i,events_2,event_2,eventName,returnValues,filter,filterResult,k;cov_dw31q1tnh.s[91]++;return __generator(this,function(_a){cov_dw31q1tnh.f[19]++;cov_dw31q1tnh.s[92]++;switch(_a.label){case 0:cov_dw31q1tnh.b[30][0]++;cov_dw31q1tnh.s[93]++;return[4,watchItem.contract.getPastEvents('allEvents',{filter:{},fromBlock:fromBlockNumber,toBlock:toBlockNumber})];case 1:cov_dw31q1tnh.b[30][1]++;cov_dw31q1tnh.s[94]++;events=_a.sent();cov_dw31q1tnh.s[95]++;for(_i=0,events_2=events;_i<events_2.length;_i++){cov_dw31q1tnh.s[96]++;event_2=events_2[_i];cov_dw31q1tnh.s[97]++;eventName=event_2.event,returnValues=event_2.returnValues;cov_dw31q1tnh.s[98]++;if(watchItem.listener[eventName]){cov_dw31q1tnh.b[31][0]++;cov_dw31q1tnh.s[99]++;filter=watchItem.listener[eventName].filter();cov_dw31q1tnh.s[100]++;filterResult=true;cov_dw31q1tnh.s[101]++;for(k in filter){cov_dw31q1tnh.s[102]++;if((cov_dw31q1tnh.b[33][0]++,!returnValues[k])||(cov_dw31q1tnh.b[33][1]++,returnValues[k].toLowerCase()!==filter[k].toLowerCase())){cov_dw31q1tnh.b[32][0]++;cov_dw31q1tnh.s[103]++;filterResult=false;cov_dw31q1tnh.s[104]++;break;}else{cov_dw31q1tnh.b[32][1]++;}}cov_dw31q1tnh.s[105]++;if(filterResult){cov_dw31q1tnh.b[34][0]++;cov_dw31q1tnh.s[106]++;watchItem.listener[eventName].handler(event_2);}else{cov_dw31q1tnh.b[34][1]++;}}else{cov_dw31q1tnh.b[31][1]++;}}cov_dw31q1tnh.s[107]++;return[2];}});});};cov_dw31q1tnh.s[108]++;HttpWatcher.prototype.start=function(lastBlockNumber){cov_dw31q1tnh.f[20]++;cov_dw31q1tnh.s[109]++;if(lastBlockNumber===void 0){cov_dw31q1tnh.b[35][0]++;cov_dw31q1tnh.s[110]++;lastBlockNumber=0;}else{cov_dw31q1tnh.b[35][1]++;}cov_dw31q1tnh.s[111]++;return __awaiter(this,void 0,void 0,function(){cov_dw31q1tnh.f[21]++;var currentBlockNumber,_i,_a,watchItem,_b,_c,watchItem,err_1;cov_dw31q1tnh.s[112]++;return __generator(this,function(_d){cov_dw31q1tnh.f[22]++;cov_dw31q1tnh.s[113]++;switch(_d.label){case 0:cov_dw31q1tnh.b[36][0]++;cov_dw31q1tnh.s[114]++;return[4,this.base.getBlockNumber()];case 1:cov_dw31q1tnh.b[36][1]++;cov_dw31q1tnh.s[115]++;currentBlockNumber=_d.sent();cov_dw31q1tnh.s[116]++;lastBlockNumber=(cov_dw31q1tnh.b[37][0]++,lastBlockNumber)||(cov_dw31q1tnh.b[37][1]++,currentBlockNumber-1);cov_dw31q1tnh.s[117]++;console.log('start syncing process',lastBlockNumber,currentBlockNumber);cov_dw31q1tnh.s[118]++;_d.label=2;case 2:cov_dw31q1tnh.b[36][2]++;cov_dw31q1tnh.s[119]++;if(!(lastBlockNumber<=currentBlockNumber)){cov_dw31q1tnh.b[38][0]++;cov_dw31q1tnh.s[120]++;return[3,8];}else{cov_dw31q1tnh.b[38][1]++;}cov_dw31q1tnh.s[121]++;_i=0,_a=this.watchList;cov_dw31q1tnh.s[122]++;_d.label=3;case 3:cov_dw31q1tnh.b[36][3]++;cov_dw31q1tnh.s[123]++;if(!(_i<_a.length)){cov_dw31q1tnh.b[39][0]++;cov_dw31q1tnh.s[124]++;return[3,6];}else{cov_dw31q1tnh.b[39][1]++;}cov_dw31q1tnh.s[125]++;watchItem=_a[_i];cov_dw31q1tnh.s[126]++;return[4,this.processAllEvent(lastBlockNumber,currentBlockNumber,watchItem)];case 4:cov_dw31q1tnh.b[36][4]++;cov_dw31q1tnh.s[127]++;_d.sent();cov_dw31q1tnh.s[128]++;if(this.enabled===false){cov_dw31q1tnh.b[40][0]++;cov_dw31q1tnh.s[129]++;return[2];}else{cov_dw31q1tnh.b[40][1]++;}cov_dw31q1tnh.s[130]++;_d.label=5;case 5:cov_dw31q1tnh.b[36][5]++;cov_dw31q1tnh.s[131]++;_i++;cov_dw31q1tnh.s[132]++;return[3,3];case 6:cov_dw31q1tnh.b[36][6]++;cov_dw31q1tnh.s[133]++;lastBlockNumber=currentBlockNumber+1;cov_dw31q1tnh.s[134]++;return[4,this.base.getBlockNumber()];case 7:cov_dw31q1tnh.b[36][7]++;cov_dw31q1tnh.s[135]++;currentBlockNumber=_d.sent();cov_dw31q1tnh.s[136]++;return[3,2];case 8:cov_dw31q1tnh.b[36][8]++;cov_dw31q1tnh.s[137]++;console.log('finish syncing process',currentBlockNumber);cov_dw31q1tnh.s[138]++;_d.label=9;case 9:cov_dw31q1tnh.b[36][9]++;cov_dw31q1tnh.s[139]++;if(false){}else{cov_dw31q1tnh.b[41][1]++;}cov_dw31q1tnh.s[141]++;return[4,common_1.delay(this.blockInterval)];case 10:cov_dw31q1tnh.b[36][10]++;cov_dw31q1tnh.s[142]++;_d.sent();cov_dw31q1tnh.s[143]++;_d.label=11;case 11:cov_dw31q1tnh.b[36][11]++;cov_dw31q1tnh.s[144]++;_d.trys.push([11,17,,18]);cov_dw31q1tnh.s[145]++;lastBlockNumber=currentBlockNumber+1;cov_dw31q1tnh.s[146]++;return[4,this.base.getBlockNumber()];case 12:cov_dw31q1tnh.b[36][12]++;cov_dw31q1tnh.s[147]++;currentBlockNumber=_d.sent();cov_dw31q1tnh.s[148]++;if(lastBlockNumber>currentBlockNumber){cov_dw31q1tnh.b[42][0]++;cov_dw31q1tnh.s[149]++;return[3,9];}else{cov_dw31q1tnh.b[42][1]++;}cov_dw31q1tnh.s[150]++;_b=0,_c=this.watchList;cov_dw31q1tnh.s[151]++;_d.label=13;case 13:cov_dw31q1tnh.b[36][13]++;cov_dw31q1tnh.s[152]++;if(!(_b<_c.length)){cov_dw31q1tnh.b[43][0]++;cov_dw31q1tnh.s[153]++;return[3,16];}else{cov_dw31q1tnh.b[43][1]++;}cov_dw31q1tnh.s[154]++;watchItem=_c[_b];cov_dw31q1tnh.s[155]++;return[4,this.processAllEvent(lastBlockNumber,currentBlockNumber,watchItem)];case 14:cov_dw31q1tnh.b[36][14]++;cov_dw31q1tnh.s[156]++;_d.sent();cov_dw31q1tnh.s[157]++;if(this.enabled===false){cov_dw31q1tnh.b[44][0]++;cov_dw31q1tnh.s[158]++;return[2];}else{cov_dw31q1tnh.b[44][1]++;}cov_dw31q1tnh.s[159]++;_d.label=15;case 15:cov_dw31q1tnh.b[36][15]++;cov_dw31q1tnh.s[160]++;_b++;cov_dw31q1tnh.s[161]++;return[3,13];case 16:cov_dw31q1tnh.b[36][16]++;cov_dw31q1tnh.s[162]++;return[3,18];case 17:cov_dw31q1tnh.b[36][17]++;cov_dw31q1tnh.s[163]++;err_1=_d.sent();cov_dw31q1tnh.s[164]++;console.error('watch error:',err_1);cov_dw31q1tnh.s[165]++;return[3,18];case 18:cov_dw31q1tnh.b[36][18]++;cov_dw31q1tnh.s[166]++;return[3,9];case 19:cov_dw31q1tnh.b[36][19]++;cov_dw31q1tnh.s[167]++;return[2];}});});};cov_dw31q1tnh.s[168]++;HttpWatcher.prototype.stop=function(){cov_dw31q1tnh.f[23]++;cov_dw31q1tnh.s[169]++;return __awaiter(this,void 0,void 0,function(){cov_dw31q1tnh.f[24]++;cov_dw31q1tnh.s[170]++;return __generator(this,function(_a){cov_dw31q1tnh.f[25]++;cov_dw31q1tnh.s[171]++;this.enabled=false;cov_dw31q1tnh.s[172]++;return[2];});});};cov_dw31q1tnh.s[173]++;return HttpWatcher;}());cov_dw31q1tnh.s[174]++;exports.default=HttpWatcher;

/***/ }),

/***/ "./index.ts":
/*!******************!*\
  !*** ./index.ts ***!
  \******************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var cov_26bv7ogddf=function(){var path="/Users/zhang/work/DigiCash/l2app/l2.js/src/index.ts",hash="5148c1bd893cdf2aacfc6205d63abbed4ed4014e",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/zhang/work/DigiCash/l2app/l2.js/src/index.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:13},end:{line:3,column:30}},"2":{start:{line:4,column:0},end:{line:4,column:28}}},fnMap:{},branchMap:{},s:{"0":0,"1":0,"2":0},f:{},b:{},inputSourceMap:{version:3,file:"/Users/zhang/work/DigiCash/l2app/l2.js/src/index.ts",sourceRoot:"/Users/zhang/work/DigiCash/l2app/l2.js/",sources:["node_modules/source-map-loader/index.js!/Users/zhang/work/DigiCash/l2app/l2.js/src/index.ts"],names:[],mappings:";;AAAA,+BAA4B;AAC5B,kBAAe,SAAE,CAAC",sourcesContent:["import { L2 } from './main';\nexport default L2;\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_26bv7ogddf.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var main_1=(cov_26bv7ogddf.s[1]++,__webpack_require__(/*! ./main */ "./main.ts"));cov_26bv7ogddf.s[2]++;exports.default=main_1.L2;

/***/ }),

/***/ "./main.ts":
/*!*****************!*\
  !*** ./main.ts ***!
  \*****************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var cov_2pu8zsw70e=function(){var path="/Users/zhang/work/DigiCash/l2app/l2.js/src/main.ts",hash="2008e8c332897327bd0ab8b81e80c2a0bd96abf5",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/zhang/work/DigiCash/l2app/l2.js/src/main.ts",statementMap:{"0":{start:{line:2,column:15},end:{line:12,column:1}},"1":{start:{line:3,column:4},end:{line:10,column:6}},"2":{start:{line:4,column:8},end:{line:8,column:9}},"3":{start:{line:5,column:12},end:{line:5,column:29}},"4":{start:{line:6,column:12},end:{line:7,column:28}},"5":{start:{line:6,column:29},end:{line:7,column:28}},"6":{start:{line:7,column:16},end:{line:7,column:28}},"7":{start:{line:9,column:8},end:{line:9,column:17}},"8":{start:{line:11,column:4},end:{line:11,column:43}},"9":{start:{line:13,column:16},end:{line:20,column:1}},"10":{start:{line:14,column:4},end:{line:19,column:7}},"11":{start:{line:15,column:36},end:{line:15,column:97}},"12":{start:{line:15,column:42},end:{line:15,column:70}},"13":{start:{line:15,column:85},end:{line:15,column:95}},"14":{start:{line:16,column:35},end:{line:16,column:100}},"15":{start:{line:16,column:41},end:{line:16,column:73}},"16":{start:{line:16,column:88},end:{line:16,column:98}},"17":{start:{line:17,column:32},end:{line:17,column:149}},"18":{start:{line:17,column:97},end:{line:17,column:119}},"19":{start:{line:18,column:8},end:{line:18,column:78}},"20":{start:{line:21,column:18},end:{line:47,column:1}},"21":{start:{line:22,column:12},end:{line:22,column:104}},"22":{start:{line:22,column:43},end:{line:22,column:68}},"23":{start:{line:22,column:57},end:{line:22,column:68}},"24":{start:{line:22,column:69},end:{line:22,column:81}},"25":{start:{line:23,column:4},end:{line:23,column:157}},"26":{start:{line:23,column:138},end:{line:23,column:150}},"27":{start:{line:24,column:23},end:{line:24,column:68}},"28":{start:{line:24,column:45},end:{line:24,column:65}},"29":{start:{line:26,column:8},end:{line:26,column:70}},"30":{start:{line:26,column:15},end:{line:26,column:70}},"31":{start:{line:27,column:8},end:{line:44,column:66}},"32":{start:{line:27,column:18},end:{line:44,column:66}},"33":{start:{line:28,column:12},end:{line:28,column:169}},"34":{start:{line:28,column:160},end:{line:28,column:169}},"35":{start:{line:29,column:12},end:{line:29,column:52}},"36":{start:{line:29,column:26},end:{line:29,column:52}},"37":{start:{line:30,column:12},end:{line:42,column:13}},"38":{start:{line:31,column:32},end:{line:31,column:39}},"39":{start:{line:31,column:40},end:{line:31,column:46}},"40":{start:{line:32,column:24},end:{line:32,column:34}},"41":{start:{line:32,column:35},end:{line:32,column:72}},"42":{start:{line:33,column:24},end:{line:33,column:34}},"43":{start:{line:33,column:35},end:{line:33,column:45}},"44":{start:{line:33,column:46},end:{line:33,column:55}},"45":{start:{line:33,column:56},end:{line:33,column:65}},"46":{start:{line:34,column:24},end:{line:34,column:41}},"47":{start:{line:34,column:42},end:{line:34,column:55}},"48":{start:{line:34,column:56},end:{line:34,column:65}},"49":{start:{line:36,column:20},end:{line:36,column:128}},"50":{start:{line:36,column:110},end:{line:36,column:116}},"51":{start:{line:36,column:117},end:{line:36,column:126}},"52":{start:{line:37,column:20},end:{line:37,column:106}},"53":{start:{line:37,column:81},end:{line:37,column:97}},"54":{start:{line:37,column:98},end:{line:37,column:104}},"55":{start:{line:38,column:20},end:{line:38,column:89}},"56":{start:{line:38,column:57},end:{line:38,column:72}},"57":{start:{line:38,column:73},end:{line:38,column:80}},"58":{start:{line:38,column:81},end:{line:38,column:87}},"59":{start:{line:39,column:20},end:{line:39,column:87}},"60":{start:{line:39,column:47},end:{line:39,column:62}},"61":{start:{line:39,column:63},end:{line:39,column:78}},"62":{start:{line:39,column:79},end:{line:39,column:85}},"63":{start:{line:40,column:20},end:{line:40,column:42}},"64":{start:{line:40,column:30},end:{line:40,column:42}},"65":{start:{line:41,column:20},end:{line:41,column:33}},"66":{start:{line:41,column:34},end:{line:41,column:43}},"67":{start:{line:43,column:12},end:{line:43,column:39}},"68":{start:{line:44,column:22},end:{line:44,column:34}},"69":{start:{line:44,column:35},end:{line:44,column:41}},"70":{start:{line:44,column:54},end:{line:44,column:64}},"71":{start:{line:45,column:8},end:{line:45,column:35}},"72":{start:{line:45,column:23},end:{line:45,column:35}},"73":{start:{line:45,column:36},end:{line:45,column:89}},"74":{start:{line:48,column:13},end:{line:56,column:1}},"75":{start:{line:49,column:12},end:{line:49,column:14}},"76":{start:{line:50,column:4},end:{line:51,column:20}},"77":{start:{line:50,column:21},end:{line:51,column:20}},"78":{start:{line:51,column:8},end:{line:51,column:20}},"79":{start:{line:52,column:4},end:{line:54,column:30}},"80":{start:{line:53,column:8},end:{line:54,column:30}},"81":{start:{line:53,column:80},end:{line:54,column:30}},"82":{start:{line:54,column:12},end:{line:54,column:30}},"83":{start:{line:55,column:4},end:{line:55,column:13}},"84":{start:{line:57,column:0},end:{line:57,column:62}},"85":{start:{line:58,column:26},end:{line:58,column:72}},"86":{start:{line:59,column:17},end:{line:59,column:46}},"87":{start:{line:60,column:11},end:{line:60,column:26}},"88":{start:{line:61,column:15},end:{line:61,column:34}},"89":{start:{line:62,column:20},end:{line:62,column:44}},"90":{start:{line:63,column:18},end:{line:63,column:46}},"91":{start:{line:64,column:13},end:{line:64,column:38}},"92":{start:{line:65,column:16},end:{line:65,column:44}},"93":{start:{line:66,column:15},end:{line:66,column:40}},"94":{start:{line:67,column:16},end:{line:67,column:36}},"95":{start:{line:68,column:10},end:{line:628,column:3}},"96":{start:{line:71,column:4},end:{line:77,column:6}},"97":{start:{line:72,column:8},end:{line:75,column:9}},"98":{start:{line:73,column:12},end:{line:73,column:38}},"99":{start:{line:74,column:12},end:{line:74,column:42}},"100":{start:{line:76,column:8},end:{line:76,column:30}},"101":{start:{line:78,column:4},end:{line:129,column:6}},"102":{start:{line:79,column:8},end:{line:128,column:11}},"103":{start:{line:81,column:12},end:{line:127,column:15}},"104":{start:{line:82,column:16},end:{line:126,column:17}},"105":{start:{line:84,column:24},end:{line:87,column:26}},"106":{start:{line:88,column:24},end:{line:91,column:26}},"107":{start:{line:92,column:24},end:{line:95,column:26}},"108":{start:{line:96,column:24},end:{line:96,column:273}},"109":{start:{line:97,column:24},end:{line:97,column:55}},"110":{start:{line:98,column:24},end:{line:98,column:61}},"111":{start:{line:99,column:24},end:{line:99,column:61}},"112":{start:{line:100,column:24},end:{line:100,column:126}},"113":{start:{line:101,column:24},end:{line:101,column:117}},"114":{start:{line:102,column:24},end:{line:102,column:66}},"115":{start:{line:103,column:24},end:{line:103,column:74}},"116":{start:{line:104,column:24},end:{line:104,column:110}},"117":{start:{line:105,column:24},end:{line:105,column:93}},"118":{start:{line:106,column:24},end:{line:106,column:51}},"119":{start:{line:107,column:24},end:{line:107,column:76}},"120":{start:{line:109,column:24},end:{line:109,column:47}},"121":{start:{line:110,column:24},end:{line:110,column:77}},"122":{start:{line:112,column:24},end:{line:112,column:47}},"123":{start:{line:113,column:24},end:{line:113,column:75}},"124":{start:{line:114,column:24},end:{line:114,column:69}},"125":{start:{line:115,column:24},end:{line:115,column:105}},"126":{start:{line:116,column:24},end:{line:116,column:74}},"127":{start:{line:117,column:24},end:{line:117,column:120}},"128":{start:{line:118,column:24},end:{line:118,column:54}},"129":{start:{line:120,column:24},end:{line:120,column:34}},"130":{start:{line:121,column:24},end:{line:121,column:45}},"131":{start:{line:122,column:24},end:{line:122,column:48}},"132":{start:{line:123,column:24},end:{line:123,column:48}},"133":{start:{line:124,column:24},end:{line:124,column:54}},"134":{start:{line:125,column:24},end:{line:125,column:41}},"135":{start:{line:130,column:4},end:{line:196,column:6}},"136":{start:{line:131,column:8},end:{line:131,column:67}},"137":{start:{line:131,column:32},end:{line:131,column:65}},"138":{start:{line:132,column:8},end:{line:195,column:11}},"139":{start:{line:134,column:12},end:{line:194,column:15}},"140":{start:{line:135,column:16},end:{line:193,column:17}},"141":{start:{line:137,column:24},end:{line:137,column:48}},"142":{start:{line:138,column:24},end:{line:138,column:112}},"143":{start:{line:139,column:24},end:{line:141,column:25}},"144":{start:{line:140,column:28},end:{line:140,column:93}},"145":{start:{line:142,column:24},end:{line:142,column:99}},"146":{start:{line:144,column:24},end:{line:144,column:46}},"147":{start:{line:145,column:24},end:{line:145,column:85}},"148":{start:{line:147,column:24},end:{line:147,column:44}},"149":{start:{line:148,column:24},end:{line:148,column:79}},"150":{start:{line:149,column:24},end:{line:149,column:69}},"151":{start:{line:150,column:24},end:{line:150,column:120}},"152":{start:{line:150,column:106},end:{line:150,column:120}},"153":{start:{line:151,column:24},end:{line:151,column:87}},"154":{start:{line:153,column:24},end:{line:153,column:47}},"155":{start:{line:154,column:24},end:{line:157,column:25}},"156":{start:{line:155,column:28},end:{line:155,column:66}},"157":{start:{line:156,column:28},end:{line:156,column:86}},"158":{start:{line:158,column:24},end:{line:158,column:96}},"159":{start:{line:159,column:24},end:{line:159,column:81}},"160":{start:{line:159,column:67},end:{line:159,column:81}},"161":{start:{line:160,column:24},end:{line:160,column:117}},"162":{start:{line:161,column:28},end:{line:161,column:50}},"163":{start:{line:163,column:24},end:{line:165,column:41}},"164":{start:{line:166,column:24},end:{line:166,column:112}},"165":{start:{line:168,column:24},end:{line:168,column:34}},"166":{start:{line:169,column:24},end:{line:169,column:112}},"167":{start:{line:170,column:28},end:{line:170,column:50}},"168":{start:{line:171,column:28},end:{line:171,column:43}},"169":{start:{line:173,column:24},end:{line:173,column:121}},"170":{start:{line:173,column:106},end:{line:173,column:121}},"171":{start:{line:174,column:24},end:{line:174,column:67}},"172":{start:{line:175,column:24},end:{line:177,column:41}},"173":{start:{line:178,column:24},end:{line:178,column:82}},"174":{start:{line:178,column:67},end:{line:178,column:82}},"175":{start:{line:179,column:24},end:{line:179,column:117}},"176":{start:{line:180,column:29},end:{line:180,column:51}},"177":{start:{line:182,column:24},end:{line:184,column:41}},"178":{start:{line:185,column:24},end:{line:185,column:112}},"179":{start:{line:187,column:24},end:{line:187,column:34}},"180":{start:{line:188,column:24},end:{line:188,column:112}},"181":{start:{line:189,column:29},end:{line:189,column:51}},"182":{start:{line:190,column:29},end:{line:190,column:44}},"183":{start:{line:191,column:29},end:{line:191,column:105}},"184":{start:{line:192,column:29},end:{line:192,column:40}},"185":{start:{line:197,column:4},end:{line:251,column:6}},"186":{start:{line:198,column:8},end:{line:198,column:67}},"187":{start:{line:198,column:32},end:{line:198,column:65}},"188":{start:{line:199,column:8},end:{line:199,column:61}},"189":{start:{line:199,column:35},end:{line:199,column:59}},"190":{start:{line:200,column:8},end:{line:250,column:11}},"191":{start:{line:202,column:12},end:{line:249,column:15}},"192":{start:{line:203,column:16},end:{line:248,column:17}},"193":{start:{line:205,column:24},end:{line:205,column:48}},"194":{start:{line:206,column:24},end:{line:206,column:114}},"195":{start:{line:207,column:24},end:{line:209,column:25}},"196":{start:{line:208,column:28},end:{line:208,column:93}},"197":{start:{line:210,column:24},end:{line:210,column:79}},"198":{start:{line:211,column:24},end:{line:211,column:99}},"199":{start:{line:213,column:24},end:{line:213,column:46}},"200":{start:{line:214,column:24},end:{line:214,column:87}},"201":{start:{line:216,column:24},end:{line:216,column:44}},"202":{start:{line:217,column:24},end:{line:219,column:25}},"203":{start:{line:218,column:28},end:{line:218,column:83}},"204":{start:{line:220,column:24},end:{line:220,column:131}},"205":{start:{line:220,column:117},end:{line:220,column:131}},"206":{start:{line:221,column:24},end:{line:223,column:25}},"207":{start:{line:222,column:28},end:{line:222,column:74}},"208":{start:{line:224,column:24},end:{line:224,column:64}},"209":{start:{line:225,column:24},end:{line:225,column:48}},"210":{start:{line:226,column:24},end:{line:226,column:78}},"211":{start:{line:227,column:24},end:{line:229,column:42}},"212":{start:{line:230,column:24},end:{line:230,column:80}},"213":{start:{line:231,column:28},end:{line:231,column:97}},"214":{start:{line:232,column:28},end:{line:232,column:50}},"215":{start:{line:234,column:24},end:{line:235,column:104}},"216":{start:{line:235,column:90},end:{line:235,column:104}},"217":{start:{line:236,column:24},end:{line:236,column:71}},"218":{start:{line:237,column:24},end:{line:237,column:92}},"219":{start:{line:238,column:28},end:{line:238,column:50}},"220":{start:{line:240,column:24},end:{line:240,column:77}},"221":{start:{line:241,column:24},end:{line:241,column:48}},"222":{start:{line:242,column:24},end:{line:242,column:83}},"223":{start:{line:243,column:24},end:{line:244,column:36}},"224":{start:{line:245,column:24},end:{line:245,column:80}},"225":{start:{line:246,column:28},end:{line:246,column:97}},"226":{start:{line:247,column:28},end:{line:247,column:50}},"227":{start:{line:252,column:4},end:{line:291,column:6}},"228":{start:{line:253,column:8},end:{line:253,column:67}},"229":{start:{line:253,column:32},end:{line:253,column:65}},"230":{start:{line:254,column:8},end:{line:290,column:11}},"231":{start:{line:256,column:12},end:{line:289,column:15}},"232":{start:{line:257,column:16},end:{line:288,column:17}},"233":{start:{line:259,column:24},end:{line:259,column:48}},"234":{start:{line:260,column:24},end:{line:260,column:91}},"235":{start:{line:261,column:24},end:{line:263,column:25}},"236":{start:{line:262,column:28},end:{line:262,column:93}},"237":{start:{line:264,column:24},end:{line:264,column:99}},"238":{start:{line:266,column:24},end:{line:266,column:46}},"239":{start:{line:267,column:24},end:{line:267,column:85}},"240":{start:{line:269,column:24},end:{line:269,column:44}},"241":{start:{line:270,column:24},end:{line:272,column:25}},"242":{start:{line:271,column:28},end:{line:271,column:102}},"243":{start:{line:273,column:24},end:{line:276,column:32}},"244":{start:{line:278,column:24},end:{line:278,column:300}},"245":{start:{line:279,column:24},end:{line:279,column:69}},"246":{start:{line:280,column:24},end:{line:280,column:73}},"247":{start:{line:281,column:24},end:{line:281,column:71}},"248":{start:{line:282,column:24},end:{line:282,column:351}},"249":{start:{line:283,column:24},end:{line:285,column:41}},"250":{start:{line:286,column:24},end:{line:286,column:129}},"251":{start:{line:287,column:28},end:{line:287,column:50}},"252":{start:{line:292,column:4},end:{line:338,column:6}},"253":{start:{line:293,column:8},end:{line:293,column:67}},"254":{start:{line:293,column:32},end:{line:293,column:65}},"255":{start:{line:294,column:8},end:{line:337,column:11}},"256":{start:{line:296,column:12},end:{line:336,column:15}},"257":{start:{line:297,column:16},end:{line:335,column:17}},"258":{start:{line:299,column:24},end:{line:299,column:48}},"259":{start:{line:300,column:24},end:{line:300,column:127}},"260":{start:{line:301,column:24},end:{line:301,column:93}},"261":{start:{line:302,column:24},end:{line:304,column:25}},"262":{start:{line:303,column:28},end:{line:303,column:93}},"263":{start:{line:305,column:24},end:{line:305,column:99}},"264":{start:{line:307,column:24},end:{line:307,column:46}},"265":{start:{line:308,column:24},end:{line:308,column:87}},"266":{start:{line:310,column:24},end:{line:310,column:44}},"267":{start:{line:311,column:24},end:{line:313,column:25}},"268":{start:{line:312,column:28},end:{line:312,column:100}},"269":{start:{line:314,column:24},end:{line:316,column:25}},"270":{start:{line:315,column:28},end:{line:315,column:91}},"271":{start:{line:317,column:24},end:{line:319,column:41}},"272":{start:{line:321,column:24},end:{line:321,column:79}},"273":{start:{line:322,column:24},end:{line:324,column:40}},"274":{start:{line:325,column:24},end:{line:327,column:40}},"275":{start:{line:328,column:24},end:{line:328,column:47}},"276":{start:{line:329,column:24},end:{line:329,column:181}},"277":{start:{line:331,column:24},end:{line:331,column:46}},"278":{start:{line:332,column:24},end:{line:332,column:61}},"279":{start:{line:333,column:24},end:{line:333,column:145}},"280":{start:{line:334,column:28},end:{line:334,column:50}},"281":{start:{line:339,column:4},end:{line:372,column:6}},"282":{start:{line:340,column:8},end:{line:371,column:11}},"283":{start:{line:342,column:12},end:{line:370,column:15}},"284":{start:{line:343,column:16},end:{line:369,column:17}},"285":{start:{line:345,column:24},end:{line:345,column:48}},"286":{start:{line:346,column:24},end:{line:346,column:41}},"287":{start:{line:347,column:24},end:{line:347,column:30}},"288":{start:{line:348,column:24},end:{line:348,column:37}},"289":{start:{line:350,column:24},end:{line:350,column:62}},"290":{start:{line:350,column:48},end:{line:350,column:62}},"291":{start:{line:351,column:24},end:{line:351,column:80}},"292":{start:{line:353,column:24},end:{line:353,column:44}},"293":{start:{line:354,column:24},end:{line:356,column:25}},"294":{start:{line:355,column:28},end:{line:355,column:42}},"295":{start:{line:357,column:24},end:{line:357,column:57}},"296":{start:{line:359,column:24},end:{line:359,column:34}},"297":{start:{line:360,column:24},end:{line:360,column:37}},"298":{start:{line:362,column:24},end:{line:362,column:28}},"299":{start:{line:363,column:24},end:{line:363,column:38}},"300":{start:{line:365,column:24},end:{line:367,column:25}},"301":{start:{line:366,column:28},end:{line:366,column:65}},"302":{start:{line:368,column:24},end:{line:368,column:44}},"303":{start:{line:373,column:4},end:{line:382,column:6}},"304":{start:{line:374,column:8},end:{line:381,column:11}},"305":{start:{line:375,column:12},end:{line:380,column:15}},"306":{start:{line:376,column:16},end:{line:379,column:17}},"307":{start:{line:377,column:28},end:{line:377,column:84}},"308":{start:{line:378,column:28},end:{line:378,column:50}},"309":{start:{line:383,column:4},end:{line:392,column:6}},"310":{start:{line:384,column:8},end:{line:391,column:11}},"311":{start:{line:385,column:12},end:{line:390,column:15}},"312":{start:{line:386,column:16},end:{line:389,column:17}},"313":{start:{line:387,column:28},end:{line:387,column:92}},"314":{start:{line:388,column:28},end:{line:388,column:50}},"315":{start:{line:393,column:4},end:{line:402,column:6}},"316":{start:{line:394,column:8},end:{line:401,column:11}},"317":{start:{line:395,column:12},end:{line:400,column:15}},"318":{start:{line:396,column:16},end:{line:399,column:17}},"319":{start:{line:397,column:28},end:{line:397,column:91}},"320":{start:{line:398,column:28},end:{line:398,column:50}},"321":{start:{line:403,column:4},end:{line:421,column:6}},"322":{start:{line:404,column:8},end:{line:404,column:67}},"323":{start:{line:404,column:32},end:{line:404,column:65}},"324":{start:{line:405,column:8},end:{line:420,column:11}},"325":{start:{line:407,column:12},end:{line:419,column:15}},"326":{start:{line:408,column:16},end:{line:418,column:17}},"327":{start:{line:410,column:24},end:{line:410,column:48}},"328":{start:{line:411,column:24},end:{line:411,column:99}},"329":{start:{line:413,column:24},end:{line:413,column:46}},"330":{start:{line:414,column:24},end:{line:414,column:87}},"331":{start:{line:416,column:24},end:{line:416,column:44}},"332":{start:{line:417,column:24},end:{line:417,column:56}},"333":{start:{line:422,column:4},end:{line:444,column:6}},"334":{start:{line:423,column:8},end:{line:423,column:67}},"335":{start:{line:423,column:32},end:{line:423,column:65}},"336":{start:{line:424,column:8},end:{line:443,column:11}},"337":{start:{line:426,column:12},end:{line:442,column:15}},"338":{start:{line:427,column:16},end:{line:441,column:17}},"339":{start:{line:429,column:24},end:{line:429,column:48}},"340":{start:{line:430,column:24},end:{line:430,column:99}},"341":{start:{line:432,column:24},end:{line:432,column:46}},"342":{start:{line:433,column:24},end:{line:433,column:85}},"343":{start:{line:435,column:24},end:{line:435,column:47}},"344":{start:{line:436,column:24},end:{line:436,column:76}},"345":{start:{line:437,column:24},end:{line:437,column:87}},"346":{start:{line:439,column:24},end:{line:439,column:44}},"347":{start:{line:440,column:24},end:{line:440,column:80}},"348":{start:{line:445,column:4},end:{line:486,column:6}},"349":{start:{line:446,column:8},end:{line:446,column:67}},"350":{start:{line:446,column:32},end:{line:446,column:65}},"351":{start:{line:447,column:8},end:{line:485,column:11}},"352":{start:{line:449,column:12},end:{line:484,column:15}},"353":{start:{line:450,column:16},end:{line:483,column:17}},"354":{start:{line:452,column:24},end:{line:452,column:48}},"355":{start:{line:453,column:24},end:{line:464,column:32}},"356":{start:{line:466,column:24},end:{line:466,column:70}},"357":{start:{line:467,column:24},end:{line:471,column:26}},"358":{start:{line:468,column:28},end:{line:470,column:30}},"359":{start:{line:469,column:32},end:{line:469,column:55}},"360":{start:{line:472,column:24},end:{line:472,column:68}},"361":{start:{line:473,column:24},end:{line:479,column:26}},"362":{start:{line:474,column:37},end:{line:474,column:52}},"363":{start:{line:474,column:66},end:{line:474,column:78}},"364":{start:{line:474,column:90},end:{line:474,column:100}},"365":{start:{line:474,column:109},end:{line:474,column:145}},"366":{start:{line:475,column:28},end:{line:475,column:78}},"367":{start:{line:476,column:41},end:{line:476,column:76}},"368":{start:{line:477,column:28},end:{line:477,column:50}},"369":{start:{line:478,column:28},end:{line:478,column:94}},"370":{start:{line:480,column:24},end:{line:480,column:103}},"371":{start:{line:480,column:82},end:{line:480,column:99}},"372":{start:{line:481,column:24},end:{line:481,column:105}},"373":{start:{line:481,column:84},end:{line:481,column:101}},"374":{start:{line:482,column:24},end:{line:482,column:63}},"375":{start:{line:487,column:4},end:{line:519,column:6}},"376":{start:{line:488,column:8},end:{line:518,column:11}},"377":{start:{line:490,column:12},end:{line:517,column:15}},"378":{start:{line:491,column:16},end:{line:516,column:17}},"379":{start:{line:493,column:24},end:{line:493,column:48}},"380":{start:{line:494,column:24},end:{line:494,column:40}},"381":{start:{line:495,column:24},end:{line:495,column:30}},"382":{start:{line:496,column:24},end:{line:496,column:37}},"383":{start:{line:498,column:24},end:{line:498,column:49}},"384":{start:{line:498,column:35},end:{line:498,column:49}},"385":{start:{line:499,column:24},end:{line:499,column:37}},"386":{start:{line:501,column:24},end:{line:501,column:50}},"387":{start:{line:502,column:24},end:{line:504,column:41}},"388":{start:{line:506,column:24},end:{line:506,column:77}},"389":{start:{line:507,column:24},end:{line:507,column:80}},"390":{start:{line:508,column:24},end:{line:508,column:38}},"391":{start:{line:510,column:24},end:{line:510,column:42}},"392":{start:{line:511,column:24},end:{line:511,column:38}},"393":{start:{line:512,column:28},end:{line:512,column:42}},"394":{start:{line:514,column:24},end:{line:514,column:48}},"395":{start:{line:515,column:24},end:{line:515,column:47}},"396":{start:{line:520,column:4},end:{line:533,column:6}},"397":{start:{line:521,column:8},end:{line:532,column:11}},"398":{start:{line:523,column:12},end:{line:531,column:15}},"399":{start:{line:524,column:16},end:{line:530,column:17}},"400":{start:{line:526,column:24},end:{line:526,column:48}},"401":{start:{line:527,column:24},end:{line:527,column:87}},"402":{start:{line:528,column:24},end:{line:528,column:129}},"403":{start:{line:529,column:28},end:{line:529,column:50}},"404":{start:{line:534,column:4},end:{line:536,column:6}},"405":{start:{line:535,column:8},end:{line:535,column:47}},"406":{start:{line:537,column:4},end:{line:541,column:6}},"407":{start:{line:538,column:8},end:{line:540,column:9}},"408":{start:{line:539,column:12},end:{line:539,column:53}},"409":{start:{line:542,column:4},end:{line:572,column:6}},"410":{start:{line:543,column:8},end:{line:571,column:11}},"411":{start:{line:545,column:12},end:{line:570,column:15}},"412":{start:{line:546,column:16},end:{line:569,column:17}},"413":{start:{line:548,column:24},end:{line:548,column:76}},"414":{start:{line:549,column:24},end:{line:549,column:59}},"415":{start:{line:549,column:45},end:{line:549,column:59}},"416":{start:{line:550,column:24},end:{line:550,column:66}},"417":{start:{line:551,column:24},end:{line:553,column:41}},"418":{start:{line:555,column:24},end:{line:555,column:49}},"419":{start:{line:556,column:24},end:{line:556,column:66}},"420":{start:{line:557,column:24},end:{line:560,column:25}},"421":{start:{line:558,column:28},end:{line:558,column:60}},"422":{start:{line:559,column:28},end:{line:559,column:39}},"423":{start:{line:561,column:24},end:{line:561,column:37}},"424":{start:{line:563,column:24},end:{line:563,column:79}},"425":{start:{line:564,column:24},end:{line:564,column:112}},"426":{start:{line:565,column:24},end:{line:565,column:129}},"427":{start:{line:567,column:24},end:{line:567,column:34}},"428":{start:{line:568,column:24},end:{line:568,column:35}},"429":{start:{line:573,column:4},end:{line:588,column:6}},"430":{start:{line:574,column:8},end:{line:587,column:11}},"431":{start:{line:576,column:12},end:{line:586,column:15}},"432":{start:{line:577,column:16},end:{line:577,column:58}},"433":{start:{line:578,column:16},end:{line:578,column:58}},"434":{start:{line:579,column:16},end:{line:582,column:18}},"435":{start:{line:583,column:16},end:{line:583,column:99}},"436":{start:{line:584,column:16},end:{line:584,column:40}},"437":{start:{line:585,column:16},end:{line:585,column:27}},"438":{start:{line:589,column:4},end:{line:626,column:6}},"439":{start:{line:590,column:8},end:{line:625,column:11}},"440":{start:{line:592,column:12},end:{line:624,column:15}},"441":{start:{line:593,column:16},end:{line:623,column:17}},"442":{start:{line:595,column:24},end:{line:595,column:62}},"443":{start:{line:596,column:24},end:{line:600,column:32}},"444":{start:{line:602,column:24},end:{line:602,column:58}},"445":{start:{line:603,column:24},end:{line:603,column:101}},"446":{start:{line:604,column:24},end:{line:604,column:80}},"447":{start:{line:605,column:24},end:{line:605,column:37}},"448":{start:{line:607,column:24},end:{line:607,column:82}},"449":{start:{line:607,column:68},end:{line:607,column:82}},"450":{start:{line:608,column:24},end:{line:608,column:62}},"451":{start:{line:609,column:24},end:{line:609,column:60}},"452":{start:{line:610,column:24},end:{line:610,column:59}},"453":{start:{line:611,column:24},end:{line:611,column:85}},"454":{start:{line:613,column:24},end:{line:613,column:44}},"455":{start:{line:614,column:24},end:{line:614,column:120}},"456":{start:{line:614,column:106},end:{line:614,column:120}},"457":{start:{line:615,column:24},end:{line:615,column:99}},"458":{start:{line:617,column:24},end:{line:617,column:34}},"459":{start:{line:618,column:24},end:{line:618,column:37}},"460":{start:{line:620,column:24},end:{line:620,column:29}},"461":{start:{line:621,column:24},end:{line:621,column:38}},"462":{start:{line:622,column:28},end:{line:622,column:39}},"463":{start:{line:627,column:4},end:{line:627,column:14}},"464":{start:{line:629,column:0},end:{line:629,column:16}},"465":{start:{line:630,column:0},end:{line:630,column:21}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:2,column:42},end:{line:2,column:43}},loc:{start:{line:2,column:54},end:{line:12,column:1}},line:2},"1":{name:"(anonymous_1)",decl:{start:{line:3,column:32},end:{line:3,column:33}},loc:{start:{line:3,column:44},end:{line:10,column:5}},line:3},"2":{name:"(anonymous_2)",decl:{start:{line:13,column:44},end:{line:13,column:45}},loc:{start:{line:13,column:89},end:{line:20,column:1}},line:13},"3":{name:"(anonymous_3)",decl:{start:{line:14,column:36},end:{line:14,column:37}},loc:{start:{line:14,column:63},end:{line:19,column:5}},line:14},"4":{name:"fulfilled",decl:{start:{line:15,column:17},end:{line:15,column:26}},loc:{start:{line:15,column:34},end:{line:15,column:99}},line:15},"5":{name:"rejected",decl:{start:{line:16,column:17},end:{line:16,column:25}},loc:{start:{line:16,column:33},end:{line:16,column:102}},line:16},"6":{name:"step",decl:{start:{line:17,column:17},end:{line:17,column:21}},loc:{start:{line:17,column:30},end:{line:17,column:151}},line:17},"7":{name:"(anonymous_7)",decl:{start:{line:17,column:76},end:{line:17,column:77}},loc:{start:{line:17,column:95},end:{line:17,column:121}},line:17},"8":{name:"(anonymous_8)",decl:{start:{line:21,column:48},end:{line:21,column:49}},loc:{start:{line:21,column:73},end:{line:47,column:1}},line:21},"9":{name:"(anonymous_9)",decl:{start:{line:22,column:30},end:{line:22,column:31}},loc:{start:{line:22,column:41},end:{line:22,column:83}},line:22},"10":{name:"(anonymous_10)",decl:{start:{line:23,column:125},end:{line:23,column:126}},loc:{start:{line:23,column:136},end:{line:23,column:152}},line:23},"11":{name:"verb",decl:{start:{line:24,column:13},end:{line:24,column:17}},loc:{start:{line:24,column:21},end:{line:24,column:70}},line:24},"12":{name:"(anonymous_12)",decl:{start:{line:24,column:30},end:{line:24,column:31}},loc:{start:{line:24,column:43},end:{line:24,column:67}},line:24},"13":{name:"step",decl:{start:{line:25,column:13},end:{line:25,column:17}},loc:{start:{line:25,column:22},end:{line:46,column:5}},line:25},"14":{name:"(anonymous_14)",decl:{start:{line:48,column:38},end:{line:48,column:39}},loc:{start:{line:48,column:54},end:{line:56,column:1}},line:48},"15":{name:"(anonymous_15)",decl:{start:{line:68,column:10},end:{line:68,column:11}},loc:{start:{line:68,column:22},end:{line:628,column:1}},line:68},"16":{name:"L2",decl:{start:{line:69,column:13},end:{line:69,column:15}},loc:{start:{line:69,column:18},end:{line:70,column:5}},line:69},"17":{name:"(anonymous_17)",decl:{start:{line:71,column:21},end:{line:71,column:22}},loc:{start:{line:71,column:33},end:{line:77,column:5}},line:71},"18":{name:"(anonymous_18)",decl:{start:{line:78,column:24},end:{line:78,column:25}},loc:{start:{line:78,column:140},end:{line:129,column:5}},line:78},"19":{name:"(anonymous_19)",decl:{start:{line:79,column:47},end:{line:79,column:48}},loc:{start:{line:79,column:59},end:{line:128,column:9}},line:79},"20":{name:"(anonymous_20)",decl:{start:{line:81,column:37},end:{line:81,column:38}},loc:{start:{line:81,column:51},end:{line:127,column:13}},line:81},"21":{name:"(anonymous_21)",decl:{start:{line:130,column:27},end:{line:130,column:28}},loc:{start:{line:130,column:52},end:{line:196,column:5}},line:130},"22":{name:"(anonymous_22)",decl:{start:{line:132,column:47},end:{line:132,column:48}},loc:{start:{line:132,column:59},end:{line:195,column:9}},line:132},"23":{name:"(anonymous_23)",decl:{start:{line:134,column:37},end:{line:134,column:38}},loc:{start:{line:134,column:51},end:{line:194,column:13}},line:134},"24":{name:"(anonymous_24)",decl:{start:{line:197,column:28},end:{line:197,column:29}},loc:{start:{line:197,column:63},end:{line:251,column:5}},line:197},"25":{name:"(anonymous_25)",decl:{start:{line:200,column:47},end:{line:200,column:48}},loc:{start:{line:200,column:59},end:{line:250,column:9}},line:200},"26":{name:"(anonymous_26)",decl:{start:{line:202,column:37},end:{line:202,column:38}},loc:{start:{line:202,column:51},end:{line:249,column:13}},line:202},"27":{name:"(anonymous_27)",decl:{start:{line:252,column:33},end:{line:252,column:34}},loc:{start:{line:252,column:50},end:{line:291,column:5}},line:252},"28":{name:"(anonymous_28)",decl:{start:{line:254,column:47},end:{line:254,column:48}},loc:{start:{line:254,column:59},end:{line:290,column:9}},line:254},"29":{name:"(anonymous_29)",decl:{start:{line:256,column:37},end:{line:256,column:38}},loc:{start:{line:256,column:51},end:{line:289,column:13}},line:256},"30":{name:"(anonymous_30)",decl:{start:{line:292,column:28},end:{line:292,column:29}},loc:{start:{line:292,column:57},end:{line:338,column:5}},line:292},"31":{name:"(anonymous_31)",decl:{start:{line:294,column:47},end:{line:294,column:48}},loc:{start:{line:294,column:59},end:{line:337,column:9}},line:294},"32":{name:"(anonymous_32)",decl:{start:{line:296,column:37},end:{line:296,column:38}},loc:{start:{line:296,column:51},end:{line:336,column:13}},line:296},"33":{name:"(anonymous_33)",decl:{start:{line:339,column:32},end:{line:339,column:33}},loc:{start:{line:339,column:53},end:{line:372,column:5}},line:339},"34":{name:"(anonymous_34)",decl:{start:{line:340,column:47},end:{line:340,column:48}},loc:{start:{line:340,column:59},end:{line:371,column:9}},line:340},"35":{name:"(anonymous_35)",decl:{start:{line:342,column:37},end:{line:342,column:38}},loc:{start:{line:342,column:51},end:{line:370,column:13}},line:342},"36":{name:"(anonymous_36)",decl:{start:{line:373,column:41},end:{line:373,column:42}},loc:{start:{line:373,column:62},end:{line:382,column:5}},line:373},"37":{name:"(anonymous_37)",decl:{start:{line:374,column:47},end:{line:374,column:48}},loc:{start:{line:374,column:59},end:{line:381,column:9}},line:374},"38":{name:"(anonymous_38)",decl:{start:{line:375,column:37},end:{line:375,column:38}},loc:{start:{line:375,column:51},end:{line:380,column:13}},line:375},"39":{name:"(anonymous_39)",decl:{start:{line:383,column:42},end:{line:383,column:43}},loc:{start:{line:383,column:63},end:{line:392,column:5}},line:383},"40":{name:"(anonymous_40)",decl:{start:{line:384,column:47},end:{line:384,column:48}},loc:{start:{line:384,column:59},end:{line:391,column:9}},line:384},"41":{name:"(anonymous_41)",decl:{start:{line:385,column:37},end:{line:385,column:38}},loc:{start:{line:385,column:51},end:{line:390,column:13}},line:385},"42":{name:"(anonymous_42)",decl:{start:{line:393,column:41},end:{line:393,column:42}},loc:{start:{line:393,column:62},end:{line:402,column:5}},line:393},"43":{name:"(anonymous_43)",decl:{start:{line:394,column:47},end:{line:394,column:48}},loc:{start:{line:394,column:59},end:{line:401,column:9}},line:394},"44":{name:"(anonymous_44)",decl:{start:{line:395,column:37},end:{line:395,column:38}},loc:{start:{line:395,column:51},end:{line:400,column:13}},line:395},"45":{name:"(anonymous_45)",decl:{start:{line:403,column:30},end:{line:403,column:31}},loc:{start:{line:403,column:47},end:{line:421,column:5}},line:403},"46":{name:"(anonymous_46)",decl:{start:{line:405,column:47},end:{line:405,column:48}},loc:{start:{line:405,column:59},end:{line:420,column:9}},line:405},"47":{name:"(anonymous_47)",decl:{start:{line:407,column:37},end:{line:407,column:38}},loc:{start:{line:407,column:51},end:{line:419,column:13}},line:407},"48":{name:"(anonymous_48)",decl:{start:{line:422,column:34},end:{line:422,column:35}},loc:{start:{line:422,column:51},end:{line:444,column:5}},line:422},"49":{name:"(anonymous_49)",decl:{start:{line:424,column:47},end:{line:424,column:48}},loc:{start:{line:424,column:59},end:{line:443,column:9}},line:424},"50":{name:"(anonymous_50)",decl:{start:{line:426,column:37},end:{line:426,column:38}},loc:{start:{line:426,column:51},end:{line:442,column:13}},line:426},"51":{name:"(anonymous_51)",decl:{start:{line:445,column:29},end:{line:445,column:30}},loc:{start:{line:445,column:46},end:{line:486,column:5}},line:445},"52":{name:"(anonymous_52)",decl:{start:{line:447,column:47},end:{line:447,column:48}},loc:{start:{line:447,column:59},end:{line:485,column:9}},line:447},"53":{name:"(anonymous_53)",decl:{start:{line:449,column:37},end:{line:449,column:38}},loc:{start:{line:449,column:51},end:{line:484,column:13}},line:449},"54":{name:"(anonymous_54)",decl:{start:{line:467,column:35},end:{line:467,column:36}},loc:{start:{line:467,column:50},end:{line:471,column:25}},line:467},"55":{name:"(anonymous_55)",decl:{start:{line:468,column:35},end:{line:468,column:36}},loc:{start:{line:468,column:51},end:{line:470,column:29}},line:468},"56":{name:"(anonymous_56)",decl:{start:{line:473,column:32},end:{line:473,column:33}},loc:{start:{line:473,column:46},end:{line:479,column:25}},line:473},"57":{name:"(anonymous_57)",decl:{start:{line:480,column:66},end:{line:480,column:67}},loc:{start:{line:480,column:80},end:{line:480,column:101}},line:480},"58":{name:"(anonymous_58)",decl:{start:{line:481,column:68},end:{line:481,column:69}},loc:{start:{line:481,column:82},end:{line:481,column:103}},line:481},"59":{name:"(anonymous_59)",decl:{start:{line:487,column:33},end:{line:487,column:34}},loc:{start:{line:487,column:45},end:{line:519,column:5}},line:487},"60":{name:"(anonymous_60)",decl:{start:{line:488,column:47},end:{line:488,column:48}},loc:{start:{line:488,column:59},end:{line:518,column:9}},line:488},"61":{name:"(anonymous_61)",decl:{start:{line:490,column:37},end:{line:490,column:38}},loc:{start:{line:490,column:51},end:{line:517,column:13}},line:490},"62":{name:"(anonymous_62)",decl:{start:{line:520,column:33},end:{line:520,column:34}},loc:{start:{line:520,column:51},end:{line:533,column:5}},line:520},"63":{name:"(anonymous_63)",decl:{start:{line:521,column:47},end:{line:521,column:48}},loc:{start:{line:521,column:59},end:{line:532,column:9}},line:521},"64":{name:"(anonymous_64)",decl:{start:{line:523,column:37},end:{line:523,column:38}},loc:{start:{line:523,column:51},end:{line:531,column:13}},line:523},"65":{name:"(anonymous_65)",decl:{start:{line:534,column:22},end:{line:534,column:23}},loc:{start:{line:534,column:49},end:{line:536,column:5}},line:534},"66":{name:"(anonymous_66)",decl:{start:{line:537,column:36},end:{line:537,column:37}},loc:{start:{line:537,column:48},end:{line:541,column:5}},line:537},"67":{name:"(anonymous_67)",decl:{start:{line:542,column:30},end:{line:542,column:31}},loc:{start:{line:542,column:42},end:{line:572,column:5}},line:542},"68":{name:"(anonymous_68)",decl:{start:{line:543,column:47},end:{line:543,column:48}},loc:{start:{line:543,column:59},end:{line:571,column:9}},line:543},"69":{name:"(anonymous_69)",decl:{start:{line:545,column:37},end:{line:545,column:38}},loc:{start:{line:545,column:51},end:{line:570,column:13}},line:545},"70":{name:"(anonymous_70)",decl:{start:{line:573,column:33},end:{line:573,column:34}},loc:{start:{line:573,column:45},end:{line:588,column:5}},line:573},"71":{name:"(anonymous_71)",decl:{start:{line:574,column:47},end:{line:574,column:48}},loc:{start:{line:574,column:59},end:{line:587,column:9}},line:574},"72":{name:"(anonymous_72)",decl:{start:{line:576,column:37},end:{line:576,column:38}},loc:{start:{line:576,column:51},end:{line:586,column:13}},line:576},"73":{name:"(anonymous_73)",decl:{start:{line:589,column:36},end:{line:589,column:37}},loc:{start:{line:589,column:48},end:{line:626,column:5}},line:589},"74":{name:"(anonymous_74)",decl:{start:{line:590,column:47},end:{line:590,column:48}},loc:{start:{line:590,column:59},end:{line:625,column:9}},line:590},"75":{name:"(anonymous_75)",decl:{start:{line:592,column:37},end:{line:592,column:38}},loc:{start:{line:592,column:51},end:{line:624,column:13}},line:592}},branchMap:{"0":{loc:{start:{line:2,column:15},end:{line:12,column:1}},type:"binary-expr",locations:[{start:{line:2,column:16},end:{line:2,column:20}},{start:{line:2,column:24},end:{line:2,column:37}},{start:{line:2,column:42},end:{line:12,column:1}}],line:2},"1":{loc:{start:{line:3,column:15},end:{line:10,column:5}},type:"binary-expr",locations:[{start:{line:3,column:15},end:{line:3,column:28}},{start:{line:3,column:32},end:{line:10,column:5}}],line:3},"2":{loc:{start:{line:6,column:29},end:{line:7,column:28}},type:"if",locations:[{start:{line:6,column:29},end:{line:7,column:28}},{start:{line:6,column:29},end:{line:7,column:28}}],line:6},"3":{loc:{start:{line:13,column:16},end:{line:20,column:1}},type:"binary-expr",locations:[{start:{line:13,column:17},end:{line:13,column:21}},{start:{line:13,column:25},end:{line:13,column:39}},{start:{line:13,column:44},end:{line:20,column:1}}],line:13},"4":{loc:{start:{line:14,column:16},end:{line:14,column:34}},type:"binary-expr",locations:[{start:{line:14,column:16},end:{line:14,column:17}},{start:{line:14,column:22},end:{line:14,column:33}}],line:14},"5":{loc:{start:{line:17,column:32},end:{line:17,column:148}},type:"cond-expr",locations:[{start:{line:17,column:46},end:{line:17,column:67}},{start:{line:17,column:70},end:{line:17,column:148}}],line:17},"6":{loc:{start:{line:18,column:51},end:{line:18,column:67}},type:"binary-expr",locations:[{start:{line:18,column:51},end:{line:18,column:61}},{start:{line:18,column:65},end:{line:18,column:67}}],line:18},"7":{loc:{start:{line:21,column:18},end:{line:47,column:1}},type:"binary-expr",locations:[{start:{line:21,column:19},end:{line:21,column:23}},{start:{line:21,column:27},end:{line:21,column:43}},{start:{line:21,column:48},end:{line:47,column:1}}],line:21},"8":{loc:{start:{line:22,column:43},end:{line:22,column:68}},type:"if",locations:[{start:{line:22,column:43},end:{line:22,column:68}},{start:{line:22,column:43},end:{line:22,column:68}}],line:22},"9":{loc:{start:{line:23,column:71},end:{line:23,column:153}},type:"binary-expr",locations:[{start:{line:23,column:71},end:{line:23,column:99}},{start:{line:23,column:104},end:{line:23,column:152}}],line:23},"10":{loc:{start:{line:26,column:8},end:{line:26,column:70}},type:"if",locations:[{start:{line:26,column:8},end:{line:26,column:70}},{start:{line:26,column:8},end:{line:26,column:70}}],line:26},"11":{loc:{start:{line:28,column:12},end:{line:28,column:169}},type:"if",locations:[{start:{line:28,column:12},end:{line:28,column:169}},{start:{line:28,column:12},end:{line:28,column:169}}],line:28},"12":{loc:{start:{line:28,column:23},end:{line:28,column:158}},type:"binary-expr",locations:[{start:{line:28,column:23},end:{line:28,column:24}},{start:{line:28,column:29},end:{line:28,column:125}},{start:{line:28,column:130},end:{line:28,column:158}}],line:28},"13":{loc:{start:{line:28,column:33},end:{line:28,column:125}},type:"cond-expr",locations:[{start:{line:28,column:45},end:{line:28,column:56}},{start:{line:28,column:59},end:{line:28,column:125}}],line:28},"14":{loc:{start:{line:28,column:59},end:{line:28,column:125}},type:"cond-expr",locations:[{start:{line:28,column:67},end:{line:28,column:116}},{start:{line:28,column:119},end:{line:28,column:125}}],line:28},"15":{loc:{start:{line:28,column:67},end:{line:28,column:116}},type:"binary-expr",locations:[{start:{line:28,column:67},end:{line:28,column:77}},{start:{line:28,column:82},end:{line:28,column:115}}],line:28},"16":{loc:{start:{line:28,column:82},end:{line:28,column:112}},type:"binary-expr",locations:[{start:{line:28,column:83},end:{line:28,column:98}},{start:{line:28,column:103},end:{line:28,column:112}}],line:28},"17":{loc:{start:{line:29,column:12},end:{line:29,column:52}},type:"if",locations:[{start:{line:29,column:12},end:{line:29,column:52}},{start:{line:29,column:12},end:{line:29,column:52}}],line:29},"18":{loc:{start:{line:30,column:12},end:{line:42,column:13}},type:"switch",locations:[{start:{line:31,column:16},end:{line:31,column:23}},{start:{line:31,column:24},end:{line:31,column:46}},{start:{line:32,column:16},end:{line:32,column:72}},{start:{line:33,column:16},end:{line:33,column:65}},{start:{line:34,column:16},end:{line:34,column:65}},{start:{line:35,column:16},end:{line:41,column:43}}],line:30},"19":{loc:{start:{line:36,column:20},end:{line:36,column:128}},type:"if",locations:[{start:{line:36,column:20},end:{line:36,column:128}},{start:{line:36,column:20},end:{line:36,column:128}}],line:36},"20":{loc:{start:{line:36,column:24},end:{line:36,column:106}},type:"binary-expr",locations:[{start:{line:36,column:24},end:{line:36,column:74}},{start:{line:36,column:79},end:{line:36,column:90}},{start:{line:36,column:94},end:{line:36,column:105}}],line:36},"21":{loc:{start:{line:36,column:42},end:{line:36,column:73}},type:"binary-expr",locations:[{start:{line:36,column:42},end:{line:36,column:54}},{start:{line:36,column:58},end:{line:36,column:73}}],line:36},"22":{loc:{start:{line:37,column:20},end:{line:37,column:106}},type:"if",locations:[{start:{line:37,column:20},end:{line:37,column:106}},{start:{line:37,column:20},end:{line:37,column:106}}],line:37},"23":{loc:{start:{line:37,column:24},end:{line:37,column:77}},type:"binary-expr",locations:[{start:{line:37,column:24},end:{line:37,column:35}},{start:{line:37,column:40},end:{line:37,column:42}},{start:{line:37,column:47},end:{line:37,column:59}},{start:{line:37,column:63},end:{line:37,column:75}}],line:37},"24":{loc:{start:{line:38,column:20},end:{line:38,column:89}},type:"if",locations:[{start:{line:38,column:20},end:{line:38,column:89}},{start:{line:38,column:20},end:{line:38,column:89}}],line:38},"25":{loc:{start:{line:38,column:24},end:{line:38,column:53}},type:"binary-expr",locations:[{start:{line:38,column:24},end:{line:38,column:35}},{start:{line:38,column:39},end:{line:38,column:53}}],line:38},"26":{loc:{start:{line:39,column:20},end:{line:39,column:87}},type:"if",locations:[{start:{line:39,column:20},end:{line:39,column:87}},{start:{line:39,column:20},end:{line:39,column:87}}],line:39},"27":{loc:{start:{line:39,column:24},end:{line:39,column:43}},type:"binary-expr",locations:[{start:{line:39,column:24},end:{line:39,column:25}},{start:{line:39,column:29},end:{line:39,column:43}}],line:39},"28":{loc:{start:{line:40,column:20},end:{line:40,column:42}},type:"if",locations:[{start:{line:40,column:20},end:{line:40,column:42}},{start:{line:40,column:20},end:{line:40,column:42}}],line:40},"29":{loc:{start:{line:45,column:8},end:{line:45,column:35}},type:"if",locations:[{start:{line:45,column:8},end:{line:45,column:35}},{start:{line:45,column:8},end:{line:45,column:35}}],line:45},"30":{loc:{start:{line:45,column:52},end:{line:45,column:74}},type:"cond-expr",locations:[{start:{line:45,column:60},end:{line:45,column:65}},{start:{line:45,column:68},end:{line:45,column:74}}],line:45},"31":{loc:{start:{line:48,column:13},end:{line:56,column:1}},type:"binary-expr",locations:[{start:{line:48,column:14},end:{line:48,column:18}},{start:{line:48,column:22},end:{line:48,column:33}},{start:{line:48,column:38},end:{line:56,column:1}}],line:48},"32":{loc:{start:{line:50,column:21},end:{line:51,column:20}},type:"if",locations:[{start:{line:50,column:21},end:{line:51,column:20}},{start:{line:50,column:21},end:{line:51,column:20}}],line:50},"33":{loc:{start:{line:50,column:25},end:{line:50,column:87}},type:"binary-expr",locations:[{start:{line:50,column:25},end:{line:50,column:67}},{start:{line:50,column:71},end:{line:50,column:87}}],line:50},"34":{loc:{start:{line:52,column:4},end:{line:54,column:30}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:30}},{start:{line:52,column:4},end:{line:54,column:30}}],line:52},"35":{loc:{start:{line:52,column:8},end:{line:52,column:71}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:17}},{start:{line:52,column:21},end:{line:52,column:71}}],line:52},"36":{loc:{start:{line:53,column:80},end:{line:54,column:30}},type:"if",locations:[{start:{line:53,column:80},end:{line:54,column:30}},{start:{line:53,column:80},end:{line:54,column:30}}],line:53},"37":{loc:{start:{line:72,column:8},end:{line:75,column:9}},type:"if",locations:[{start:{line:72,column:8},end:{line:75,column:9}},{start:{line:72,column:8},end:{line:75,column:9}}],line:72},"38":{loc:{start:{line:82,column:16},end:{line:126,column:17}},type:"switch",locations:[{start:{line:83,column:20},end:{line:107,column:76}},{start:{line:108,column:20},end:{line:110,column:77}},{start:{line:111,column:20},end:{line:118,column:54}},{start:{line:119,column:20},end:{line:125,column:41}}],line:82},"39":{loc:{start:{line:131,column:8},end:{line:131,column:67}},type:"if",locations:[{start:{line:131,column:8},end:{line:131,column:67}},{start:{line:131,column:8},end:{line:131,column:67}}],line:131},"40":{loc:{start:{line:135,column:16},end:{line:193,column:17}},type:"switch",locations:[{start:{line:136,column:20},end:{line:142,column:99}},{start:{line:143,column:20},end:{line:145,column:85}},{start:{line:146,column:20},end:{line:151,column:87}},{start:{line:152,column:20},end:{line:160,column:117}},{start:{line:161,column:20},end:{line:161,column:50}},{start:{line:162,column:20},end:{line:166,column:112}},{start:{line:167,column:20},end:{line:169,column:112}},{start:{line:170,column:20},end:{line:170,column:50}},{start:{line:171,column:20},end:{line:171,column:43}},{start:{line:172,column:20},end:{line:179,column:117}},{start:{line:180,column:20},end:{line:180,column:51}},{start:{line:181,column:20},end:{line:185,column:112}},{start:{line:186,column:20},end:{line:188,column:112}},{start:{line:189,column:20},end:{line:189,column:51}},{start:{line:190,column:20},end:{line:190,column:44}},{start:{line:191,column:20},end:{line:191,column:105}},{start:{line:192,column:20},end:{line:192,column:40}}],line:135},"41":{loc:{start:{line:139,column:24},end:{line:141,column:25}},type:"if",locations:[{start:{line:139,column:24},end:{line:141,column:25}},{start:{line:139,column:24},end:{line:141,column:25}}],line:139},"42":{loc:{start:{line:150,column:24},end:{line:150,column:120}},type:"if",locations:[{start:{line:150,column:24},end:{line:150,column:120}},{start:{line:150,column:24},end:{line:150,column:120}}],line:150},"43":{loc:{start:{line:154,column:24},end:{line:157,column:25}},type:"if",locations:[{start:{line:154,column:24},end:{line:157,column:25}},{start:{line:154,column:24},end:{line:157,column:25}}],line:154},"44":{loc:{start:{line:159,column:24},end:{line:159,column:81}},type:"if",locations:[{start:{line:159,column:24},end:{line:159,column:81}},{start:{line:159,column:24},end:{line:159,column:81}}],line:159},"45":{loc:{start:{line:173,column:24},end:{line:173,column:121}},type:"if",locations:[{start:{line:173,column:24},end:{line:173,column:121}},{start:{line:173,column:24},end:{line:173,column:121}}],line:173},"46":{loc:{start:{line:178,column:24},end:{line:178,column:82}},type:"if",locations:[{start:{line:178,column:24},end:{line:178,column:82}},{start:{line:178,column:24},end:{line:178,column:82}}],line:178},"47":{loc:{start:{line:198,column:8},end:{line:198,column:67}},type:"if",locations:[{start:{line:198,column:8},end:{line:198,column:67}},{start:{line:198,column:8},end:{line:198,column:67}}],line:198},"48":{loc:{start:{line:199,column:8},end:{line:199,column:61}},type:"if",locations:[{start:{line:199,column:8},end:{line:199,column:61}},{start:{line:199,column:8},end:{line:199,column:61}}],line:199},"49":{loc:{start:{line:203,column:16},end:{line:248,column:17}},type:"switch",locations:[{start:{line:204,column:20},end:{line:211,column:99}},{start:{line:212,column:20},end:{line:214,column:87}},{start:{line:215,column:20},end:{line:230,column:80}},{start:{line:231,column:20},end:{line:231,column:97}},{start:{line:232,column:20},end:{line:232,column:50}},{start:{line:233,column:20},end:{line:237,column:92}},{start:{line:238,column:20},end:{line:238,column:50}},{start:{line:239,column:20},end:{line:245,column:80}},{start:{line:246,column:20},end:{line:246,column:97}},{start:{line:247,column:20},end:{line:247,column:50}}],line:203},"50":{loc:{start:{line:207,column:24},end:{line:209,column:25}},type:"if",locations:[{start:{line:207,column:24},end:{line:209,column:25}},{start:{line:207,column:24},end:{line:209,column:25}}],line:207},"51":{loc:{start:{line:217,column:24},end:{line:219,column:25}},type:"if",locations:[{start:{line:217,column:24},end:{line:219,column:25}},{start:{line:217,column:24},end:{line:219,column:25}}],line:217},"52":{loc:{start:{line:220,column:24},end:{line:220,column:131}},type:"if",locations:[{start:{line:220,column:24},end:{line:220,column:131}},{start:{line:220,column:24},end:{line:220,column:131}}],line:220},"53":{loc:{start:{line:221,column:24},end:{line:223,column:25}},type:"if",locations:[{start:{line:221,column:24},end:{line:223,column:25}},{start:{line:221,column:24},end:{line:223,column:25}}],line:221},"54":{loc:{start:{line:234,column:24},end:{line:235,column:104}},type:"if",locations:[{start:{line:234,column:24},end:{line:235,column:104}},{start:{line:234,column:24},end:{line:235,column:104}}],line:234},"55":{loc:{start:{line:253,column:8},end:{line:253,column:67}},type:"if",locations:[{start:{line:253,column:8},end:{line:253,column:67}},{start:{line:253,column:8},end:{line:253,column:67}}],line:253},"56":{loc:{start:{line:257,column:16},end:{line:288,column:17}},type:"switch",locations:[{start:{line:258,column:20},end:{line:264,column:99}},{start:{line:265,column:20},end:{line:267,column:85}},{start:{line:268,column:20},end:{line:276,column:32}},{start:{line:277,column:20},end:{line:286,column:129}},{start:{line:287,column:20},end:{line:287,column:50}}],line:257},"57":{loc:{start:{line:261,column:24},end:{line:263,column:25}},type:"if",locations:[{start:{line:261,column:24},end:{line:263,column:25}},{start:{line:261,column:24},end:{line:263,column:25}}],line:261},"58":{loc:{start:{line:270,column:24},end:{line:272,column:25}},type:"if",locations:[{start:{line:270,column:24},end:{line:272,column:25}},{start:{line:270,column:24},end:{line:272,column:25}}],line:270},"59":{loc:{start:{line:279,column:43},end:{line:279,column:68}},type:"binary-expr",locations:[{start:{line:279,column:43},end:{line:279,column:59}},{start:{line:279,column:63},end:{line:279,column:68}}],line:279},"60":{loc:{start:{line:280,column:45},end:{line:280,column:72}},type:"binary-expr",locations:[{start:{line:280,column:45},end:{line:280,column:63}},{start:{line:280,column:67},end:{line:280,column:72}}],line:280},"61":{loc:{start:{line:281,column:44},end:{line:281,column:70}},type:"binary-expr",locations:[{start:{line:281,column:44},end:{line:281,column:61}},{start:{line:281,column:65},end:{line:281,column:70}}],line:281},"62":{loc:{start:{line:293,column:8},end:{line:293,column:67}},type:"if",locations:[{start:{line:293,column:8},end:{line:293,column:67}},{start:{line:293,column:8},end:{line:293,column:67}}],line:293},"63":{loc:{start:{line:297,column:16},end:{line:335,column:17}},type:"switch",locations:[{start:{line:298,column:20},end:{line:305,column:99}},{start:{line:306,column:20},end:{line:308,column:87}},{start:{line:309,column:20},end:{line:319,column:41}},{start:{line:320,column:20},end:{line:329,column:181}},{start:{line:330,column:20},end:{line:333,column:145}},{start:{line:334,column:20},end:{line:334,column:50}}],line:297},"64":{loc:{start:{line:302,column:24},end:{line:304,column:25}},type:"if",locations:[{start:{line:302,column:24},end:{line:304,column:25}},{start:{line:302,column:24},end:{line:304,column:25}}],line:302},"65":{loc:{start:{line:311,column:24},end:{line:313,column:25}},type:"if",locations:[{start:{line:311,column:24},end:{line:313,column:25}},{start:{line:311,column:24},end:{line:313,column:25}}],line:311},"66":{loc:{start:{line:314,column:24},end:{line:316,column:25}},type:"if",locations:[{start:{line:314,column:24},end:{line:316,column:25}},{start:{line:314,column:24},end:{line:316,column:25}}],line:314},"67":{loc:{start:{line:343,column:16},end:{line:369,column:17}},type:"switch",locations:[{start:{line:344,column:20},end:{line:348,column:37}},{start:{line:349,column:20},end:{line:351,column:80}},{start:{line:352,column:20},end:{line:357,column:57}},{start:{line:358,column:20},end:{line:360,column:37}},{start:{line:361,column:20},end:{line:363,column:38}},{start:{line:364,column:20},end:{line:368,column:44}}],line:343},"68":{loc:{start:{line:350,column:24},end:{line:350,column:62}},type:"if",locations:[{start:{line:350,column:24},end:{line:350,column:62}},{start:{line:350,column:24},end:{line:350,column:62}}],line:350},"69":{loc:{start:{line:354,column:24},end:{line:356,column:25}},type:"if",locations:[{start:{line:354,column:24},end:{line:356,column:25}},{start:{line:354,column:24},end:{line:356,column:25}}],line:354},"70":{loc:{start:{line:365,column:24},end:{line:367,column:25}},type:"if",locations:[{start:{line:365,column:24},end:{line:367,column:25}},{start:{line:365,column:24},end:{line:367,column:25}}],line:365},"71":{loc:{start:{line:376,column:16},end:{line:379,column:17}},type:"switch",locations:[{start:{line:377,column:20},end:{line:377,column:84}},{start:{line:378,column:20},end:{line:378,column:50}}],line:376},"72":{loc:{start:{line:386,column:16},end:{line:389,column:17}},type:"switch",locations:[{start:{line:387,column:20},end:{line:387,column:92}},{start:{line:388,column:20},end:{line:388,column:50}}],line:386},"73":{loc:{start:{line:396,column:16},end:{line:399,column:17}},type:"switch",locations:[{start:{line:397,column:20},end:{line:397,column:91}},{start:{line:398,column:20},end:{line:398,column:50}}],line:396},"74":{loc:{start:{line:404,column:8},end:{line:404,column:67}},type:"if",locations:[{start:{line:404,column:8},end:{line:404,column:67}},{start:{line:404,column:8},end:{line:404,column:67}}],line:404},"75":{loc:{start:{line:408,column:16},end:{line:418,column:17}},type:"switch",locations:[{start:{line:409,column:20},end:{line:411,column:99}},{start:{line:412,column:20},end:{line:414,column:87}},{start:{line:415,column:20},end:{line:417,column:56}}],line:408},"76":{loc:{start:{line:423,column:8},end:{line:423,column:67}},type:"if",locations:[{start:{line:423,column:8},end:{line:423,column:67}},{start:{line:423,column:8},end:{line:423,column:67}}],line:423},"77":{loc:{start:{line:427,column:16},end:{line:441,column:17}},type:"switch",locations:[{start:{line:428,column:20},end:{line:430,column:99}},{start:{line:431,column:20},end:{line:433,column:85}},{start:{line:434,column:20},end:{line:437,column:87}},{start:{line:438,column:20},end:{line:440,column:80}}],line:427},"78":{loc:{start:{line:446,column:8},end:{line:446,column:67}},type:"if",locations:[{start:{line:446,column:8},end:{line:446,column:67}},{start:{line:446,column:8},end:{line:446,column:67}}],line:446},"79":{loc:{start:{line:450,column:16},end:{line:483,column:17}},type:"switch",locations:[{start:{line:451,column:20},end:{line:464,column:32}},{start:{line:465,column:20},end:{line:482,column:63}}],line:450},"80":{loc:{start:{line:491,column:16},end:{line:516,column:17}},type:"switch",locations:[{start:{line:492,column:20},end:{line:496,column:37}},{start:{line:497,column:20},end:{line:499,column:37}},{start:{line:500,column:20},end:{line:504,column:41}},{start:{line:505,column:20},end:{line:508,column:38}},{start:{line:509,column:20},end:{line:511,column:38}},{start:{line:512,column:20},end:{line:512,column:42}},{start:{line:513,column:20},end:{line:515,column:47}}],line:491},"81":{loc:{start:{line:498,column:24},end:{line:498,column:49}},type:"if",locations:[{start:{line:498,column:24},end:{line:498,column:49}},{start:{line:498,column:24},end:{line:498,column:49}}],line:498},"82":{loc:{start:{line:524,column:16},end:{line:530,column:17}},type:"switch",locations:[{start:{line:525,column:20},end:{line:528,column:129}},{start:{line:529,column:20},end:{line:529,column:50}}],line:524},"83":{loc:{start:{line:538,column:8},end:{line:540,column:9}},type:"if",locations:[{start:{line:538,column:8},end:{line:540,column:9}},{start:{line:538,column:8},end:{line:540,column:9}}],line:538},"84":{loc:{start:{line:546,column:16},end:{line:569,column:17}},type:"switch",locations:[{start:{line:547,column:20},end:{line:553,column:41}},{start:{line:554,column:20},end:{line:561,column:37}},{start:{line:562,column:20},end:{line:565,column:129}},{start:{line:566,column:20},end:{line:568,column:35}}],line:546},"85":{loc:{start:{line:549,column:24},end:{line:549,column:59}},type:"if",locations:[{start:{line:549,column:24},end:{line:549,column:59}},{start:{line:549,column:24},end:{line:549,column:59}}],line:549},"86":{loc:{start:{line:557,column:24},end:{line:560,column:25}},type:"if",locations:[{start:{line:557,column:24},end:{line:560,column:25}},{start:{line:557,column:24},end:{line:560,column:25}}],line:557},"87":{loc:{start:{line:577,column:16},end:{line:577,column:57}},type:"binary-expr",locations:[{start:{line:577,column:16},end:{line:577,column:31}},{start:{line:577,column:35},end:{line:577,column:57}}],line:577},"88":{loc:{start:{line:578,column:16},end:{line:578,column:57}},type:"binary-expr",locations:[{start:{line:578,column:16},end:{line:578,column:31}},{start:{line:578,column:35},end:{line:578,column:57}}],line:578},"89":{loc:{start:{line:593,column:16},end:{line:623,column:17}},type:"switch",locations:[{start:{line:594,column:20},end:{line:600,column:32}},{start:{line:601,column:20},end:{line:605,column:37}},{start:{line:606,column:20},end:{line:611,column:85}},{start:{line:612,column:20},end:{line:615,column:99}},{start:{line:616,column:20},end:{line:618,column:37}},{start:{line:619,column:20},end:{line:621,column:38}},{start:{line:622,column:20},end:{line:622,column:39}}],line:593},"90":{loc:{start:{line:607,column:24},end:{line:607,column:82}},type:"if",locations:[{start:{line:607,column:24},end:{line:607,column:82}},{start:{line:607,column:24},end:{line:607,column:82}}],line:607},"91":{loc:{start:{line:614,column:24},end:{line:614,column:120}},type:"if",locations:[{start:{line:614,column:24},end:{line:614,column:120}},{start:{line:614,column:24},end:{line:614,column:120}}],line:614}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":0,"289":0,"290":0,"291":0,"292":0,"293":0,"294":0,"295":0,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":0,"311":0,"312":0,"313":0,"314":0,"315":0,"316":0,"317":0,"318":0,"319":0,"320":0,"321":0,"322":0,"323":0,"324":0,"325":0,"326":0,"327":0,"328":0,"329":0,"330":0,"331":0,"332":0,"333":0,"334":0,"335":0,"336":0,"337":0,"338":0,"339":0,"340":0,"341":0,"342":0,"343":0,"344":0,"345":0,"346":0,"347":0,"348":0,"349":0,"350":0,"351":0,"352":0,"353":0,"354":0,"355":0,"356":0,"357":0,"358":0,"359":0,"360":0,"361":0,"362":0,"363":0,"364":0,"365":0,"366":0,"367":0,"368":0,"369":0,"370":0,"371":0,"372":0,"373":0,"374":0,"375":0,"376":0,"377":0,"378":0,"379":0,"380":0,"381":0,"382":0,"383":0,"384":0,"385":0,"386":0,"387":0,"388":0,"389":0,"390":0,"391":0,"392":0,"393":0,"394":0,"395":0,"396":0,"397":0,"398":0,"399":0,"400":0,"401":0,"402":0,"403":0,"404":0,"405":0,"406":0,"407":0,"408":0,"409":0,"410":0,"411":0,"412":0,"413":0,"414":0,"415":0,"416":0,"417":0,"418":0,"419":0,"420":0,"421":0,"422":0,"423":0,"424":0,"425":0,"426":0,"427":0,"428":0,"429":0,"430":0,"431":0,"432":0,"433":0,"434":0,"435":0,"436":0,"437":0,"438":0,"439":0,"440":0,"441":0,"442":0,"443":0,"444":0,"445":0,"446":0,"447":0,"448":0,"449":0,"450":0,"451":0,"452":0,"453":0,"454":0,"455":0,"456":0,"457":0,"458":0,"459":0,"460":0,"461":0,"462":0,"463":0,"464":0,"465":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0},b:{"0":[0,0,0],"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0,0,0,0,0],"19":[0,0],"20":[0,0,0],"21":[0,0],"22":[0,0],"23":[0,0,0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0,0,0],"39":[0,0],"40":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0,0,0,0,0,0,0,0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0,0,0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0,0,0,0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0,0,0,0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0,0],"76":[0,0],"77":[0,0,0,0],"78":[0,0],"79":[0,0],"80":[0,0,0,0,0,0,0],"81":[0,0],"82":[0,0],"83":[0,0],"84":[0,0,0,0],"85":[0,0],"86":[0,0],"87":[0,0],"88":[0,0],"89":[0,0,0,0,0,0,0],"90":[0,0],"91":[0,0]},inputSourceMap:{version:3,file:"/Users/zhang/work/DigiCash/l2app/l2.js/src/main.ts",sourceRoot:"/Users/zhang/work/DigiCash/l2app/l2.js/",sources:["node_modules/source-map-loader/index.js!/Users/zhang/work/DigiCash/l2app/l2.js/src/main.ts"],names:[],mappings:"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",sourcesContent:["/**\n * L2 Library for Web Apps\n * =======================\n * [L2] is an efficient Layer2 solution for Dapp developers\n *\n * How to use this library\n * -----------------------\n * - **init**\n * get a singleton and init\n * let l2 = L2.newInstance();\n * l2.init(*params*)\n * - **deposit & withdraw**\n * deposit or withdraw when needed\n * - **send & receive**\n * use sendMessage(*MSG*) & on(*EVENT*)to communicate with server\n *\n * [L2]: https://l2.app\n */\n\nimport { Contract } from 'web3/node_modules/web3-eth-contract';\nimport CITASDK from '@cryptape/cita-sdk';\n\nconst Web3 = require('web3');\n// import * as Web3 from 'web3';\nimport Puppet from './puppet';\nimport HttpWatcher from './httpwatcher';\nimport {\n  SETTLE_WINDOW,\n  ADDRESS_ZERO,\n  L2_CB,\n  L2_EVENT,\n  CHANNEL_STATUS,\n  PUPPET_STATUS,\n  ContractInfo,\n} from './utils/constants';\nimport { events as appEvents, ethMethods, appMethods } from './service/cita';\nimport { events as ethEvents } from './service/eth';\nimport { events as sessionEvents } from './service/session';\nimport {\n  sendEthTx,\n  abi2jsonInterface,\n  getLCB,\n  delay,\n  prepareSignatureForTransfer,\n  sendAppTx,\n} from './utils/common';\nimport L2Session from './session';\n\n/**\n * INTERNAL EXPORTS\n * these exports are used within this library\n * DON'T export them in L2.ts\n */\nexport let cita: any; // cita sdk object\nexport let web3_10: any; // eth sdk object;\nexport let web3_outer: any; // eth sdk object;\nexport let ethPN: Contract; // eth payment contract\nexport let ERC20: Contract; // ERC20 contract\nexport let appPN: Contract; // cita payment contract\nexport let appSession: Contract; // cita payment contract\nexport let callbacks: Map<L2_EVENT, L2_CB>; // callbacks for L2.on\nexport let user: string; // user's eth address\nexport let l2: string; // L2's eth address\nexport let cp: string; // CP's eth address\nexport let puppet: Puppet; // puppet object\n\n/**\n * L2 Class\n * designed in singleton mode\n */\nexport class L2 {\n  // singleton object\n  private static _instance: L2;\n\n  private initialized: boolean;\n  private ethWatcher: HttpWatcher;\n  private appWatcher: HttpWatcher;\n\n  private constructor() {}\n\n  // get singleton\n  public static getInstance(): L2 {\n    if (this._instance === undefined) {\n      this._instance = new L2();\n      callbacks = new Map<L2_EVENT, L2_CB>();\n    }\n\n    return this._instance;\n  }\n\n  /**\n   * init L2 singleton\n   *\n   * @param {string} userAddress               user's ethereum address\n   * @param {any}    outerWeb3                 web3 for ethereum from caller\n   * @param {string} ethPaymentNetworkAddress  payment network contract info on ethereum\n   * @param {string} appRpcUrl                 cita rpc url\n   * @param {string} appPaymentNetworkAddress  payment network contract info on cita\n   * @param {string} appSessionAddress         session contract address on cita\n   *\n   */\n  async init(\n    userAddress: string,\n    outerWeb3: any,\n    ethPaymentNetworkAddress: string,\n    appRpcUrl: string,\n    appPaymentNetworkAddress: string,\n    appSessionAddress: string\n  ) {\n    let ethPNInfo: ContractInfo = {\n      abi: abi2jsonInterface(\n        JSON.stringify(require('./config/onchainPayment.json'))\n      ),\n      address: ethPaymentNetworkAddress,\n    };\n    let appPNInfo: ContractInfo = {\n      abi: abi2jsonInterface(\n        JSON.stringify(require('./config/offchainPayment.json'))\n      ),\n      address: appPaymentNetworkAddress,\n    };\n\n    let appSessionInfo: ContractInfo = {\n      abi: abi2jsonInterface(\n        JSON.stringify(require('./config/sessionPayment.json'))\n      ),\n      address: appSessionAddress,\n    };\n\n    console.log(\n      'start L2.init: userAddress: [%s], ethPaymentNetworkAddress: [%s], appRpcUrl: [%s], appPaymentNetworkAddress: [%s], appSessionAddress: [%s]',\n      userAddress,\n      ethPaymentNetworkAddress,\n      appRpcUrl,\n      appPaymentNetworkAddress,\n      appSessionAddress\n    );\n\n    web3_outer = outerWeb3;\n    let provider = outerWeb3.currentProvider;\n    web3_10 = new Web3(provider);\n\n    console.log(\n      `outer web3 version:`,\n      outerWeb3.version,\n      `inner web3 version:`,\n      web3_10.version\n    );\n\n    ethPN = new Contract(provider, ethPNInfo.abi, ethPNInfo.address);\n    ethPN.options.from = user;\n    ethPN.options.address = ethPNInfo.address;\n\n    let ERC20Abi = abi2jsonInterface(\n      JSON.stringify(require('./config/ERC20.json'))\n    );\n    ERC20 = new Contract(provider, ERC20Abi);\n\n    user = userAddress;\n    cp = await ethPN.methods.provider().call();\n    l2 = await ethPN.methods.regulator().call();\n\n    console.log('cp / l2 is ', cp, l2);\n\n    cita = CITASDK(appRpcUrl);\n    appPN = new cita.base.Contract(appPNInfo.abi, appPNInfo.address);\n    appPN.options.address = appPNInfo.address;\n\n    appSession = new cita.base.Contract(\n      appSessionInfo.abi,\n      appSessionInfo.address\n    );\n\n    await this.initPuppet();\n    this.initListeners();\n    this.initMissingEvent();\n    this.initialized = true;\n\n    console.log('finish L2.init');\n    return true;\n  }\n\n  /** * ---------- Payment APIs ---------- */\n\n  /**\n   * Deposit to channel. If there is no channel, open one\n   *\n   * @param {string | number}  amount  amount to deposit, or initial balance for new channel\n   * @param {string}  token   OPTIONAL, token contract address, default: '0x0000000000000000000000000000000000000000' for ETH\n   *\n   * @returns {Promise<string>} transaction hash of the deposit tx\n   */\n  async deposit(\n    amount: string | number,\n    token: string = ADDRESS_ZERO\n  ): Promise<string> {\n    this.checkInitialized();\n\n    console.log(\n      'start deposit with params: amount: [%s], token: [%s]',\n      amount + '',\n      token\n    );\n    if (!web3_10.utils.isAddress(token)) {\n      throw new Error(`token: [${token}] is not a valid address`);\n    }\n    let channelID = await ethPN.methods.getChannelID(user, token).call();\n    let channel = await ethPN.methods.channels(channelID).call();\n\n    amount = web3_10.utils.toBN(amount).toString();\n    let ethPNAddress = ethPN.options.address;\n    if (Number(channel.status) === CHANNEL_STATUS.CHANNEL_STATUS_OPEN) {\n      // add deposit\n      let appChannel = await appPN.methods.channelMap(channelID).call();\n      if (Number(appChannel.status) !== CHANNEL_STATUS.CHANNEL_STATUS_OPEN) {\n        console.log('appChannel', appChannel);\n        throw new Error('channel status of appchain is not open');\n      }\n\n      let data = ethPN.methods.userDeposit(channelID, amount).encodeABI();\n      if (token === ADDRESS_ZERO) {\n        return await sendEthTx(web3_outer, user, ethPNAddress, amount, data);\n      } else {\n        let approveData = ERC20.methods\n          .approve(ethPNAddress, amount)\n          .encodeABI();\n        await sendEthTx(web3_outer, user, token, 0, approveData);\n        return await sendEthTx(web3_outer, user, ethPNAddress, 0, data);\n      }\n    } else if (Number(channel.status) === CHANNEL_STATUS.CHANNEL_STATUS_INIT) {\n      // open channel\n      let from = puppet.getAccount().address;\n      let data = ethPN.methods\n        .openChannel(user, from, SETTLE_WINDOW, token, amount)\n        .encodeABI();\n\n      if (token === ADDRESS_ZERO) {\n        return await sendEthTx(web3_outer, user, ethPNAddress, amount, data);\n      } else {\n        // Approve ERC20\n        let approveData = ERC20.methods\n          .approve(ethPNAddress, amount)\n          .encodeABI();\n        await sendEthTx(web3_outer, user, token, 0, approveData);\n        return await sendEthTx(web3_outer, user, ethPNAddress, 0, data);\n      }\n    } else {\n      throw new Error(\n        'can not deposit now, channel status is ' + channel.status\n      );\n    }\n  }\n\n  /**\n   * Withdraw from channel. If the withdraw amount == balance, then cooperative settle the channel.\n   *\n   * @param {string|number} amount      amount to withdraw\n   * @param {string} token       OPTIONAL, token contract address, default: '0x0000000000000000000000000000000000000000' for ETH\n   * @param {string} receiver    OPTIONAL, eth address to receive withdrawed asset, default: user's address\n   *\n   * @returns {Promise<string>}\n   */\n  async withdraw(\n    amount: string | number,\n    token: string = ADDRESS_ZERO,\n    receiver: string = user\n  ): Promise<string> {\n    this.checkInitialized();\n\n    console.log(\n      'start withdraw with params:  amount: [%s], token: [%s]',\n      amount + '',\n      token\n    );\n\n    if (!web3_10.utils.isAddress(token)) {\n      throw new Error(`token: [${token}] is not a valid address`);\n    }\n\n    amount = web3_10.utils.toBN(amount).toString();\n    let channelID = await ethPN.methods.getChannelID(user, token).call();\n    let channel = await appPN.methods.channelMap(channelID).call();\n    // withdraw amount must less than user balance\n    if (\n      web3_10.utils.toBN(channel.userBalance).lt(web3_10.utils.toBN(amount))\n    ) {\n      throw new Error('withdraw amount exceeds the balance');\n    }\n\n    // if withdraw balance < user's balance, then go walk with userwithdraw process.\n    // if withdraw balance == user's balance, then go walk with cooperative settle process.\n    if (\n      web3_10.utils.toBN(channel.userBalance).gt(web3_10.utils.toBN(amount))\n    ) {\n      if (Number(channel.status) !== CHANNEL_STATUS.CHANNEL_STATUS_OPEN) {\n        throw new Error('channel status is not open');\n      }\n      console.log('call userProposeWithdraw');\n      return await sendAppTx(\n        appPN.methods.userProposeWithdraw(\n          channelID,\n          amount,\n          user,\n          await getLCB(web3_10.eth, 'eth')\n        )\n      );\n    } else {\n      if (\n        Number(channel.status) ===\n        CHANNEL_STATUS.CHANNEL_STATUS_PENDING_CO_SETTLE\n      ) {\n        console.log('call ethSubmitCooperativeSettle');\n        return await ethMethods.ethSubmitCooperativeSettle(channelID);\n      }\n      console.log('call proposeCooperativeSettle', amount);\n      return await sendAppTx(\n        appPN.methods.proposeCooperativeSettle(\n          channelID,\n          amount,\n          await getLCB(web3_10.eth, 'eth')\n        )\n      );\n    }\n  }\n\n  /**\n   * Withdraw asset from channel to user's eth address by force\n   *\n   * @param {string} token      OPTIONAL, token contract address, default: '0x0000000000000000000000000000000000000000' for ETH\n   *\n   * @returns {Promise<string>} transaction hash of the force withdraw on ETH\n   */\n  async forceWithdraw(token: string = ADDRESS_ZERO): Promise<string> {\n    this.checkInitialized();\n\n    console.log('start forceWithdraw with params: token: [%s]', token);\n\n    if (!web3_10.utils.isAddress(token)) {\n      throw new Error(`token: [${token}] is not a valid address`);\n    }\n\n    let channelID = await ethPN.methods.getChannelID(user, token).call();\n    let channel = await ethPN.methods.channels(channelID).call();\n    if (Number(channel.status) !== CHANNEL_STATUS.CHANNEL_STATUS_OPEN) {\n      throw new Error('eth channel status is not open, can not force withdraw');\n    }\n\n    let [\n      { balance, nonce, additionalHash, signature: partnerSignature },\n      {\n        amount: inAmount,\n        nonce: inNonce,\n        regulatorSignature,\n        providerSignature,\n      },\n    ] = await Promise.all([\n      appPN.methods.balanceProofMap(channelID, user).call(),\n      appPN.methods.rebalanceProofMap(channelID).call(),\n    ]);\n\n    partnerSignature = partnerSignature || '0x0';\n    regulatorSignature = regulatorSignature || '0x0';\n    providerSignature = providerSignature || '0x0';\n\n    console.log(\n      'force-close params: channelID: [%s], balance: [%s], nonce: [%s], additionalHash: [%s], partnerSignature: [%s], inAmount: [%s], inNonce: [%s], regulatorSignature: [%s], providerSignature: [%s] ',\n      channelID,\n      balance,\n      nonce,\n      additionalHash,\n      partnerSignature,\n      inAmount,\n      inNonce,\n      regulatorSignature,\n      providerSignature\n    );\n\n    let data = ethPN.methods\n      .closeChannel(\n        channelID,\n        balance,\n        nonce,\n        additionalHash,\n        partnerSignature,\n        inAmount,\n        inNonce,\n        regulatorSignature,\n        providerSignature\n      )\n      .encodeABI();\n    return await sendEthTx(web3_outer, user, ethPN.options.address, 0, data);\n  }\n\n  /**\n   * transfer asset offchain to specific address\n   *\n   * @param {string} to destination address of transaction\n   * @param {string|number} amount amount of transaction\n   * @param {string} token OPTIONAL, token contract address, default: '0x0000000000000000000000000000000000000000' for ETH\n   *\n   * @returns {Promise<string>}\n   */\n  async transfer(\n    to: string,\n    amount: string | number,\n    token: string = ADDRESS_ZERO\n  ): Promise<string> {\n    this.checkInitialized();\n\n    console.log(\n      'start transfer with params: to: [%s], amount: [%s], token: [%s]',\n      to,\n      amount + '',\n      token\n    );\n\n    let { isAddress, toBN } = web3_10.utils;\n\n    if (!isAddress(token)) {\n      throw new Error(`token: [${token}] is not a valid address`);\n    }\n\n    let channelID = await ethPN.methods.getChannelID(user, token).call();\n    let channel = await appPN.methods.channelMap(channelID).call();\n    if (Number(channel.status) !== CHANNEL_STATUS.CHANNEL_STATUS_OPEN) {\n      throw new Error('app channel status is not open, can not transfer now');\n    }\n\n    // check user's balance is enough\n    if (toBN(channel.userBalance).lt(web3_10.utils.toBN(amount))) {\n      throw new Error(\"user's balance is less than transfer amount\");\n    }\n\n    // get balance proof from eth contract\n    let { balance, nonce } = await appPN.methods\n      .balanceProofMap(channelID, cp)\n      .call();\n    balance = toBN(amount)\n      .add(toBN(balance))\n      .toString();\n    nonce = toBN(nonce)\n      .add(toBN(1))\n      .toString();\n    let additionalHash = '0x0';\n\n    let signature = await prepareSignatureForTransfer(\n      web3_outer,\n      ethPN.options.address,\n      channelID,\n      balance,\n      nonce,\n      additionalHash,\n      user\n    );\n\n    console.log('start Submit Transfer');\n    return await sendAppTx(\n      appPN.methods.transfer(\n        to,\n        channelID,\n        balance,\n        nonce,\n        additionalHash,\n        signature\n      )\n    );\n  }\n\n  /** * ---------- Session APIs ---------- */\n\n  /**\n   * fetch a session instance by sessionID\n   *\n   * @param sessionID\n   *\n   * @returns session\n   */\n  async startSession(sessionID: string): Promise<L2Session> {\n    this.checkInitialized();\n    let repeatTimes = 10;\n    let session: L2Session;\n    for (let i = 0; i < repeatTimes; i++) {\n      session = await L2Session.getSessionById(sessionID);\n      if (session) {\n        break;\n      }\n      await delay(1000);\n    }\n\n    if (!session) {\n      throw new Error('session not found');\n    }\n    return session;\n  }\n\n  /** * ---------- Query APIs ---------- */\n\n  async getSessionBySessionID(sessionID: string): Promise<L2Session> {\n    return await L2Session.getSessionById(sessionID);\n  }\n\n  async getMessagesBySessionID(sessionID: string) {\n    return await L2Session.getMessagesBySessionID(sessionID);\n  }\n\n  async getPlayersBySessionID(sessionID: string) {\n    return await L2Session.getPlayersBySessionID(sessionID);\n  }\n\n  /**\n   * get offchain token balance of user\n   *\n   * @param {string} token token address, default: '0x0000000000000000000000000000000000000000' for ETH\n   *\n   * @returns {Promise<string>} user's balance\n   */\n  async getBalance(token: string = ADDRESS_ZERO): Promise<string> {\n    this.checkInitialized();\n    let channelID = await ethPN.methods.getChannelID(user, token).call();\n    let channel = await appPN.methods.channelMap(channelID).call();\n    return channel.userBalance;\n  }\n\n  async getChannelInfo(token: string = ADDRESS_ZERO) {\n    this.checkInitialized();\n    let channelID = await ethPN.methods.getChannelID(user, token).call();\n    let ethChannel = await ethPN.methods.channels(channelID).call();\n\n    console.log('ChannelID is ', channelID, ethChannel);\n    let channel = await appPN.methods.channelMap(channelID).call();\n\n    return { channelID, ...channel };\n  }\n\n  /**\n   * get offchain tx transactions for token\n   *\n   * @param {string} token token address, default: '0x0000000000000000000000000000000000000000' for ETH\n   *\n   * @returns {Promise<any>} transaction list for token\n   */\n  async getAllTXs(token: string = ADDRESS_ZERO): Promise<any> {\n    this.checkInitialized();\n\n    let [inTXs, outTXs] = await Promise.all([\n      appPN.getPastEvents('Transfer', {\n        filter: { to: user },\n        fromBlock: 0,\n        toBlock: 'latest',\n      }),\n      appPN.getPastEvents('Transfer', {\n        filter: { from: user },\n        fromBlock: 0,\n        toBlock: 'latest',\n      }),\n    ]);\n\n    const cmpNonce = (key: string) => {\n      return (a: any, b: any) => {\n        return a[key] - b[key];\n      };\n    };\n\n    let lastBalance = web3_10.utils.toBN(0);\n    const getTX = (tx: any) => {\n      let { channelID, balance, ...rest } = tx.returnValues;\n      balance = new web3_10.utils.toBN(balance);\n      let amount = balance.sub(lastBalance).toString();\n      lastBalance = balance;\n\n      return {\n        id: tx.transactionHash,\n        amount,\n        ...rest,\n      };\n    };\n\n    inTXs = inTXs.sort(cmpNonce('nonce')).map(tx => getTX(tx));\n    outTXs = outTXs.sort(cmpNonce('nonce')).map(tx => getTX(tx));\n\n    return { in: inTXs, out: outTXs };\n  }\n\n  /**\n   * get all registered puppet of user\n   *\n   * @returns {Promise<Array<any>>}\n   */\n  async getAllPuppets(): Promise<Array<any>> {\n    this.checkInitialized();\n\n    let puppetList = [];\n    let n = 0;\n    while (true) {\n      try {\n        let { p: address, enabled } = await appPN.methods\n          .puppets(user, n++)\n          .call();\n        puppetList.push({ address, enabled });\n      } catch (err) {\n        break;\n      }\n    }\n    console.log(puppetList);\n    return puppetList;\n  }\n\n  /**\n   * disable user's puppet on chain\n   *\n   * @param {string} puppet address of user's puppet\n   *\n   * @returns {Promise<string>} hash of disablePuppet transaction\n   */\n  async disablePuppet(puppet: string): Promise<string> {\n    this.checkInitialized();\n    let data = ethPN.methods.disablePuppet(puppet).encodeABI();\n    return await sendEthTx(web3_outer, user, ethPN.options.address, 0, data);\n  }\n\n  /** ---------- Event API ---------- */\n\n  /**\n   *\n   * @param {L2_EVENT} event event name to watch\n   * @param {L2_CB} callback callback to be executed when the event fired\n   *\n   */\n  on(event: L2_EVENT, callback: L2_CB) {\n    // this.checkInitialized();\n    callbacks.set(event, callback);\n  }\n\n  /**  ---------- Private methods---------- */\n\n  /**\n   * check L2 is initialized, if not throw error\n   */\n  private checkInitialized() {\n    if (!this.initialized) {\n      throw new Error('L2 is not initialized');\n    }\n  }\n\n  /**\n   * init Puppet when L2 initializing\n   */\n  private async initPuppet() {\n    puppet = Puppet.get(user);\n\n    // get puppet from LocalStorage, check if it is valid on eth payment contract\n    if (puppet) {\n      console.log('puppet is ', puppet);\n      let puppetStatus = await ethPN.methods\n        .puppetMap(user, puppet.getAccount().address)\n        .call();\n      console.log('puppetStatus', puppetStatus);\n      if (Number(puppetStatus) === PUPPET_STATUS.ENABLED) {\n        // puppet is active, done\n        console.log('puppet is active');\n        return;\n      }\n    }\n\n    /* if no puppet or puppet is disabled,\n     * create a new one and add it to payment contract\n     */\n    puppet = Puppet.create(user);\n    let data = ethPN.methods.addPuppet(puppet.getAccount().address).encodeABI();\n    await sendEthTx(web3_outer, user, ethPN.options.address, 0, data);\n  }\n\n  /**\n   * init listeners for payment contract of eth and appchain\n   */\n  private async initListeners() {\n    // before start new watcher, stop the old watcher\n    this.ethWatcher && this.ethWatcher.stop();\n\n    // let ethWatchList = [{ contract: ethPN, listener: ethEvents }];\n    // this.ethWatcher = new HttpWatcher(web3_10.eth, 5000, ethWatchList);\n    // this.ethWatcher.start();\n\n    // before start new watcher, stop the old watcher\n    this.appWatcher && this.appWatcher.stop();\n\n    let appWatchList = [\n      { contract: appPN, listener: appEvents },\n      { contract: appSession, listener: sessionEvents },\n    ];\n    this.appWatcher = new HttpWatcher(cita.base, 1000, appWatchList);\n    this.appWatcher.start();\n  }\n\n  /**\n   * handle the missing events when user is offline.\n   */\n  private async initMissingEvent() {\n    console.log('start initMissingEvent');\n\n    // get all open channel of user\n\n    let allChannelOpenedEvent = await ethPN.getPastEvents('ChannelOpened', {\n      filter: { user },\n      fromBlock: 0,\n      toBlock: 'latest',\n    });\n\n    console.log(\n      'getAllChannelOpenedEvent length',\n      allChannelOpenedEvent.length\n    );\n\n    for (let event of allChannelOpenedEvent) {\n      let returnValues: any = event.returnValues;\n      let { channelID } = returnValues;\n      let channel = await ethPN.methods.channels(channelID).call();\n\n      if (Number(channel.status) === CHANNEL_STATUS.CHANNEL_STATUS_OPEN) {\n        await appMethods.appSubmitGuardProof(channelID, user);\n      }\n    }\n\n    // TODO handle missing confirmCooperativeSettle event & confirmUserWithdraw event\n    // init missing transfer event\n\n    // init missing cooperativeSettle event\n\n    // init missing userWithdraw event\n  }\n} // end of class L2\n\nexport default L2;\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var __assign=(cov_2pu8zsw70e.s[0]++,(cov_2pu8zsw70e.b[0][0]++,this)&&(cov_2pu8zsw70e.b[0][1]++,this.__assign)||(cov_2pu8zsw70e.b[0][2]++,function(){cov_2pu8zsw70e.f[0]++;cov_2pu8zsw70e.s[1]++;__assign=(cov_2pu8zsw70e.b[1][0]++,Object.assign)||(cov_2pu8zsw70e.b[1][1]++,function(t){cov_2pu8zsw70e.f[1]++;cov_2pu8zsw70e.s[2]++;for(var s,i=1,n=arguments.length;i<n;i++){cov_2pu8zsw70e.s[3]++;s=arguments[i];cov_2pu8zsw70e.s[4]++;for(var p in s){cov_2pu8zsw70e.s[5]++;if(Object.prototype.hasOwnProperty.call(s,p)){cov_2pu8zsw70e.b[2][0]++;cov_2pu8zsw70e.s[6]++;t[p]=s[p];}else{cov_2pu8zsw70e.b[2][1]++;}}}cov_2pu8zsw70e.s[7]++;return t;});cov_2pu8zsw70e.s[8]++;return __assign.apply(this,arguments);}));var __awaiter=(cov_2pu8zsw70e.s[9]++,(cov_2pu8zsw70e.b[3][0]++,this)&&(cov_2pu8zsw70e.b[3][1]++,this.__awaiter)||(cov_2pu8zsw70e.b[3][2]++,function(thisArg,_arguments,P,generator){cov_2pu8zsw70e.f[2]++;cov_2pu8zsw70e.s[10]++;return new((cov_2pu8zsw70e.b[4][0]++,P)||(cov_2pu8zsw70e.b[4][1]++,P=Promise))(function(resolve,reject){cov_2pu8zsw70e.f[3]++;function fulfilled(value){cov_2pu8zsw70e.f[4]++;cov_2pu8zsw70e.s[11]++;try{cov_2pu8zsw70e.s[12]++;step(generator.next(value));}catch(e){cov_2pu8zsw70e.s[13]++;reject(e);}}function rejected(value){cov_2pu8zsw70e.f[5]++;cov_2pu8zsw70e.s[14]++;try{cov_2pu8zsw70e.s[15]++;step(generator["throw"](value));}catch(e){cov_2pu8zsw70e.s[16]++;reject(e);}}function step(result){cov_2pu8zsw70e.f[6]++;cov_2pu8zsw70e.s[17]++;result.done?(cov_2pu8zsw70e.b[5][0]++,resolve(result.value)):(cov_2pu8zsw70e.b[5][1]++,new P(function(resolve){cov_2pu8zsw70e.f[7]++;cov_2pu8zsw70e.s[18]++;resolve(result.value);}).then(fulfilled,rejected));}cov_2pu8zsw70e.s[19]++;step((generator=generator.apply(thisArg,(cov_2pu8zsw70e.b[6][0]++,_arguments)||(cov_2pu8zsw70e.b[6][1]++,[]))).next());});}));var __generator=(cov_2pu8zsw70e.s[20]++,(cov_2pu8zsw70e.b[7][0]++,this)&&(cov_2pu8zsw70e.b[7][1]++,this.__generator)||(cov_2pu8zsw70e.b[7][2]++,function(thisArg,body){cov_2pu8zsw70e.f[8]++;var _=(cov_2pu8zsw70e.s[21]++,{label:0,sent:function(){cov_2pu8zsw70e.f[9]++;cov_2pu8zsw70e.s[22]++;if(t[0]&1){cov_2pu8zsw70e.b[8][0]++;cov_2pu8zsw70e.s[23]++;throw t[1];}else{cov_2pu8zsw70e.b[8][1]++;}cov_2pu8zsw70e.s[24]++;return t[1];},trys:[],ops:[]}),f,y,t,g;cov_2pu8zsw70e.s[25]++;return g={next:verb(0),"throw":verb(1),"return":verb(2)},(cov_2pu8zsw70e.b[9][0]++,typeof Symbol==="function")&&(cov_2pu8zsw70e.b[9][1]++,g[Symbol.iterator]=function(){cov_2pu8zsw70e.f[10]++;cov_2pu8zsw70e.s[26]++;return this;}),g;function verb(n){cov_2pu8zsw70e.f[11]++;cov_2pu8zsw70e.s[27]++;return function(v){cov_2pu8zsw70e.f[12]++;cov_2pu8zsw70e.s[28]++;return step([n,v]);};}function step(op){cov_2pu8zsw70e.f[13]++;cov_2pu8zsw70e.s[29]++;if(f){cov_2pu8zsw70e.b[10][0]++;cov_2pu8zsw70e.s[30]++;throw new TypeError("Generator is already executing.");}else{cov_2pu8zsw70e.b[10][1]++;}cov_2pu8zsw70e.s[31]++;while(_){cov_2pu8zsw70e.s[32]++;try{cov_2pu8zsw70e.s[33]++;if(f=1,(cov_2pu8zsw70e.b[12][0]++,y)&&(cov_2pu8zsw70e.b[12][1]++,t=op[0]&2?(cov_2pu8zsw70e.b[13][0]++,y["return"]):(cov_2pu8zsw70e.b[13][1]++,op[0]?(cov_2pu8zsw70e.b[14][0]++,(cov_2pu8zsw70e.b[15][0]++,y["throw"])||(cov_2pu8zsw70e.b[15][1]++,((cov_2pu8zsw70e.b[16][0]++,t=y["return"])&&(cov_2pu8zsw70e.b[16][1]++,t.call(y)),0))):(cov_2pu8zsw70e.b[14][1]++,y.next)))&&(cov_2pu8zsw70e.b[12][2]++,!(t=t.call(y,op[1])).done)){cov_2pu8zsw70e.b[11][0]++;cov_2pu8zsw70e.s[34]++;return t;}else{cov_2pu8zsw70e.b[11][1]++;}cov_2pu8zsw70e.s[35]++;if(y=0,t){cov_2pu8zsw70e.b[17][0]++;cov_2pu8zsw70e.s[36]++;op=[op[0]&2,t.value];}else{cov_2pu8zsw70e.b[17][1]++;}cov_2pu8zsw70e.s[37]++;switch(op[0]){case 0:cov_2pu8zsw70e.b[18][0]++;case 1:cov_2pu8zsw70e.b[18][1]++;cov_2pu8zsw70e.s[38]++;t=op;cov_2pu8zsw70e.s[39]++;break;case 4:cov_2pu8zsw70e.b[18][2]++;cov_2pu8zsw70e.s[40]++;_.label++;cov_2pu8zsw70e.s[41]++;return{value:op[1],done:false};case 5:cov_2pu8zsw70e.b[18][3]++;cov_2pu8zsw70e.s[42]++;_.label++;cov_2pu8zsw70e.s[43]++;y=op[1];cov_2pu8zsw70e.s[44]++;op=[0];cov_2pu8zsw70e.s[45]++;continue;case 7:cov_2pu8zsw70e.b[18][4]++;cov_2pu8zsw70e.s[46]++;op=_.ops.pop();cov_2pu8zsw70e.s[47]++;_.trys.pop();cov_2pu8zsw70e.s[48]++;continue;default:cov_2pu8zsw70e.b[18][5]++;cov_2pu8zsw70e.s[49]++;if((cov_2pu8zsw70e.b[20][0]++,!(t=_.trys,t=(cov_2pu8zsw70e.b[21][0]++,t.length>0)&&(cov_2pu8zsw70e.b[21][1]++,t[t.length-1])))&&((cov_2pu8zsw70e.b[20][1]++,op[0]===6)||(cov_2pu8zsw70e.b[20][2]++,op[0]===2))){cov_2pu8zsw70e.b[19][0]++;cov_2pu8zsw70e.s[50]++;_=0;cov_2pu8zsw70e.s[51]++;continue;}else{cov_2pu8zsw70e.b[19][1]++;}cov_2pu8zsw70e.s[52]++;if((cov_2pu8zsw70e.b[23][0]++,op[0]===3)&&((cov_2pu8zsw70e.b[23][1]++,!t)||(cov_2pu8zsw70e.b[23][2]++,op[1]>t[0])&&(cov_2pu8zsw70e.b[23][3]++,op[1]<t[3]))){cov_2pu8zsw70e.b[22][0]++;cov_2pu8zsw70e.s[53]++;_.label=op[1];cov_2pu8zsw70e.s[54]++;break;}else{cov_2pu8zsw70e.b[22][1]++;}cov_2pu8zsw70e.s[55]++;if((cov_2pu8zsw70e.b[25][0]++,op[0]===6)&&(cov_2pu8zsw70e.b[25][1]++,_.label<t[1])){cov_2pu8zsw70e.b[24][0]++;cov_2pu8zsw70e.s[56]++;_.label=t[1];cov_2pu8zsw70e.s[57]++;t=op;cov_2pu8zsw70e.s[58]++;break;}else{cov_2pu8zsw70e.b[24][1]++;}cov_2pu8zsw70e.s[59]++;if((cov_2pu8zsw70e.b[27][0]++,t)&&(cov_2pu8zsw70e.b[27][1]++,_.label<t[2])){cov_2pu8zsw70e.b[26][0]++;cov_2pu8zsw70e.s[60]++;_.label=t[2];cov_2pu8zsw70e.s[61]++;_.ops.push(op);cov_2pu8zsw70e.s[62]++;break;}else{cov_2pu8zsw70e.b[26][1]++;}cov_2pu8zsw70e.s[63]++;if(t[2]){cov_2pu8zsw70e.b[28][0]++;cov_2pu8zsw70e.s[64]++;_.ops.pop();}else{cov_2pu8zsw70e.b[28][1]++;}cov_2pu8zsw70e.s[65]++;_.trys.pop();cov_2pu8zsw70e.s[66]++;continue;}cov_2pu8zsw70e.s[67]++;op=body.call(thisArg,_);}catch(e){cov_2pu8zsw70e.s[68]++;op=[6,e];cov_2pu8zsw70e.s[69]++;y=0;}finally{cov_2pu8zsw70e.s[70]++;f=t=0;}}cov_2pu8zsw70e.s[71]++;if(op[0]&5){cov_2pu8zsw70e.b[29][0]++;cov_2pu8zsw70e.s[72]++;throw op[1];}else{cov_2pu8zsw70e.b[29][1]++;}cov_2pu8zsw70e.s[73]++;return{value:op[0]?(cov_2pu8zsw70e.b[30][0]++,op[1]):(cov_2pu8zsw70e.b[30][1]++,void 0),done:true};}}));var __rest=(cov_2pu8zsw70e.s[74]++,(cov_2pu8zsw70e.b[31][0]++,this)&&(cov_2pu8zsw70e.b[31][1]++,this.__rest)||(cov_2pu8zsw70e.b[31][2]++,function(s,e){cov_2pu8zsw70e.f[14]++;var t=(cov_2pu8zsw70e.s[75]++,{});cov_2pu8zsw70e.s[76]++;for(var p in s){cov_2pu8zsw70e.s[77]++;if((cov_2pu8zsw70e.b[33][0]++,Object.prototype.hasOwnProperty.call(s,p))&&(cov_2pu8zsw70e.b[33][1]++,e.indexOf(p)<0)){cov_2pu8zsw70e.b[32][0]++;cov_2pu8zsw70e.s[78]++;t[p]=s[p];}else{cov_2pu8zsw70e.b[32][1]++;}}cov_2pu8zsw70e.s[79]++;if((cov_2pu8zsw70e.b[35][0]++,s!=null)&&(cov_2pu8zsw70e.b[35][1]++,typeof Object.getOwnPropertySymbols==="function")){cov_2pu8zsw70e.b[34][0]++;cov_2pu8zsw70e.s[80]++;for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){cov_2pu8zsw70e.s[81]++;if(e.indexOf(p[i])<0){cov_2pu8zsw70e.b[36][0]++;cov_2pu8zsw70e.s[82]++;t[p[i]]=s[p[i]];}else{cov_2pu8zsw70e.b[36][1]++;}}}else{cov_2pu8zsw70e.b[34][1]++;}cov_2pu8zsw70e.s[83]++;return t;}));cov_2pu8zsw70e.s[84]++;Object.defineProperty(exports,"__esModule",{value:true});var web3_eth_contract_1=(cov_2pu8zsw70e.s[85]++,__webpack_require__(/*! web3/node_modules/web3-eth-contract */ "web3/node_modules/web3-eth-contract"));var cita_sdk_1=(cov_2pu8zsw70e.s[86]++,__webpack_require__(/*! @cryptape/cita-sdk */ "@cryptape/cita-sdk"));var Web3=(cov_2pu8zsw70e.s[87]++,__webpack_require__(/*! web3 */ "web3"));var puppet_1=(cov_2pu8zsw70e.s[88]++,__webpack_require__(/*! ./puppet */ "./puppet.ts"));var httpwatcher_1=(cov_2pu8zsw70e.s[89]++,__webpack_require__(/*! ./httpwatcher */ "./httpwatcher.ts"));var constants_1=(cov_2pu8zsw70e.s[90]++,__webpack_require__(/*! ./utils/constants */ "./utils/constants.ts"));var cita_1=(cov_2pu8zsw70e.s[91]++,__webpack_require__(/*! ./service/cita */ "./service/cita.ts"));var session_1=(cov_2pu8zsw70e.s[92]++,__webpack_require__(/*! ./service/session */ "./service/session.ts"));var common_1=(cov_2pu8zsw70e.s[93]++,__webpack_require__(/*! ./utils/common */ "./utils/common.ts"));var session_2=(cov_2pu8zsw70e.s[94]++,__webpack_require__(/*! ./session */ "./session.ts"));var L2=(cov_2pu8zsw70e.s[95]++,function(){cov_2pu8zsw70e.f[15]++;function L2(){cov_2pu8zsw70e.f[16]++;}cov_2pu8zsw70e.s[96]++;L2.getInstance=function(){cov_2pu8zsw70e.f[17]++;cov_2pu8zsw70e.s[97]++;if(this._instance===undefined){cov_2pu8zsw70e.b[37][0]++;cov_2pu8zsw70e.s[98]++;this._instance=new L2();cov_2pu8zsw70e.s[99]++;exports.callbacks=new Map();}else{cov_2pu8zsw70e.b[37][1]++;}cov_2pu8zsw70e.s[100]++;return this._instance;};cov_2pu8zsw70e.s[101]++;L2.prototype.init=function(userAddress,outerWeb3,ethPaymentNetworkAddress,appRpcUrl,appPaymentNetworkAddress,appSessionAddress){cov_2pu8zsw70e.f[18]++;cov_2pu8zsw70e.s[102]++;return __awaiter(this,void 0,void 0,function(){cov_2pu8zsw70e.f[19]++;var ethPNInfo,appPNInfo,appSessionInfo,provider,ERC20Abi;cov_2pu8zsw70e.s[103]++;return __generator(this,function(_a){cov_2pu8zsw70e.f[20]++;cov_2pu8zsw70e.s[104]++;switch(_a.label){case 0:cov_2pu8zsw70e.b[38][0]++;cov_2pu8zsw70e.s[105]++;ethPNInfo={abi:common_1.abi2jsonInterface(JSON.stringify(__webpack_require__(/*! ./config/onchainPayment.json */ "./config/onchainPayment.json"))),address:ethPaymentNetworkAddress};cov_2pu8zsw70e.s[106]++;appPNInfo={abi:common_1.abi2jsonInterface(JSON.stringify(__webpack_require__(/*! ./config/offchainPayment.json */ "./config/offchainPayment.json"))),address:appPaymentNetworkAddress};cov_2pu8zsw70e.s[107]++;appSessionInfo={abi:common_1.abi2jsonInterface(JSON.stringify(__webpack_require__(/*! ./config/sessionPayment.json */ "./config/sessionPayment.json"))),address:appSessionAddress};cov_2pu8zsw70e.s[108]++;console.log('start L2.init: userAddress: [%s], ethPaymentNetworkAddress: [%s], appRpcUrl: [%s], appPaymentNetworkAddress: [%s], appSessionAddress: [%s]',userAddress,ethPaymentNetworkAddress,appRpcUrl,appPaymentNetworkAddress,appSessionAddress);cov_2pu8zsw70e.s[109]++;exports.web3_outer=outerWeb3;cov_2pu8zsw70e.s[110]++;provider=outerWeb3.currentProvider;cov_2pu8zsw70e.s[111]++;exports.web3_10=new Web3(provider);cov_2pu8zsw70e.s[112]++;console.log("outer web3 version:",outerWeb3.version,"inner web3 version:",exports.web3_10.version);cov_2pu8zsw70e.s[113]++;exports.ethPN=new web3_eth_contract_1.Contract(provider,ethPNInfo.abi,ethPNInfo.address);cov_2pu8zsw70e.s[114]++;exports.ethPN.options.from=exports.user;cov_2pu8zsw70e.s[115]++;exports.ethPN.options.address=ethPNInfo.address;cov_2pu8zsw70e.s[116]++;ERC20Abi=common_1.abi2jsonInterface(JSON.stringify(__webpack_require__(/*! ./config/ERC20.json */ "./config/ERC20.json")));cov_2pu8zsw70e.s[117]++;exports.ERC20=new web3_eth_contract_1.Contract(provider,ERC20Abi);cov_2pu8zsw70e.s[118]++;exports.user=userAddress;cov_2pu8zsw70e.s[119]++;return[4,exports.ethPN.methods.provider().call()];case 1:cov_2pu8zsw70e.b[38][1]++;cov_2pu8zsw70e.s[120]++;exports.cp=_a.sent();cov_2pu8zsw70e.s[121]++;return[4,exports.ethPN.methods.regulator().call()];case 2:cov_2pu8zsw70e.b[38][2]++;cov_2pu8zsw70e.s[122]++;exports.l2=_a.sent();cov_2pu8zsw70e.s[123]++;console.log('cp / l2 is ',exports.cp,exports.l2);cov_2pu8zsw70e.s[124]++;exports.cita=cita_sdk_1.default(appRpcUrl);cov_2pu8zsw70e.s[125]++;exports.appPN=new exports.cita.base.Contract(appPNInfo.abi,appPNInfo.address);cov_2pu8zsw70e.s[126]++;exports.appPN.options.address=appPNInfo.address;cov_2pu8zsw70e.s[127]++;exports.appSession=new exports.cita.base.Contract(appSessionInfo.abi,appSessionInfo.address);cov_2pu8zsw70e.s[128]++;return[4,this.initPuppet()];case 3:cov_2pu8zsw70e.b[38][3]++;cov_2pu8zsw70e.s[129]++;_a.sent();cov_2pu8zsw70e.s[130]++;this.initListeners();cov_2pu8zsw70e.s[131]++;this.initMissingEvent();cov_2pu8zsw70e.s[132]++;this.initialized=true;cov_2pu8zsw70e.s[133]++;console.log('finish L2.init');cov_2pu8zsw70e.s[134]++;return[2,true];}});});};cov_2pu8zsw70e.s[135]++;L2.prototype.deposit=function(amount,token){cov_2pu8zsw70e.f[21]++;cov_2pu8zsw70e.s[136]++;if(token===void 0){cov_2pu8zsw70e.b[39][0]++;cov_2pu8zsw70e.s[137]++;token=constants_1.ADDRESS_ZERO;}else{cov_2pu8zsw70e.b[39][1]++;}cov_2pu8zsw70e.s[138]++;return __awaiter(this,void 0,void 0,function(){cov_2pu8zsw70e.f[22]++;var channelID,channel,ethPNAddress,appChannel,data,approveData,from,data,approveData;cov_2pu8zsw70e.s[139]++;return __generator(this,function(_a){cov_2pu8zsw70e.f[23]++;cov_2pu8zsw70e.s[140]++;switch(_a.label){case 0:cov_2pu8zsw70e.b[40][0]++;cov_2pu8zsw70e.s[141]++;this.checkInitialized();cov_2pu8zsw70e.s[142]++;console.log('start deposit with params: amount: [%s], token: [%s]',amount+'',token);cov_2pu8zsw70e.s[143]++;if(!exports.web3_10.utils.isAddress(token)){cov_2pu8zsw70e.b[41][0]++;cov_2pu8zsw70e.s[144]++;throw new Error("token: ["+token+"] is not a valid address");}else{cov_2pu8zsw70e.b[41][1]++;}cov_2pu8zsw70e.s[145]++;return[4,exports.ethPN.methods.getChannelID(exports.user,token).call()];case 1:cov_2pu8zsw70e.b[40][1]++;cov_2pu8zsw70e.s[146]++;channelID=_a.sent();cov_2pu8zsw70e.s[147]++;return[4,exports.ethPN.methods.channels(channelID).call()];case 2:cov_2pu8zsw70e.b[40][2]++;cov_2pu8zsw70e.s[148]++;channel=_a.sent();cov_2pu8zsw70e.s[149]++;amount=exports.web3_10.utils.toBN(amount).toString();cov_2pu8zsw70e.s[150]++;ethPNAddress=exports.ethPN.options.address;cov_2pu8zsw70e.s[151]++;if(!(Number(channel.status)===constants_1.CHANNEL_STATUS.CHANNEL_STATUS_OPEN)){cov_2pu8zsw70e.b[42][0]++;cov_2pu8zsw70e.s[152]++;return[3,9];}else{cov_2pu8zsw70e.b[42][1]++;}cov_2pu8zsw70e.s[153]++;return[4,exports.appPN.methods.channelMap(channelID).call()];case 3:cov_2pu8zsw70e.b[40][3]++;cov_2pu8zsw70e.s[154]++;appChannel=_a.sent();cov_2pu8zsw70e.s[155]++;if(Number(appChannel.status)!==constants_1.CHANNEL_STATUS.CHANNEL_STATUS_OPEN){cov_2pu8zsw70e.b[43][0]++;cov_2pu8zsw70e.s[156]++;console.log('appChannel',appChannel);cov_2pu8zsw70e.s[157]++;throw new Error('channel status of appchain is not open');}else{cov_2pu8zsw70e.b[43][1]++;}cov_2pu8zsw70e.s[158]++;data=exports.ethPN.methods.userDeposit(channelID,amount).encodeABI();cov_2pu8zsw70e.s[159]++;if(!(token===constants_1.ADDRESS_ZERO)){cov_2pu8zsw70e.b[44][0]++;cov_2pu8zsw70e.s[160]++;return[3,5];}else{cov_2pu8zsw70e.b[44][1]++;}cov_2pu8zsw70e.s[161]++;return[4,common_1.sendEthTx(exports.web3_outer,exports.user,ethPNAddress,amount,data)];case 4:cov_2pu8zsw70e.b[40][4]++;cov_2pu8zsw70e.s[162]++;return[2,_a.sent()];case 5:cov_2pu8zsw70e.b[40][5]++;cov_2pu8zsw70e.s[163]++;approveData=exports.ERC20.methods.approve(ethPNAddress,amount).encodeABI();cov_2pu8zsw70e.s[164]++;return[4,common_1.sendEthTx(exports.web3_outer,exports.user,token,0,approveData)];case 6:cov_2pu8zsw70e.b[40][6]++;cov_2pu8zsw70e.s[165]++;_a.sent();cov_2pu8zsw70e.s[166]++;return[4,common_1.sendEthTx(exports.web3_outer,exports.user,ethPNAddress,0,data)];case 7:cov_2pu8zsw70e.b[40][7]++;cov_2pu8zsw70e.s[167]++;return[2,_a.sent()];case 8:cov_2pu8zsw70e.b[40][8]++;cov_2pu8zsw70e.s[168]++;return[3,16];case 9:cov_2pu8zsw70e.b[40][9]++;cov_2pu8zsw70e.s[169]++;if(!(Number(channel.status)===constants_1.CHANNEL_STATUS.CHANNEL_STATUS_INIT)){cov_2pu8zsw70e.b[45][0]++;cov_2pu8zsw70e.s[170]++;return[3,15];}else{cov_2pu8zsw70e.b[45][1]++;}cov_2pu8zsw70e.s[171]++;from=exports.puppet.getAccount().address;cov_2pu8zsw70e.s[172]++;data=exports.ethPN.methods.openChannel(exports.user,from,constants_1.SETTLE_WINDOW,token,amount).encodeABI();cov_2pu8zsw70e.s[173]++;if(!(token===constants_1.ADDRESS_ZERO)){cov_2pu8zsw70e.b[46][0]++;cov_2pu8zsw70e.s[174]++;return[3,11];}else{cov_2pu8zsw70e.b[46][1]++;}cov_2pu8zsw70e.s[175]++;return[4,common_1.sendEthTx(exports.web3_outer,exports.user,ethPNAddress,amount,data)];case 10:cov_2pu8zsw70e.b[40][10]++;cov_2pu8zsw70e.s[176]++;return[2,_a.sent()];case 11:cov_2pu8zsw70e.b[40][11]++;cov_2pu8zsw70e.s[177]++;approveData=exports.ERC20.methods.approve(ethPNAddress,amount).encodeABI();cov_2pu8zsw70e.s[178]++;return[4,common_1.sendEthTx(exports.web3_outer,exports.user,token,0,approveData)];case 12:cov_2pu8zsw70e.b[40][12]++;cov_2pu8zsw70e.s[179]++;_a.sent();cov_2pu8zsw70e.s[180]++;return[4,common_1.sendEthTx(exports.web3_outer,exports.user,ethPNAddress,0,data)];case 13:cov_2pu8zsw70e.b[40][13]++;cov_2pu8zsw70e.s[181]++;return[2,_a.sent()];case 14:cov_2pu8zsw70e.b[40][14]++;cov_2pu8zsw70e.s[182]++;return[3,16];case 15:cov_2pu8zsw70e.b[40][15]++;cov_2pu8zsw70e.s[183]++;throw new Error('can not deposit now, channel status is '+channel.status);case 16:cov_2pu8zsw70e.b[40][16]++;cov_2pu8zsw70e.s[184]++;return[2];}});});};cov_2pu8zsw70e.s[185]++;L2.prototype.withdraw=function(amount,token,receiver){cov_2pu8zsw70e.f[24]++;cov_2pu8zsw70e.s[186]++;if(token===void 0){cov_2pu8zsw70e.b[47][0]++;cov_2pu8zsw70e.s[187]++;token=constants_1.ADDRESS_ZERO;}else{cov_2pu8zsw70e.b[47][1]++;}cov_2pu8zsw70e.s[188]++;if(receiver===void 0){cov_2pu8zsw70e.b[48][0]++;cov_2pu8zsw70e.s[189]++;receiver=exports.user;}else{cov_2pu8zsw70e.b[48][1]++;}cov_2pu8zsw70e.s[190]++;return __awaiter(this,void 0,void 0,function(){cov_2pu8zsw70e.f[25]++;var channelID,channel,_a,_b,_c,_d,_e,_f,_g,_h;cov_2pu8zsw70e.s[191]++;return __generator(this,function(_j){cov_2pu8zsw70e.f[26]++;cov_2pu8zsw70e.s[192]++;switch(_j.label){case 0:cov_2pu8zsw70e.b[49][0]++;cov_2pu8zsw70e.s[193]++;this.checkInitialized();cov_2pu8zsw70e.s[194]++;console.log('start withdraw with params:  amount: [%s], token: [%s]',amount+'',token);cov_2pu8zsw70e.s[195]++;if(!exports.web3_10.utils.isAddress(token)){cov_2pu8zsw70e.b[50][0]++;cov_2pu8zsw70e.s[196]++;throw new Error("token: ["+token+"] is not a valid address");}else{cov_2pu8zsw70e.b[50][1]++;}cov_2pu8zsw70e.s[197]++;amount=exports.web3_10.utils.toBN(amount).toString();cov_2pu8zsw70e.s[198]++;return[4,exports.ethPN.methods.getChannelID(exports.user,token).call()];case 1:cov_2pu8zsw70e.b[49][1]++;cov_2pu8zsw70e.s[199]++;channelID=_j.sent();cov_2pu8zsw70e.s[200]++;return[4,exports.appPN.methods.channelMap(channelID).call()];case 2:cov_2pu8zsw70e.b[49][2]++;cov_2pu8zsw70e.s[201]++;channel=_j.sent();cov_2pu8zsw70e.s[202]++;if(exports.web3_10.utils.toBN(channel.userBalance).lt(exports.web3_10.utils.toBN(amount))){cov_2pu8zsw70e.b[51][0]++;cov_2pu8zsw70e.s[203]++;throw new Error('withdraw amount exceeds the balance');}else{cov_2pu8zsw70e.b[51][1]++;}cov_2pu8zsw70e.s[204]++;if(!exports.web3_10.utils.toBN(channel.userBalance).gt(exports.web3_10.utils.toBN(amount))){cov_2pu8zsw70e.b[52][0]++;cov_2pu8zsw70e.s[205]++;return[3,5];}else{cov_2pu8zsw70e.b[52][1]++;}cov_2pu8zsw70e.s[206]++;if(Number(channel.status)!==constants_1.CHANNEL_STATUS.CHANNEL_STATUS_OPEN){cov_2pu8zsw70e.b[53][0]++;cov_2pu8zsw70e.s[207]++;throw new Error('channel status is not open');}else{cov_2pu8zsw70e.b[53][1]++;}cov_2pu8zsw70e.s[208]++;console.log('call userProposeWithdraw');cov_2pu8zsw70e.s[209]++;_a=common_1.sendAppTx;cov_2pu8zsw70e.s[210]++;_c=(_b=exports.appPN.methods).userProposeWithdraw;cov_2pu8zsw70e.s[211]++;_d=[channelID,amount,exports.user];cov_2pu8zsw70e.s[212]++;return[4,common_1.getLCB(exports.web3_10.eth,'eth')];case 3:cov_2pu8zsw70e.b[49][3]++;cov_2pu8zsw70e.s[213]++;return[4,_a.apply(void 0,[_c.apply(_b,_d.concat([_j.sent()]))])];case 4:cov_2pu8zsw70e.b[49][4]++;cov_2pu8zsw70e.s[214]++;return[2,_j.sent()];case 5:cov_2pu8zsw70e.b[49][5]++;cov_2pu8zsw70e.s[215]++;if(!(Number(channel.status)===constants_1.CHANNEL_STATUS.CHANNEL_STATUS_PENDING_CO_SETTLE)){cov_2pu8zsw70e.b[54][0]++;cov_2pu8zsw70e.s[216]++;return[3,7];}else{cov_2pu8zsw70e.b[54][1]++;}cov_2pu8zsw70e.s[217]++;console.log('call ethSubmitCooperativeSettle');cov_2pu8zsw70e.s[218]++;return[4,cita_1.ethMethods.ethSubmitCooperativeSettle(channelID)];case 6:cov_2pu8zsw70e.b[49][6]++;cov_2pu8zsw70e.s[219]++;return[2,_j.sent()];case 7:cov_2pu8zsw70e.b[49][7]++;cov_2pu8zsw70e.s[220]++;console.log('call proposeCooperativeSettle',amount);cov_2pu8zsw70e.s[221]++;_e=common_1.sendAppTx;cov_2pu8zsw70e.s[222]++;_g=(_f=exports.appPN.methods).proposeCooperativeSettle;cov_2pu8zsw70e.s[223]++;_h=[channelID,amount];cov_2pu8zsw70e.s[224]++;return[4,common_1.getLCB(exports.web3_10.eth,'eth')];case 8:cov_2pu8zsw70e.b[49][8]++;cov_2pu8zsw70e.s[225]++;return[4,_e.apply(void 0,[_g.apply(_f,_h.concat([_j.sent()]))])];case 9:cov_2pu8zsw70e.b[49][9]++;cov_2pu8zsw70e.s[226]++;return[2,_j.sent()];}});});};cov_2pu8zsw70e.s[227]++;L2.prototype.forceWithdraw=function(token){cov_2pu8zsw70e.f[27]++;cov_2pu8zsw70e.s[228]++;if(token===void 0){cov_2pu8zsw70e.b[55][0]++;cov_2pu8zsw70e.s[229]++;token=constants_1.ADDRESS_ZERO;}else{cov_2pu8zsw70e.b[55][1]++;}cov_2pu8zsw70e.s[230]++;return __awaiter(this,void 0,void 0,function(){cov_2pu8zsw70e.f[28]++;var channelID,channel,_a,_b,balance,nonce,additionalHash,partnerSignature,_c,inAmount,inNonce,regulatorSignature,providerSignature,data;cov_2pu8zsw70e.s[231]++;return __generator(this,function(_d){cov_2pu8zsw70e.f[29]++;cov_2pu8zsw70e.s[232]++;switch(_d.label){case 0:cov_2pu8zsw70e.b[56][0]++;cov_2pu8zsw70e.s[233]++;this.checkInitialized();cov_2pu8zsw70e.s[234]++;console.log('start forceWithdraw with params: token: [%s]',token);cov_2pu8zsw70e.s[235]++;if(!exports.web3_10.utils.isAddress(token)){cov_2pu8zsw70e.b[57][0]++;cov_2pu8zsw70e.s[236]++;throw new Error("token: ["+token+"] is not a valid address");}else{cov_2pu8zsw70e.b[57][1]++;}cov_2pu8zsw70e.s[237]++;return[4,exports.ethPN.methods.getChannelID(exports.user,token).call()];case 1:cov_2pu8zsw70e.b[56][1]++;cov_2pu8zsw70e.s[238]++;channelID=_d.sent();cov_2pu8zsw70e.s[239]++;return[4,exports.ethPN.methods.channels(channelID).call()];case 2:cov_2pu8zsw70e.b[56][2]++;cov_2pu8zsw70e.s[240]++;channel=_d.sent();cov_2pu8zsw70e.s[241]++;if(Number(channel.status)!==constants_1.CHANNEL_STATUS.CHANNEL_STATUS_OPEN){cov_2pu8zsw70e.b[58][0]++;cov_2pu8zsw70e.s[242]++;throw new Error('eth channel status is not open, can not force withdraw');}else{cov_2pu8zsw70e.b[58][1]++;}cov_2pu8zsw70e.s[243]++;return[4,Promise.all([exports.appPN.methods.balanceProofMap(channelID,exports.user).call(),exports.appPN.methods.rebalanceProofMap(channelID).call()])];case 3:cov_2pu8zsw70e.b[56][3]++;cov_2pu8zsw70e.s[244]++;_a=_d.sent(),_b=_a[0],balance=_b.balance,nonce=_b.nonce,additionalHash=_b.additionalHash,partnerSignature=_b.signature,_c=_a[1],inAmount=_c.amount,inNonce=_c.nonce,regulatorSignature=_c.regulatorSignature,providerSignature=_c.providerSignature;cov_2pu8zsw70e.s[245]++;partnerSignature=(cov_2pu8zsw70e.b[59][0]++,partnerSignature)||(cov_2pu8zsw70e.b[59][1]++,'0x0');cov_2pu8zsw70e.s[246]++;regulatorSignature=(cov_2pu8zsw70e.b[60][0]++,regulatorSignature)||(cov_2pu8zsw70e.b[60][1]++,'0x0');cov_2pu8zsw70e.s[247]++;providerSignature=(cov_2pu8zsw70e.b[61][0]++,providerSignature)||(cov_2pu8zsw70e.b[61][1]++,'0x0');cov_2pu8zsw70e.s[248]++;console.log('force-close params: channelID: [%s], balance: [%s], nonce: [%s], additionalHash: [%s], partnerSignature: [%s], inAmount: [%s], inNonce: [%s], regulatorSignature: [%s], providerSignature: [%s] ',channelID,balance,nonce,additionalHash,partnerSignature,inAmount,inNonce,regulatorSignature,providerSignature);cov_2pu8zsw70e.s[249]++;data=exports.ethPN.methods.closeChannel(channelID,balance,nonce,additionalHash,partnerSignature,inAmount,inNonce,regulatorSignature,providerSignature).encodeABI();cov_2pu8zsw70e.s[250]++;return[4,common_1.sendEthTx(exports.web3_outer,exports.user,exports.ethPN.options.address,0,data)];case 4:cov_2pu8zsw70e.b[56][4]++;cov_2pu8zsw70e.s[251]++;return[2,_d.sent()];}});});};cov_2pu8zsw70e.s[252]++;L2.prototype.transfer=function(to,amount,token){cov_2pu8zsw70e.f[30]++;cov_2pu8zsw70e.s[253]++;if(token===void 0){cov_2pu8zsw70e.b[62][0]++;cov_2pu8zsw70e.s[254]++;token=constants_1.ADDRESS_ZERO;}else{cov_2pu8zsw70e.b[62][1]++;}cov_2pu8zsw70e.s[255]++;return __awaiter(this,void 0,void 0,function(){cov_2pu8zsw70e.f[31]++;var _a,isAddress,toBN,channelID,channel,_b,balance,nonce,additionalHash,signature;cov_2pu8zsw70e.s[256]++;return __generator(this,function(_c){cov_2pu8zsw70e.f[32]++;cov_2pu8zsw70e.s[257]++;switch(_c.label){case 0:cov_2pu8zsw70e.b[63][0]++;cov_2pu8zsw70e.s[258]++;this.checkInitialized();cov_2pu8zsw70e.s[259]++;console.log('start transfer with params: to: [%s], amount: [%s], token: [%s]',to,amount+'',token);cov_2pu8zsw70e.s[260]++;_a=exports.web3_10.utils,isAddress=_a.isAddress,toBN=_a.toBN;cov_2pu8zsw70e.s[261]++;if(!isAddress(token)){cov_2pu8zsw70e.b[64][0]++;cov_2pu8zsw70e.s[262]++;throw new Error("token: ["+token+"] is not a valid address");}else{cov_2pu8zsw70e.b[64][1]++;}cov_2pu8zsw70e.s[263]++;return[4,exports.ethPN.methods.getChannelID(exports.user,token).call()];case 1:cov_2pu8zsw70e.b[63][1]++;cov_2pu8zsw70e.s[264]++;channelID=_c.sent();cov_2pu8zsw70e.s[265]++;return[4,exports.appPN.methods.channelMap(channelID).call()];case 2:cov_2pu8zsw70e.b[63][2]++;cov_2pu8zsw70e.s[266]++;channel=_c.sent();cov_2pu8zsw70e.s[267]++;if(Number(channel.status)!==constants_1.CHANNEL_STATUS.CHANNEL_STATUS_OPEN){cov_2pu8zsw70e.b[65][0]++;cov_2pu8zsw70e.s[268]++;throw new Error('app channel status is not open, can not transfer now');}else{cov_2pu8zsw70e.b[65][1]++;}cov_2pu8zsw70e.s[269]++;if(toBN(channel.userBalance).lt(exports.web3_10.utils.toBN(amount))){cov_2pu8zsw70e.b[66][0]++;cov_2pu8zsw70e.s[270]++;throw new Error("user's balance is less than transfer amount");}else{cov_2pu8zsw70e.b[66][1]++;}cov_2pu8zsw70e.s[271]++;return[4,exports.appPN.methods.balanceProofMap(channelID,exports.cp).call()];case 3:cov_2pu8zsw70e.b[63][3]++;cov_2pu8zsw70e.s[272]++;_b=_c.sent(),balance=_b.balance,nonce=_b.nonce;cov_2pu8zsw70e.s[273]++;balance=toBN(amount).add(toBN(balance)).toString();cov_2pu8zsw70e.s[274]++;nonce=toBN(nonce).add(toBN(1)).toString();cov_2pu8zsw70e.s[275]++;additionalHash='0x0';cov_2pu8zsw70e.s[276]++;return[4,common_1.prepareSignatureForTransfer(exports.web3_outer,exports.ethPN.options.address,channelID,balance,nonce,additionalHash,exports.user)];case 4:cov_2pu8zsw70e.b[63][4]++;cov_2pu8zsw70e.s[277]++;signature=_c.sent();cov_2pu8zsw70e.s[278]++;console.log('start Submit Transfer');cov_2pu8zsw70e.s[279]++;return[4,common_1.sendAppTx(exports.appPN.methods.transfer(to,channelID,balance,nonce,additionalHash,signature))];case 5:cov_2pu8zsw70e.b[63][5]++;cov_2pu8zsw70e.s[280]++;return[2,_c.sent()];}});});};cov_2pu8zsw70e.s[281]++;L2.prototype.startSession=function(sessionID){cov_2pu8zsw70e.f[33]++;cov_2pu8zsw70e.s[282]++;return __awaiter(this,void 0,void 0,function(){cov_2pu8zsw70e.f[34]++;var repeatTimes,session,i;cov_2pu8zsw70e.s[283]++;return __generator(this,function(_a){cov_2pu8zsw70e.f[35]++;cov_2pu8zsw70e.s[284]++;switch(_a.label){case 0:cov_2pu8zsw70e.b[67][0]++;cov_2pu8zsw70e.s[285]++;this.checkInitialized();cov_2pu8zsw70e.s[286]++;repeatTimes=10;cov_2pu8zsw70e.s[287]++;i=0;cov_2pu8zsw70e.s[288]++;_a.label=1;case 1:cov_2pu8zsw70e.b[67][1]++;cov_2pu8zsw70e.s[289]++;if(!(i<repeatTimes)){cov_2pu8zsw70e.b[68][0]++;cov_2pu8zsw70e.s[290]++;return[3,5];}else{cov_2pu8zsw70e.b[68][1]++;}cov_2pu8zsw70e.s[291]++;return[4,session_2.default.getSessionById(sessionID)];case 2:cov_2pu8zsw70e.b[67][2]++;cov_2pu8zsw70e.s[292]++;session=_a.sent();cov_2pu8zsw70e.s[293]++;if(session){cov_2pu8zsw70e.b[69][0]++;cov_2pu8zsw70e.s[294]++;return[3,5];}else{cov_2pu8zsw70e.b[69][1]++;}cov_2pu8zsw70e.s[295]++;return[4,common_1.delay(1000)];case 3:cov_2pu8zsw70e.b[67][3]++;cov_2pu8zsw70e.s[296]++;_a.sent();cov_2pu8zsw70e.s[297]++;_a.label=4;case 4:cov_2pu8zsw70e.b[67][4]++;cov_2pu8zsw70e.s[298]++;i++;cov_2pu8zsw70e.s[299]++;return[3,1];case 5:cov_2pu8zsw70e.b[67][5]++;cov_2pu8zsw70e.s[300]++;if(!session){cov_2pu8zsw70e.b[70][0]++;cov_2pu8zsw70e.s[301]++;throw new Error('session not found');}else{cov_2pu8zsw70e.b[70][1]++;}cov_2pu8zsw70e.s[302]++;return[2,session];}});});};cov_2pu8zsw70e.s[303]++;L2.prototype.getSessionBySessionID=function(sessionID){cov_2pu8zsw70e.f[36]++;cov_2pu8zsw70e.s[304]++;return __awaiter(this,void 0,void 0,function(){cov_2pu8zsw70e.f[37]++;cov_2pu8zsw70e.s[305]++;return __generator(this,function(_a){cov_2pu8zsw70e.f[38]++;cov_2pu8zsw70e.s[306]++;switch(_a.label){case 0:cov_2pu8zsw70e.b[71][0]++;cov_2pu8zsw70e.s[307]++;return[4,session_2.default.getSessionById(sessionID)];case 1:cov_2pu8zsw70e.b[71][1]++;cov_2pu8zsw70e.s[308]++;return[2,_a.sent()];}});});};cov_2pu8zsw70e.s[309]++;L2.prototype.getMessagesBySessionID=function(sessionID){cov_2pu8zsw70e.f[39]++;cov_2pu8zsw70e.s[310]++;return __awaiter(this,void 0,void 0,function(){cov_2pu8zsw70e.f[40]++;cov_2pu8zsw70e.s[311]++;return __generator(this,function(_a){cov_2pu8zsw70e.f[41]++;cov_2pu8zsw70e.s[312]++;switch(_a.label){case 0:cov_2pu8zsw70e.b[72][0]++;cov_2pu8zsw70e.s[313]++;return[4,session_2.default.getMessagesBySessionID(sessionID)];case 1:cov_2pu8zsw70e.b[72][1]++;cov_2pu8zsw70e.s[314]++;return[2,_a.sent()];}});});};cov_2pu8zsw70e.s[315]++;L2.prototype.getPlayersBySessionID=function(sessionID){cov_2pu8zsw70e.f[42]++;cov_2pu8zsw70e.s[316]++;return __awaiter(this,void 0,void 0,function(){cov_2pu8zsw70e.f[43]++;cov_2pu8zsw70e.s[317]++;return __generator(this,function(_a){cov_2pu8zsw70e.f[44]++;cov_2pu8zsw70e.s[318]++;switch(_a.label){case 0:cov_2pu8zsw70e.b[73][0]++;cov_2pu8zsw70e.s[319]++;return[4,session_2.default.getPlayersBySessionID(sessionID)];case 1:cov_2pu8zsw70e.b[73][1]++;cov_2pu8zsw70e.s[320]++;return[2,_a.sent()];}});});};cov_2pu8zsw70e.s[321]++;L2.prototype.getBalance=function(token){cov_2pu8zsw70e.f[45]++;cov_2pu8zsw70e.s[322]++;if(token===void 0){cov_2pu8zsw70e.b[74][0]++;cov_2pu8zsw70e.s[323]++;token=constants_1.ADDRESS_ZERO;}else{cov_2pu8zsw70e.b[74][1]++;}cov_2pu8zsw70e.s[324]++;return __awaiter(this,void 0,void 0,function(){cov_2pu8zsw70e.f[46]++;var channelID,channel;cov_2pu8zsw70e.s[325]++;return __generator(this,function(_a){cov_2pu8zsw70e.f[47]++;cov_2pu8zsw70e.s[326]++;switch(_a.label){case 0:cov_2pu8zsw70e.b[75][0]++;cov_2pu8zsw70e.s[327]++;this.checkInitialized();cov_2pu8zsw70e.s[328]++;return[4,exports.ethPN.methods.getChannelID(exports.user,token).call()];case 1:cov_2pu8zsw70e.b[75][1]++;cov_2pu8zsw70e.s[329]++;channelID=_a.sent();cov_2pu8zsw70e.s[330]++;return[4,exports.appPN.methods.channelMap(channelID).call()];case 2:cov_2pu8zsw70e.b[75][2]++;cov_2pu8zsw70e.s[331]++;channel=_a.sent();cov_2pu8zsw70e.s[332]++;return[2,channel.userBalance];}});});};cov_2pu8zsw70e.s[333]++;L2.prototype.getChannelInfo=function(token){cov_2pu8zsw70e.f[48]++;cov_2pu8zsw70e.s[334]++;if(token===void 0){cov_2pu8zsw70e.b[76][0]++;cov_2pu8zsw70e.s[335]++;token=constants_1.ADDRESS_ZERO;}else{cov_2pu8zsw70e.b[76][1]++;}cov_2pu8zsw70e.s[336]++;return __awaiter(this,void 0,void 0,function(){cov_2pu8zsw70e.f[49]++;var channelID,ethChannel,channel;cov_2pu8zsw70e.s[337]++;return __generator(this,function(_a){cov_2pu8zsw70e.f[50]++;cov_2pu8zsw70e.s[338]++;switch(_a.label){case 0:cov_2pu8zsw70e.b[77][0]++;cov_2pu8zsw70e.s[339]++;this.checkInitialized();cov_2pu8zsw70e.s[340]++;return[4,exports.ethPN.methods.getChannelID(exports.user,token).call()];case 1:cov_2pu8zsw70e.b[77][1]++;cov_2pu8zsw70e.s[341]++;channelID=_a.sent();cov_2pu8zsw70e.s[342]++;return[4,exports.ethPN.methods.channels(channelID).call()];case 2:cov_2pu8zsw70e.b[77][2]++;cov_2pu8zsw70e.s[343]++;ethChannel=_a.sent();cov_2pu8zsw70e.s[344]++;console.log('ChannelID is ',channelID,ethChannel);cov_2pu8zsw70e.s[345]++;return[4,exports.appPN.methods.channelMap(channelID).call()];case 3:cov_2pu8zsw70e.b[77][3]++;cov_2pu8zsw70e.s[346]++;channel=_a.sent();cov_2pu8zsw70e.s[347]++;return[2,__assign({channelID:channelID},channel)];}});});};cov_2pu8zsw70e.s[348]++;L2.prototype.getAllTXs=function(token){cov_2pu8zsw70e.f[51]++;cov_2pu8zsw70e.s[349]++;if(token===void 0){cov_2pu8zsw70e.b[78][0]++;cov_2pu8zsw70e.s[350]++;token=constants_1.ADDRESS_ZERO;}else{cov_2pu8zsw70e.b[78][1]++;}cov_2pu8zsw70e.s[351]++;return __awaiter(this,void 0,void 0,function(){cov_2pu8zsw70e.f[52]++;var _a,inTXs,outTXs,cmpNonce,lastBalance,getTX;cov_2pu8zsw70e.s[352]++;return __generator(this,function(_b){cov_2pu8zsw70e.f[53]++;cov_2pu8zsw70e.s[353]++;switch(_b.label){case 0:cov_2pu8zsw70e.b[79][0]++;cov_2pu8zsw70e.s[354]++;this.checkInitialized();cov_2pu8zsw70e.s[355]++;return[4,Promise.all([exports.appPN.getPastEvents('Transfer',{filter:{to:exports.user},fromBlock:0,toBlock:'latest'}),exports.appPN.getPastEvents('Transfer',{filter:{from:exports.user},fromBlock:0,toBlock:'latest'})])];case 1:cov_2pu8zsw70e.b[79][1]++;cov_2pu8zsw70e.s[356]++;_a=_b.sent(),inTXs=_a[0],outTXs=_a[1];cov_2pu8zsw70e.s[357]++;cmpNonce=function(key){cov_2pu8zsw70e.f[54]++;cov_2pu8zsw70e.s[358]++;return function(a,b){cov_2pu8zsw70e.f[55]++;cov_2pu8zsw70e.s[359]++;return a[key]-b[key];};};cov_2pu8zsw70e.s[360]++;lastBalance=exports.web3_10.utils.toBN(0);cov_2pu8zsw70e.s[361]++;getTX=function(tx){cov_2pu8zsw70e.f[56]++;var _a=(cov_2pu8zsw70e.s[362]++,tx.returnValues),channelID=(cov_2pu8zsw70e.s[363]++,_a.channelID),balance=(cov_2pu8zsw70e.s[364]++,_a.balance),rest=(cov_2pu8zsw70e.s[365]++,__rest(_a,["channelID","balance"]));cov_2pu8zsw70e.s[366]++;balance=new exports.web3_10.utils.toBN(balance);var amount=(cov_2pu8zsw70e.s[367]++,balance.sub(lastBalance).toString());cov_2pu8zsw70e.s[368]++;lastBalance=balance;cov_2pu8zsw70e.s[369]++;return __assign({id:tx.transactionHash,amount:amount},rest);};cov_2pu8zsw70e.s[370]++;inTXs=inTXs.sort(cmpNonce('nonce')).map(function(tx){cov_2pu8zsw70e.f[57]++;cov_2pu8zsw70e.s[371]++;return getTX(tx);});cov_2pu8zsw70e.s[372]++;outTXs=outTXs.sort(cmpNonce('nonce')).map(function(tx){cov_2pu8zsw70e.f[58]++;cov_2pu8zsw70e.s[373]++;return getTX(tx);});cov_2pu8zsw70e.s[374]++;return[2,{in:inTXs,out:outTXs}];}});});};cov_2pu8zsw70e.s[375]++;L2.prototype.getAllPuppets=function(){cov_2pu8zsw70e.f[59]++;cov_2pu8zsw70e.s[376]++;return __awaiter(this,void 0,void 0,function(){cov_2pu8zsw70e.f[60]++;var puppetList,n,_a,address,enabled,err_1;cov_2pu8zsw70e.s[377]++;return __generator(this,function(_b){cov_2pu8zsw70e.f[61]++;cov_2pu8zsw70e.s[378]++;switch(_b.label){case 0:cov_2pu8zsw70e.b[80][0]++;cov_2pu8zsw70e.s[379]++;this.checkInitialized();cov_2pu8zsw70e.s[380]++;puppetList=[];cov_2pu8zsw70e.s[381]++;n=0;cov_2pu8zsw70e.s[382]++;_b.label=1;case 1:cov_2pu8zsw70e.b[80][1]++;cov_2pu8zsw70e.s[383]++;if(false){}else{cov_2pu8zsw70e.b[81][1]++;}cov_2pu8zsw70e.s[385]++;_b.label=2;case 2:cov_2pu8zsw70e.b[80][2]++;cov_2pu8zsw70e.s[386]++;_b.trys.push([2,4,,5]);cov_2pu8zsw70e.s[387]++;return[4,exports.appPN.methods.puppets(exports.user,n++).call()];case 3:cov_2pu8zsw70e.b[80][3]++;cov_2pu8zsw70e.s[388]++;_a=_b.sent(),address=_a.p,enabled=_a.enabled;cov_2pu8zsw70e.s[389]++;puppetList.push({address:address,enabled:enabled});cov_2pu8zsw70e.s[390]++;return[3,5];case 4:cov_2pu8zsw70e.b[80][4]++;cov_2pu8zsw70e.s[391]++;err_1=_b.sent();cov_2pu8zsw70e.s[392]++;return[3,6];case 5:cov_2pu8zsw70e.b[80][5]++;cov_2pu8zsw70e.s[393]++;return[3,1];case 6:cov_2pu8zsw70e.b[80][6]++;cov_2pu8zsw70e.s[394]++;console.log(puppetList);cov_2pu8zsw70e.s[395]++;return[2,puppetList];}});});};cov_2pu8zsw70e.s[396]++;L2.prototype.disablePuppet=function(puppet){cov_2pu8zsw70e.f[62]++;cov_2pu8zsw70e.s[397]++;return __awaiter(this,void 0,void 0,function(){cov_2pu8zsw70e.f[63]++;var data;cov_2pu8zsw70e.s[398]++;return __generator(this,function(_a){cov_2pu8zsw70e.f[64]++;cov_2pu8zsw70e.s[399]++;switch(_a.label){case 0:cov_2pu8zsw70e.b[82][0]++;cov_2pu8zsw70e.s[400]++;this.checkInitialized();cov_2pu8zsw70e.s[401]++;data=exports.ethPN.methods.disablePuppet(puppet).encodeABI();cov_2pu8zsw70e.s[402]++;return[4,common_1.sendEthTx(exports.web3_outer,exports.user,exports.ethPN.options.address,0,data)];case 1:cov_2pu8zsw70e.b[82][1]++;cov_2pu8zsw70e.s[403]++;return[2,_a.sent()];}});});};cov_2pu8zsw70e.s[404]++;L2.prototype.on=function(event,callback){cov_2pu8zsw70e.f[65]++;cov_2pu8zsw70e.s[405]++;exports.callbacks.set(event,callback);};cov_2pu8zsw70e.s[406]++;L2.prototype.checkInitialized=function(){cov_2pu8zsw70e.f[66]++;cov_2pu8zsw70e.s[407]++;if(!this.initialized){cov_2pu8zsw70e.b[83][0]++;cov_2pu8zsw70e.s[408]++;throw new Error('L2 is not initialized');}else{cov_2pu8zsw70e.b[83][1]++;}};cov_2pu8zsw70e.s[409]++;L2.prototype.initPuppet=function(){cov_2pu8zsw70e.f[67]++;cov_2pu8zsw70e.s[410]++;return __awaiter(this,void 0,void 0,function(){cov_2pu8zsw70e.f[68]++;var puppetStatus,data;cov_2pu8zsw70e.s[411]++;return __generator(this,function(_a){cov_2pu8zsw70e.f[69]++;cov_2pu8zsw70e.s[412]++;switch(_a.label){case 0:cov_2pu8zsw70e.b[84][0]++;cov_2pu8zsw70e.s[413]++;exports.puppet=puppet_1.default.get(exports.user);cov_2pu8zsw70e.s[414]++;if(!exports.puppet){cov_2pu8zsw70e.b[85][0]++;cov_2pu8zsw70e.s[415]++;return[3,2];}else{cov_2pu8zsw70e.b[85][1]++;}cov_2pu8zsw70e.s[416]++;console.log('puppet is ',exports.puppet);cov_2pu8zsw70e.s[417]++;return[4,exports.ethPN.methods.puppetMap(exports.user,exports.puppet.getAccount().address).call()];case 1:cov_2pu8zsw70e.b[84][1]++;cov_2pu8zsw70e.s[418]++;puppetStatus=_a.sent();cov_2pu8zsw70e.s[419]++;console.log('puppetStatus',puppetStatus);cov_2pu8zsw70e.s[420]++;if(Number(puppetStatus)===constants_1.PUPPET_STATUS.ENABLED){cov_2pu8zsw70e.b[86][0]++;cov_2pu8zsw70e.s[421]++;console.log('puppet is active');cov_2pu8zsw70e.s[422]++;return[2];}else{cov_2pu8zsw70e.b[86][1]++;}cov_2pu8zsw70e.s[423]++;_a.label=2;case 2:cov_2pu8zsw70e.b[84][2]++;cov_2pu8zsw70e.s[424]++;exports.puppet=puppet_1.default.create(exports.user);cov_2pu8zsw70e.s[425]++;data=exports.ethPN.methods.addPuppet(exports.puppet.getAccount().address).encodeABI();cov_2pu8zsw70e.s[426]++;return[4,common_1.sendEthTx(exports.web3_outer,exports.user,exports.ethPN.options.address,0,data)];case 3:cov_2pu8zsw70e.b[84][3]++;cov_2pu8zsw70e.s[427]++;_a.sent();cov_2pu8zsw70e.s[428]++;return[2];}});});};cov_2pu8zsw70e.s[429]++;L2.prototype.initListeners=function(){cov_2pu8zsw70e.f[70]++;cov_2pu8zsw70e.s[430]++;return __awaiter(this,void 0,void 0,function(){cov_2pu8zsw70e.f[71]++;var appWatchList;cov_2pu8zsw70e.s[431]++;return __generator(this,function(_a){cov_2pu8zsw70e.f[72]++;cov_2pu8zsw70e.s[432]++;(cov_2pu8zsw70e.b[87][0]++,this.ethWatcher)&&(cov_2pu8zsw70e.b[87][1]++,this.ethWatcher.stop());cov_2pu8zsw70e.s[433]++;(cov_2pu8zsw70e.b[88][0]++,this.appWatcher)&&(cov_2pu8zsw70e.b[88][1]++,this.appWatcher.stop());cov_2pu8zsw70e.s[434]++;appWatchList=[{contract:exports.appPN,listener:cita_1.events},{contract:exports.appSession,listener:session_1.events}];cov_2pu8zsw70e.s[435]++;this.appWatcher=new httpwatcher_1.default(exports.cita.base,1000,appWatchList);cov_2pu8zsw70e.s[436]++;this.appWatcher.start();cov_2pu8zsw70e.s[437]++;return[2];});});};cov_2pu8zsw70e.s[438]++;L2.prototype.initMissingEvent=function(){cov_2pu8zsw70e.f[73]++;cov_2pu8zsw70e.s[439]++;return __awaiter(this,void 0,void 0,function(){cov_2pu8zsw70e.f[74]++;var allChannelOpenedEvent,_i,allChannelOpenedEvent_1,event_1,returnValues,channelID,channel;cov_2pu8zsw70e.s[440]++;return __generator(this,function(_a){cov_2pu8zsw70e.f[75]++;cov_2pu8zsw70e.s[441]++;switch(_a.label){case 0:cov_2pu8zsw70e.b[89][0]++;cov_2pu8zsw70e.s[442]++;console.log('start initMissingEvent');cov_2pu8zsw70e.s[443]++;return[4,exports.ethPN.getPastEvents('ChannelOpened',{filter:{user:exports.user},fromBlock:0,toBlock:'latest'})];case 1:cov_2pu8zsw70e.b[89][1]++;cov_2pu8zsw70e.s[444]++;allChannelOpenedEvent=_a.sent();cov_2pu8zsw70e.s[445]++;console.log('getAllChannelOpenedEvent length',allChannelOpenedEvent.length);cov_2pu8zsw70e.s[446]++;_i=0,allChannelOpenedEvent_1=allChannelOpenedEvent;cov_2pu8zsw70e.s[447]++;_a.label=2;case 2:cov_2pu8zsw70e.b[89][2]++;cov_2pu8zsw70e.s[448]++;if(!(_i<allChannelOpenedEvent_1.length)){cov_2pu8zsw70e.b[90][0]++;cov_2pu8zsw70e.s[449]++;return[3,6];}else{cov_2pu8zsw70e.b[90][1]++;}cov_2pu8zsw70e.s[450]++;event_1=allChannelOpenedEvent_1[_i];cov_2pu8zsw70e.s[451]++;returnValues=event_1.returnValues;cov_2pu8zsw70e.s[452]++;channelID=returnValues.channelID;cov_2pu8zsw70e.s[453]++;return[4,exports.ethPN.methods.channels(channelID).call()];case 3:cov_2pu8zsw70e.b[89][3]++;cov_2pu8zsw70e.s[454]++;channel=_a.sent();cov_2pu8zsw70e.s[455]++;if(!(Number(channel.status)===constants_1.CHANNEL_STATUS.CHANNEL_STATUS_OPEN)){cov_2pu8zsw70e.b[91][0]++;cov_2pu8zsw70e.s[456]++;return[3,5];}else{cov_2pu8zsw70e.b[91][1]++;}cov_2pu8zsw70e.s[457]++;return[4,cita_1.appMethods.appSubmitGuardProof(channelID,exports.user)];case 4:cov_2pu8zsw70e.b[89][4]++;cov_2pu8zsw70e.s[458]++;_a.sent();cov_2pu8zsw70e.s[459]++;_a.label=5;case 5:cov_2pu8zsw70e.b[89][5]++;cov_2pu8zsw70e.s[460]++;_i++;cov_2pu8zsw70e.s[461]++;return[3,2];case 6:cov_2pu8zsw70e.b[89][6]++;cov_2pu8zsw70e.s[462]++;return[2];}});});};cov_2pu8zsw70e.s[463]++;return L2;}());cov_2pu8zsw70e.s[464]++;exports.L2=L2;cov_2pu8zsw70e.s[465]++;exports.default=L2;

/***/ }),

/***/ "./puppet.ts":
/*!*******************!*\
  !*** ./puppet.ts ***!
  \*******************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var cov_utolq1av1=function(){var path="/Users/zhang/work/DigiCash/l2app/l2.js/src/puppet.ts",hash="b722780b5e997bd85ac7ed1cc327ce1c27bba141",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/zhang/work/DigiCash/l2app/l2.js/src/puppet.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:25},end:{line:3,column:52}},"2":{start:{line:4,column:13},end:{line:4,column:30}},"3":{start:{line:5,column:19},end:{line:5,column:58}},"4":{start:{line:6,column:14},end:{line:32,column:3}},"5":{start:{line:9,column:4},end:{line:17,column:6}},"6":{start:{line:10,column:21},end:{line:10,column:33}},"7":{start:{line:11,column:18},end:{line:11,column:63}},"8":{start:{line:12,column:8},end:{line:12,column:76}},"9":{start:{line:13,column:8},end:{line:13,column:61}},"10":{start:{line:14,column:8},end:{line:14,column:86}},"11":{start:{line:15,column:8},end:{line:15,column:68}},"12":{start:{line:16,column:8},end:{line:16,column:22}},"13":{start:{line:18,column:4},end:{line:27,column:6}},"14":{start:{line:19,column:18},end:{line:19,column:72}},"15":{start:{line:20,column:8},end:{line:22,column:9}},"16":{start:{line:21,column:12},end:{line:21,column:24}},"17":{start:{line:23,column:8},end:{line:23,column:97}},"18":{start:{line:24,column:21},end:{line:24,column:33}},"19":{start:{line:25,column:8},end:{line:25,column:76}},"20":{start:{line:26,column:8},end:{line:26,column:22}},"21":{start:{line:28,column:4},end:{line:30,column:6}},"22":{start:{line:29,column:8},end:{line:29,column:28}},"23":{start:{line:31,column:4},end:{line:31,column:18}},"24":{start:{line:33,column:0},end:{line:33,column:25}},"25":{start:{line:35,column:4},end:{line:35,column:29}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:14},end:{line:6,column:15}},loc:{start:{line:6,column:26},end:{line:32,column:1}},line:6},"1":{name:"Puppet",decl:{start:{line:7,column:13},end:{line:7,column:19}},loc:{start:{line:7,column:22},end:{line:8,column:5}},line:7},"2":{name:"(anonymous_2)",decl:{start:{line:9,column:20},end:{line:9,column:21}},loc:{start:{line:9,column:45},end:{line:17,column:5}},line:9},"3":{name:"(anonymous_3)",decl:{start:{line:18,column:17},end:{line:18,column:18}},loc:{start:{line:18,column:42},end:{line:27,column:5}},line:18},"4":{name:"(anonymous_4)",decl:{start:{line:28,column:34},end:{line:28,column:35}},loc:{start:{line:28,column:46},end:{line:30,column:5}},line:28},"5":{name:"getPassword",decl:{start:{line:34,column:9},end:{line:34,column:20}},loc:{start:{line:34,column:30},end:{line:36,column:1}},line:34}},branchMap:{"0":{loc:{start:{line:20,column:8},end:{line:22,column:9}},type:"if",locations:[{start:{line:20,column:8},end:{line:22,column:9}},{start:{line:20,column:8},end:{line:22,column:9}}],line:20}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0]},inputSourceMap:{version:3,file:"/Users/zhang/work/DigiCash/l2app/l2.js/src/puppet.ts",sourceRoot:"/Users/zhang/work/DigiCash/l2app/l2.js/",sources:["node_modules/source-map-loader/index.js!/Users/zhang/work/DigiCash/l2app/l2.js/src/puppet.ts"],names:[],mappings:";;AAGA,qDAA4C;AAC5C,+BAA8B;AAC9B,2DAAoD;AAGpD;IAGE;IAAuB,CAAC;IAEjB,aAAM,GAAb,UAAc,aAAqB;QACjC,IAAI,MAAM,GAAG,IAAI,MAAM,EAAE,CAAC;QAE1B,IAAI,GAAG,GAAG,WAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,UAAU,CAAC;QACjD,MAAM,CAAC,OAAO,GAAG,WAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;QAE7D,WAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAE9C,GAAG,GAAG,IAAI,0BAAY,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAChE,YAAY,CAAC,OAAO,CAAC,iBAAI,CAAC,aAAa,CAAC,EAAE,GAAG,CAAC,CAAC;QAE/C,OAAO,MAAM,CAAC;IAChB,CAAC;IAEM,UAAG,GAAV,UAAW,aAAqB;QAC9B,IAAI,GAAG,GAAG,YAAY,CAAC,OAAO,CAAC,iBAAI,CAAC,aAAa,CAAC,CAAC,CAAC;QAEpD,IAAI,CAAC,GAAG,EAAE;YACR,OAAO,IAAI,CAAC;SACb;QAED,GAAG,GAAG,IAAI,0BAAY,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC;QAE3E,IAAI,MAAM,GAAG,IAAI,MAAM,EAAE,CAAC;QAC1B,MAAM,CAAC,OAAO,GAAG,WAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;QAE7D,OAAO,MAAM,CAAC;IAChB,CAAC;IAED,2BAAU,GAAV;QACE,OAAO,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;IACH,aAAC;AAAD,CAAC,AArCD,IAqCC;;AAED,SAAS,WAAW,CAAC,OAAe;IAElC,OAAO,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AAC3B,CAAC",sourcesContent:["/**\n * model class of payment network\n */\nimport SimpleCrypto from 'simple-crypto-js';\nimport { cita } from './main';\nimport { sha3 } from 'web3/node_modules/web3-utils';\nimport { Account } from 'web3/node_modules/web3-eth-accounts';\n\nexport default class Puppet {\n  private account: Account;\n\n  private constructor() {}\n\n  static create(masterAddress: string): Puppet {\n    let puppet = new Puppet();\n\n    let key = cita.base.accounts.create().privateKey;\n    puppet.account = cita.base.accounts.privateKeyToAccount(key);\n\n    cita.base.accounts.wallet.add(puppet.account);\n\n    key = new SimpleCrypto(getPassword(masterAddress)).encrypt(key);\n    localStorage.setItem(sha3(masterAddress), key);\n\n    return puppet;\n  }\n\n  static get(masterAddress: string): Puppet | null {\n    let key = localStorage.getItem(sha3(masterAddress));\n\n    if (!key) {\n      return null;\n    }\n\n    key = new SimpleCrypto(getPassword(masterAddress)).decrypt(key).toString();\n\n    let puppet = new Puppet();\n    puppet.account = cita.base.accounts.privateKeyToAccount(key);\n\n    return puppet;\n  }\n\n  getAccount() {\n    return this.account;\n  }\n}\n\nfunction getPassword(address: string) {\n  // use the last 8 characters of master address as password\n  return address.slice(-8);\n}\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_utolq1av1.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var simple_crypto_js_1=(cov_utolq1av1.s[1]++,__webpack_require__(/*! simple-crypto-js */ "simple-crypto-js"));var main_1=(cov_utolq1av1.s[2]++,__webpack_require__(/*! ./main */ "./main.ts"));var web3_utils_1=(cov_utolq1av1.s[3]++,__webpack_require__(/*! web3/node_modules/web3-utils */ "web3/node_modules/web3-utils"));var Puppet=(cov_utolq1av1.s[4]++,function(){cov_utolq1av1.f[0]++;function Puppet(){cov_utolq1av1.f[1]++;}cov_utolq1av1.s[5]++;Puppet.create=function(masterAddress){cov_utolq1av1.f[2]++;var puppet=(cov_utolq1av1.s[6]++,new Puppet());var key=(cov_utolq1av1.s[7]++,main_1.cita.base.accounts.create().privateKey);cov_utolq1av1.s[8]++;puppet.account=main_1.cita.base.accounts.privateKeyToAccount(key);cov_utolq1av1.s[9]++;main_1.cita.base.accounts.wallet.add(puppet.account);cov_utolq1av1.s[10]++;key=new simple_crypto_js_1.default(getPassword(masterAddress)).encrypt(key);cov_utolq1av1.s[11]++;localStorage.setItem(web3_utils_1.sha3(masterAddress),key);cov_utolq1av1.s[12]++;return puppet;};cov_utolq1av1.s[13]++;Puppet.get=function(masterAddress){cov_utolq1av1.f[3]++;var key=(cov_utolq1av1.s[14]++,localStorage.getItem(web3_utils_1.sha3(masterAddress)));cov_utolq1av1.s[15]++;if(!key){cov_utolq1av1.b[0][0]++;cov_utolq1av1.s[16]++;return null;}else{cov_utolq1av1.b[0][1]++;}cov_utolq1av1.s[17]++;key=new simple_crypto_js_1.default(getPassword(masterAddress)).decrypt(key).toString();var puppet=(cov_utolq1av1.s[18]++,new Puppet());cov_utolq1av1.s[19]++;puppet.account=main_1.cita.base.accounts.privateKeyToAccount(key);cov_utolq1av1.s[20]++;return puppet;};cov_utolq1av1.s[21]++;Puppet.prototype.getAccount=function(){cov_utolq1av1.f[4]++;cov_utolq1av1.s[22]++;return this.account;};cov_utolq1av1.s[23]++;return Puppet;}());cov_utolq1av1.s[24]++;exports.default=Puppet;function getPassword(address){cov_utolq1av1.f[5]++;cov_utolq1av1.s[25]++;return address.slice(-8);}

/***/ }),

/***/ "./service/cita.ts":
/*!*************************!*\
  !*** ./service/cita.ts ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var cov_1auhf3rlmu=function(){var path="/Users/zhang/work/DigiCash/l2app/l2.js/src/service/cita.ts",hash="8d36724a81350bfd67202bdc9c9b582d3b0cf9d2",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/zhang/work/DigiCash/l2app/l2.js/src/service/cita.ts",statementMap:{"0":{start:{line:2,column:16},end:{line:9,column:1}},"1":{start:{line:3,column:4},end:{line:8,column:7}},"2":{start:{line:4,column:36},end:{line:4,column:97}},"3":{start:{line:4,column:42},end:{line:4,column:70}},"4":{start:{line:4,column:85},end:{line:4,column:95}},"5":{start:{line:5,column:35},end:{line:5,column:100}},"6":{start:{line:5,column:41},end:{line:5,column:73}},"7":{start:{line:5,column:88},end:{line:5,column:98}},"8":{start:{line:6,column:32},end:{line:6,column:149}},"9":{start:{line:6,column:97},end:{line:6,column:119}},"10":{start:{line:7,column:8},end:{line:7,column:78}},"11":{start:{line:10,column:18},end:{line:36,column:1}},"12":{start:{line:11,column:12},end:{line:11,column:104}},"13":{start:{line:11,column:43},end:{line:11,column:68}},"14":{start:{line:11,column:57},end:{line:11,column:68}},"15":{start:{line:11,column:69},end:{line:11,column:81}},"16":{start:{line:12,column:4},end:{line:12,column:157}},"17":{start:{line:12,column:138},end:{line:12,column:150}},"18":{start:{line:13,column:23},end:{line:13,column:68}},"19":{start:{line:13,column:45},end:{line:13,column:65}},"20":{start:{line:15,column:8},end:{line:15,column:70}},"21":{start:{line:15,column:15},end:{line:15,column:70}},"22":{start:{line:16,column:8},end:{line:33,column:66}},"23":{start:{line:16,column:18},end:{line:33,column:66}},"24":{start:{line:17,column:12},end:{line:17,column:169}},"25":{start:{line:17,column:160},end:{line:17,column:169}},"26":{start:{line:18,column:12},end:{line:18,column:52}},"27":{start:{line:18,column:26},end:{line:18,column:52}},"28":{start:{line:19,column:12},end:{line:31,column:13}},"29":{start:{line:20,column:32},end:{line:20,column:39}},"30":{start:{line:20,column:40},end:{line:20,column:46}},"31":{start:{line:21,column:24},end:{line:21,column:34}},"32":{start:{line:21,column:35},end:{line:21,column:72}},"33":{start:{line:22,column:24},end:{line:22,column:34}},"34":{start:{line:22,column:35},end:{line:22,column:45}},"35":{start:{line:22,column:46},end:{line:22,column:55}},"36":{start:{line:22,column:56},end:{line:22,column:65}},"37":{start:{line:23,column:24},end:{line:23,column:41}},"38":{start:{line:23,column:42},end:{line:23,column:55}},"39":{start:{line:23,column:56},end:{line:23,column:65}},"40":{start:{line:25,column:20},end:{line:25,column:128}},"41":{start:{line:25,column:110},end:{line:25,column:116}},"42":{start:{line:25,column:117},end:{line:25,column:126}},"43":{start:{line:26,column:20},end:{line:26,column:106}},"44":{start:{line:26,column:81},end:{line:26,column:97}},"45":{start:{line:26,column:98},end:{line:26,column:104}},"46":{start:{line:27,column:20},end:{line:27,column:89}},"47":{start:{line:27,column:57},end:{line:27,column:72}},"48":{start:{line:27,column:73},end:{line:27,column:80}},"49":{start:{line:27,column:81},end:{line:27,column:87}},"50":{start:{line:28,column:20},end:{line:28,column:87}},"51":{start:{line:28,column:47},end:{line:28,column:62}},"52":{start:{line:28,column:63},end:{line:28,column:78}},"53":{start:{line:28,column:79},end:{line:28,column:85}},"54":{start:{line:29,column:20},end:{line:29,column:42}},"55":{start:{line:29,column:30},end:{line:29,column:42}},"56":{start:{line:30,column:20},end:{line:30,column:33}},"57":{start:{line:30,column:34},end:{line:30,column:43}},"58":{start:{line:32,column:12},end:{line:32,column:39}},"59":{start:{line:33,column:22},end:{line:33,column:34}},"60":{start:{line:33,column:35},end:{line:33,column:41}},"61":{start:{line:33,column:54},end:{line:33,column:64}},"62":{start:{line:34,column:8},end:{line:34,column:35}},"63":{start:{line:34,column:23},end:{line:34,column:35}},"64":{start:{line:34,column:36},end:{line:34,column:89}},"65":{start:{line:37,column:12},end:{line:37,column:16}},"66":{start:{line:38,column:0},end:{line:38,column:62}},"67":{start:{line:39,column:13},end:{line:39,column:31}},"68":{start:{line:40,column:15},end:{line:40,column:41}},"69":{start:{line:41,column:18},end:{line:41,column:47}},"70":{start:{line:42,column:0},end:{line:292,column:2}},"71":{start:{line:45,column:12},end:{line:45,column:41}},"72":{start:{line:47,column:36},end:{line:63,column:11}},"73":{start:{line:49,column:12},end:{line:62,column:15}},"74":{start:{line:50,column:16},end:{line:50,column:103}},"75":{start:{line:51,column:16},end:{line:51,column:329}},"76":{start:{line:52,column:16},end:{line:52,column:295}},"77":{start:{line:53,column:16},end:{line:55,column:17}},"78":{start:{line:54,column:20},end:{line:54,column:31}},"79":{start:{line:56,column:16},end:{line:56,column:121}},"80":{start:{line:57,column:16},end:{line:59,column:33}},"81":{start:{line:60,column:16},end:{line:60,column:101}},"82":{start:{line:61,column:16},end:{line:61,column:27}},"83":{start:{line:67,column:12},end:{line:67,column:41}},"84":{start:{line:69,column:36},end:{line:85,column:11}},"85":{start:{line:71,column:12},end:{line:84,column:15}},"86":{start:{line:72,column:16},end:{line:72,column:108}},"87":{start:{line:73,column:16},end:{line:73,column:331}},"88":{start:{line:74,column:16},end:{line:74,column:298}},"89":{start:{line:75,column:16},end:{line:77,column:17}},"90":{start:{line:76,column:20},end:{line:76,column:31}},"91":{start:{line:78,column:16},end:{line:78,column:124}},"92":{start:{line:79,column:16},end:{line:81,column:33}},"93":{start:{line:82,column:16},end:{line:82,column:101}},"94":{start:{line:83,column:16},end:{line:83,column:27}},"95":{start:{line:89,column:12},end:{line:89,column:39}},"96":{start:{line:91,column:36},end:{line:121,column:11}},"97":{start:{line:93,column:12},end:{line:120,column:15}},"98":{start:{line:94,column:16},end:{line:119,column:17}},"99":{start:{line:96,column:24},end:{line:96,column:100}},"100":{start:{line:97,column:24},end:{line:97,column:196}},"101":{start:{line:98,column:24},end:{line:98,column:200}},"102":{start:{line:99,column:24},end:{line:101,column:117}},"103":{start:{line:101,column:103},end:{line:101,column:117}},"104":{start:{line:102,column:24},end:{line:102,column:86}},"105":{start:{line:104,column:24},end:{line:104,column:50}},"106":{start:{line:105,column:24},end:{line:105,column:48}},"107":{start:{line:106,column:24},end:{line:113,column:26}},"108":{start:{line:114,column:24},end:{line:114,column:78}},"109":{start:{line:115,column:24},end:{line:115,column:37}},"110":{start:{line:117,column:24},end:{line:117,column:78}},"111":{start:{line:118,column:24},end:{line:118,column:35}},"112":{start:{line:125,column:12},end:{line:125,column:41}},"113":{start:{line:127,column:36},end:{line:138,column:11}},"114":{start:{line:129,column:12},end:{line:137,column:15}},"115":{start:{line:130,column:16},end:{line:130,column:100}},"116":{start:{line:131,column:16},end:{line:131,column:76}},"117":{start:{line:132,column:16},end:{line:132,column:70}},"118":{start:{line:133,column:16},end:{line:133,column:76}},"119":{start:{line:134,column:16},end:{line:135,column:83}},"120":{start:{line:136,column:16},end:{line:136,column:27}},"121":{start:{line:142,column:12},end:{line:142,column:41}},"122":{start:{line:144,column:36},end:{line:155,column:11}},"123":{start:{line:146,column:12},end:{line:154,column:15}},"124":{start:{line:147,column:16},end:{line:147,column:104}},"125":{start:{line:148,column:16},end:{line:148,column:76}},"126":{start:{line:149,column:16},end:{line:149,column:70}},"127":{start:{line:150,column:16},end:{line:150,column:76}},"128":{start:{line:151,column:16},end:{line:152,column:83}},"129":{start:{line:153,column:16},end:{line:153,column:27}},"130":{start:{line:159,column:12},end:{line:159,column:41}},"131":{start:{line:161,column:36},end:{line:178,column:11}},"132":{start:{line:163,column:12},end:{line:177,column:15}},"133":{start:{line:164,column:16},end:{line:164,column:102}},"134":{start:{line:165,column:16},end:{line:165,column:161}},"135":{start:{line:166,column:16},end:{line:166,column:120}},"136":{start:{line:167,column:16},end:{line:174,column:18}},"137":{start:{line:175,column:16},end:{line:175,column:103}},"138":{start:{line:176,column:16},end:{line:176,column:27}},"139":{start:{line:182,column:12},end:{line:182,column:41}},"140":{start:{line:184,column:36},end:{line:207,column:11}},"141":{start:{line:186,column:12},end:{line:206,column:15}},"142":{start:{line:187,column:16},end:{line:205,column:17}},"143":{start:{line:189,column:24},end:{line:189,column:110}},"144":{start:{line:190,column:24},end:{line:190,column:185}},"145":{start:{line:191,column:24},end:{line:191,column:144}},"146":{start:{line:192,column:24},end:{line:192,column:84}},"147":{start:{line:194,column:24},end:{line:194,column:50}},"148":{start:{line:195,column:24},end:{line:202,column:26}},"149":{start:{line:203,column:24},end:{line:203,column:111}},"150":{start:{line:204,column:24},end:{line:204,column:35}},"151":{start:{line:211,column:12},end:{line:211,column:41}},"152":{start:{line:213,column:36},end:{line:237,column:11}},"153":{start:{line:215,column:12},end:{line:236,column:15}},"154":{start:{line:216,column:16},end:{line:235,column:17}},"155":{start:{line:218,column:24},end:{line:218,column:111}},"156":{start:{line:219,column:24},end:{line:219,column:218}},"157":{start:{line:220,column:24},end:{line:220,column:185}},"158":{start:{line:221,column:24},end:{line:221,column:84}},"159":{start:{line:223,column:24},end:{line:223,column:50}},"160":{start:{line:224,column:24},end:{line:231,column:26}},"161":{start:{line:232,column:24},end:{line:233,column:82}},"162":{start:{line:234,column:24},end:{line:234,column:35}},"163":{start:{line:241,column:12},end:{line:241,column:41}},"164":{start:{line:243,column:36},end:{line:261,column:11}},"165":{start:{line:245,column:12},end:{line:260,column:15}},"166":{start:{line:246,column:16},end:{line:246,column:115}},"167":{start:{line:247,column:16},end:{line:247,column:201}},"168":{start:{line:248,column:16},end:{line:248,column:162}},"169":{start:{line:249,column:16},end:{line:256,column:18}},"170":{start:{line:257,column:16},end:{line:258,column:74}},"171":{start:{line:259,column:16},end:{line:259,column:27}},"172":{start:{line:265,column:12},end:{line:265,column:41}},"173":{start:{line:267,column:36},end:{line:290,column:11}},"174":{start:{line:269,column:12},end:{line:289,column:15}},"175":{start:{line:270,column:16},end:{line:288,column:17}},"176":{start:{line:272,column:24},end:{line:272,column:112}},"177":{start:{line:273,column:24},end:{line:273,column:245}},"178":{start:{line:274,column:24},end:{line:274,column:215}},"179":{start:{line:275,column:24},end:{line:275,column:93}},"180":{start:{line:277,column:24},end:{line:277,column:52}},"181":{start:{line:278,column:24},end:{line:284,column:26}},"182":{start:{line:285,column:24},end:{line:286,column:92}},"183":{start:{line:287,column:24},end:{line:287,column:35}},"184":{start:{line:293,column:0},end:{line:371,column:2}},"185":{start:{line:295,column:8},end:{line:295,column:50}},"186":{start:{line:295,column:35},end:{line:295,column:48}},"187":{start:{line:296,column:8},end:{line:332,column:11}},"188":{start:{line:298,column:12},end:{line:331,column:15}},"189":{start:{line:299,column:16},end:{line:330,column:17}},"190":{start:{line:300,column:28},end:{line:300,column:65}},"191":{start:{line:302,column:24},end:{line:302,column:34}},"192":{start:{line:303,column:24},end:{line:305,column:32}},"193":{start:{line:307,column:24},end:{line:307,column:244}},"194":{start:{line:308,column:24},end:{line:308,column:274}},"195":{start:{line:309,column:24},end:{line:312,column:25}},"196":{start:{line:310,column:28},end:{line:310,column:78}},"197":{start:{line:311,column:28},end:{line:311,column:39}},"198":{start:{line:313,column:24},end:{line:313,column:72}},"199":{start:{line:315,column:24},end:{line:315,column:55}},"200":{start:{line:316,column:24},end:{line:328,column:25}},"201":{start:{line:319,column:28},end:{line:319,column:68}},"202":{start:{line:320,column:28},end:{line:320,column:104}},"203":{start:{line:323,column:28},end:{line:323,column:68}},"204":{start:{line:324,column:28},end:{line:326,column:45}},"205":{start:{line:327,column:28},end:{line:327,column:120}},"206":{start:{line:329,column:24},end:{line:329,column:35}},"207":{start:{line:334,column:55},end:{line:362,column:7}},"208":{start:{line:336,column:8},end:{line:361,column:11}},"209":{start:{line:337,column:12},end:{line:360,column:13}},"210":{start:{line:338,column:24},end:{line:338,column:101}},"211":{start:{line:340,column:20},end:{line:340,column:217}},"212":{start:{line:341,column:20},end:{line:341,column:278}},"213":{start:{line:342,column:20},end:{line:345,column:21}},"214":{start:{line:343,column:24},end:{line:343,column:76}},"215":{start:{line:344,column:24},end:{line:344,column:41}},"216":{start:{line:346,column:20},end:{line:346,column:68}},"217":{start:{line:348,column:20},end:{line:348,column:51}},"218":{start:{line:349,column:20},end:{line:351,column:87}},"219":{start:{line:351,column:73},end:{line:351,column:87}},"220":{start:{line:352,column:20},end:{line:352,column:108}},"221":{start:{line:353,column:24},end:{line:353,column:46}},"222":{start:{line:355,column:20},end:{line:357,column:37}},"223":{start:{line:358,column:20},end:{line:358,column:124}},"224":{start:{line:359,column:24},end:{line:359,column:46}},"225":{start:{line:363,column:45},end:{line:370,column:7}},"226":{start:{line:365,column:8},end:{line:369,column:11}},"227":{start:{line:366,column:12},end:{line:366,column:79}},"228":{start:{line:367,column:12},end:{line:367,column:104}},"229":{start:{line:368,column:12},end:{line:368,column:23}},"230":{start:{line:372,column:0},end:{line:418,column:2}},"231":{start:{line:373,column:52},end:{line:417,column:7}},"232":{start:{line:375,column:8},end:{line:416,column:11}},"233":{start:{line:376,column:12},end:{line:415,column:13}},"234":{start:{line:377,column:24},end:{line:377,column:91}},"235":{start:{line:379,column:20},end:{line:379,column:30}},"236":{start:{line:380,column:20},end:{line:380,column:91}},"237":{start:{line:382,column:20},end:{line:382,column:181}},"238":{start:{line:383,column:20},end:{line:383,column:205}},"239":{start:{line:384,column:20},end:{line:387,column:21}},"240":{start:{line:385,column:24},end:{line:385,column:72}},"241":{start:{line:386,column:24},end:{line:386,column:35}},"242":{start:{line:388,column:20},end:{line:391,column:21}},"243":{start:{line:389,column:24},end:{line:389,column:60}},"244":{start:{line:390,column:24},end:{line:390,column:35}},"245":{start:{line:392,column:20},end:{line:392,column:276}},"246":{start:{line:393,column:20},end:{line:393,column:132}},"247":{start:{line:394,column:20},end:{line:394,column:58}},"248":{start:{line:396,column:20},end:{line:396,column:38}},"249":{start:{line:397,column:20},end:{line:397,column:244}},"250":{start:{line:398,column:20},end:{line:400,column:42}},"251":{start:{line:402,column:20},end:{line:402,column:36}},"252":{start:{line:403,column:20},end:{line:403,column:49}},"253":{start:{line:403,column:35},end:{line:403,column:49}},"254":{start:{line:404,column:20},end:{line:404,column:91}},"255":{start:{line:406,column:20},end:{line:406,column:40}},"256":{start:{line:407,column:20},end:{line:412,column:21}},"257":{start:{line:408,column:24},end:{line:408,column:90}},"258":{start:{line:411,column:24},end:{line:411,column:62}},"259":{start:{line:413,column:20},end:{line:413,column:33}},"260":{start:{line:414,column:24},end:{line:414,column:35}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:2,column:44},end:{line:2,column:45}},loc:{start:{line:2,column:89},end:{line:9,column:1}},line:2},"1":{name:"(anonymous_1)",decl:{start:{line:3,column:36},end:{line:3,column:37}},loc:{start:{line:3,column:63},end:{line:8,column:5}},line:3},"2":{name:"fulfilled",decl:{start:{line:4,column:17},end:{line:4,column:26}},loc:{start:{line:4,column:34},end:{line:4,column:99}},line:4},"3":{name:"rejected",decl:{start:{line:5,column:17},end:{line:5,column:25}},loc:{start:{line:5,column:33},end:{line:5,column:102}},line:5},"4":{name:"step",decl:{start:{line:6,column:17},end:{line:6,column:21}},loc:{start:{line:6,column:30},end:{line:6,column:151}},line:6},"5":{name:"(anonymous_5)",decl:{start:{line:6,column:76},end:{line:6,column:77}},loc:{start:{line:6,column:95},end:{line:6,column:121}},line:6},"6":{name:"(anonymous_6)",decl:{start:{line:10,column:48},end:{line:10,column:49}},loc:{start:{line:10,column:73},end:{line:36,column:1}},line:10},"7":{name:"(anonymous_7)",decl:{start:{line:11,column:30},end:{line:11,column:31}},loc:{start:{line:11,column:41},end:{line:11,column:83}},line:11},"8":{name:"(anonymous_8)",decl:{start:{line:12,column:125},end:{line:12,column:126}},loc:{start:{line:12,column:136},end:{line:12,column:152}},line:12},"9":{name:"verb",decl:{start:{line:13,column:13},end:{line:13,column:17}},loc:{start:{line:13,column:21},end:{line:13,column:70}},line:13},"10":{name:"(anonymous_10)",decl:{start:{line:13,column:30},end:{line:13,column:31}},loc:{start:{line:13,column:43},end:{line:13,column:67}},line:13},"11":{name:"step",decl:{start:{line:14,column:13},end:{line:14,column:17}},loc:{start:{line:14,column:22},end:{line:35,column:5}},line:14},"12":{name:"(anonymous_12)",decl:{start:{line:44,column:16},end:{line:44,column:17}},loc:{start:{line:44,column:28},end:{line:46,column:9}},line:44},"13":{name:"(anonymous_13)",decl:{start:{line:47,column:17},end:{line:47,column:18}},loc:{start:{line:47,column:34},end:{line:63,column:13}},line:47},"14":{name:"(anonymous_14)",decl:{start:{line:47,column:76},end:{line:47,column:77}},loc:{start:{line:47,column:88},end:{line:63,column:9}},line:47},"15":{name:"(anonymous_15)",decl:{start:{line:49,column:37},end:{line:49,column:38}},loc:{start:{line:49,column:51},end:{line:62,column:13}},line:49},"16":{name:"(anonymous_16)",decl:{start:{line:66,column:16},end:{line:66,column:17}},loc:{start:{line:66,column:28},end:{line:68,column:9}},line:66},"17":{name:"(anonymous_17)",decl:{start:{line:69,column:17},end:{line:69,column:18}},loc:{start:{line:69,column:34},end:{line:85,column:13}},line:69},"18":{name:"(anonymous_18)",decl:{start:{line:69,column:76},end:{line:69,column:77}},loc:{start:{line:69,column:88},end:{line:85,column:9}},line:69},"19":{name:"(anonymous_19)",decl:{start:{line:71,column:37},end:{line:71,column:38}},loc:{start:{line:71,column:51},end:{line:84,column:13}},line:71},"20":{name:"(anonymous_20)",decl:{start:{line:88,column:16},end:{line:88,column:17}},loc:{start:{line:88,column:28},end:{line:90,column:9}},line:88},"21":{name:"(anonymous_21)",decl:{start:{line:91,column:17},end:{line:91,column:18}},loc:{start:{line:91,column:34},end:{line:121,column:13}},line:91},"22":{name:"(anonymous_22)",decl:{start:{line:91,column:76},end:{line:91,column:77}},loc:{start:{line:91,column:88},end:{line:121,column:9}},line:91},"23":{name:"(anonymous_23)",decl:{start:{line:93,column:37},end:{line:93,column:38}},loc:{start:{line:93,column:51},end:{line:120,column:13}},line:93},"24":{name:"(anonymous_24)",decl:{start:{line:124,column:16},end:{line:124,column:17}},loc:{start:{line:124,column:28},end:{line:126,column:9}},line:124},"25":{name:"(anonymous_25)",decl:{start:{line:127,column:17},end:{line:127,column:18}},loc:{start:{line:127,column:34},end:{line:138,column:13}},line:127},"26":{name:"(anonymous_26)",decl:{start:{line:127,column:76},end:{line:127,column:77}},loc:{start:{line:127,column:88},end:{line:138,column:9}},line:127},"27":{name:"(anonymous_27)",decl:{start:{line:129,column:37},end:{line:129,column:38}},loc:{start:{line:129,column:51},end:{line:137,column:13}},line:129},"28":{name:"(anonymous_28)",decl:{start:{line:141,column:16},end:{line:141,column:17}},loc:{start:{line:141,column:28},end:{line:143,column:9}},line:141},"29":{name:"(anonymous_29)",decl:{start:{line:144,column:17},end:{line:144,column:18}},loc:{start:{line:144,column:34},end:{line:155,column:13}},line:144},"30":{name:"(anonymous_30)",decl:{start:{line:144,column:76},end:{line:144,column:77}},loc:{start:{line:144,column:88},end:{line:155,column:9}},line:144},"31":{name:"(anonymous_31)",decl:{start:{line:146,column:37},end:{line:146,column:38}},loc:{start:{line:146,column:51},end:{line:154,column:13}},line:146},"32":{name:"(anonymous_32)",decl:{start:{line:158,column:16},end:{line:158,column:17}},loc:{start:{line:158,column:28},end:{line:160,column:9}},line:158},"33":{name:"(anonymous_33)",decl:{start:{line:161,column:17},end:{line:161,column:18}},loc:{start:{line:161,column:34},end:{line:178,column:13}},line:161},"34":{name:"(anonymous_34)",decl:{start:{line:161,column:76},end:{line:161,column:77}},loc:{start:{line:161,column:88},end:{line:178,column:9}},line:161},"35":{name:"(anonymous_35)",decl:{start:{line:163,column:37},end:{line:163,column:38}},loc:{start:{line:163,column:51},end:{line:177,column:13}},line:163},"36":{name:"(anonymous_36)",decl:{start:{line:181,column:16},end:{line:181,column:17}},loc:{start:{line:181,column:28},end:{line:183,column:9}},line:181},"37":{name:"(anonymous_37)",decl:{start:{line:184,column:17},end:{line:184,column:18}},loc:{start:{line:184,column:34},end:{line:207,column:13}},line:184},"38":{name:"(anonymous_38)",decl:{start:{line:184,column:76},end:{line:184,column:77}},loc:{start:{line:184,column:88},end:{line:207,column:9}},line:184},"39":{name:"(anonymous_39)",decl:{start:{line:186,column:37},end:{line:186,column:38}},loc:{start:{line:186,column:51},end:{line:206,column:13}},line:186},"40":{name:"(anonymous_40)",decl:{start:{line:210,column:16},end:{line:210,column:17}},loc:{start:{line:210,column:28},end:{line:212,column:9}},line:210},"41":{name:"(anonymous_41)",decl:{start:{line:213,column:17},end:{line:213,column:18}},loc:{start:{line:213,column:34},end:{line:237,column:13}},line:213},"42":{name:"(anonymous_42)",decl:{start:{line:213,column:76},end:{line:213,column:77}},loc:{start:{line:213,column:88},end:{line:237,column:9}},line:213},"43":{name:"(anonymous_43)",decl:{start:{line:215,column:37},end:{line:215,column:38}},loc:{start:{line:215,column:51},end:{line:236,column:13}},line:215},"44":{name:"(anonymous_44)",decl:{start:{line:240,column:16},end:{line:240,column:17}},loc:{start:{line:240,column:28},end:{line:242,column:9}},line:240},"45":{name:"(anonymous_45)",decl:{start:{line:243,column:17},end:{line:243,column:18}},loc:{start:{line:243,column:34},end:{line:261,column:13}},line:243},"46":{name:"(anonymous_46)",decl:{start:{line:243,column:76},end:{line:243,column:77}},loc:{start:{line:243,column:88},end:{line:261,column:9}},line:243},"47":{name:"(anonymous_47)",decl:{start:{line:245,column:37},end:{line:245,column:38}},loc:{start:{line:245,column:51},end:{line:260,column:13}},line:245},"48":{name:"(anonymous_48)",decl:{start:{line:264,column:16},end:{line:264,column:17}},loc:{start:{line:264,column:28},end:{line:266,column:9}},line:264},"49":{name:"(anonymous_49)",decl:{start:{line:267,column:17},end:{line:267,column:18}},loc:{start:{line:267,column:34},end:{line:290,column:13}},line:267},"50":{name:"(anonymous_50)",decl:{start:{line:267,column:76},end:{line:267,column:77}},loc:{start:{line:267,column:88},end:{line:290,column:9}},line:267},"51":{name:"(anonymous_51)",decl:{start:{line:269,column:37},end:{line:269,column:38}},loc:{start:{line:269,column:51},end:{line:289,column:13}},line:269},"52":{name:"(anonymous_52)",decl:{start:{line:294,column:27},end:{line:294,column:28}},loc:{start:{line:294,column:58},end:{line:333,column:5}},line:294},"53":{name:"(anonymous_53)",decl:{start:{line:296,column:48},end:{line:296,column:49}},loc:{start:{line:296,column:60},end:{line:332,column:9}},line:296},"54":{name:"(anonymous_54)",decl:{start:{line:298,column:37},end:{line:298,column:38}},loc:{start:{line:298,column:51},end:{line:331,column:13}},line:298},"55":{name:"(anonymous_55)",decl:{start:{line:334,column:32},end:{line:334,column:33}},loc:{start:{line:334,column:53},end:{line:362,column:9}},line:334},"56":{name:"(anonymous_56)",decl:{start:{line:334,column:95},end:{line:334,column:96}},loc:{start:{line:334,column:107},end:{line:362,column:5}},line:334},"57":{name:"(anonymous_57)",decl:{start:{line:336,column:33},end:{line:336,column:34}},loc:{start:{line:336,column:47},end:{line:361,column:9}},line:336},"58":{name:"(anonymous_58)",decl:{start:{line:363,column:22},end:{line:363,column:23}},loc:{start:{line:363,column:43},end:{line:370,column:9}},line:363},"59":{name:"(anonymous_59)",decl:{start:{line:363,column:85},end:{line:363,column:86}},loc:{start:{line:363,column:97},end:{line:370,column:5}},line:363},"60":{name:"(anonymous_60)",decl:{start:{line:365,column:33},end:{line:365,column:34}},loc:{start:{line:365,column:47},end:{line:369,column:9}},line:365},"61":{name:"(anonymous_61)",decl:{start:{line:373,column:25},end:{line:373,column:26}},loc:{start:{line:373,column:50},end:{line:417,column:9}},line:373},"62":{name:"(anonymous_62)",decl:{start:{line:373,column:92},end:{line:373,column:93}},loc:{start:{line:373,column:104},end:{line:417,column:5}},line:373},"63":{name:"(anonymous_63)",decl:{start:{line:375,column:33},end:{line:375,column:34}},loc:{start:{line:375,column:47},end:{line:416,column:9}},line:375}},branchMap:{"0":{loc:{start:{line:2,column:16},end:{line:9,column:1}},type:"binary-expr",locations:[{start:{line:2,column:17},end:{line:2,column:21}},{start:{line:2,column:25},end:{line:2,column:39}},{start:{line:2,column:44},end:{line:9,column:1}}],line:2},"1":{loc:{start:{line:3,column:16},end:{line:3,column:34}},type:"binary-expr",locations:[{start:{line:3,column:16},end:{line:3,column:17}},{start:{line:3,column:22},end:{line:3,column:33}}],line:3},"2":{loc:{start:{line:6,column:32},end:{line:6,column:148}},type:"cond-expr",locations:[{start:{line:6,column:46},end:{line:6,column:67}},{start:{line:6,column:70},end:{line:6,column:148}}],line:6},"3":{loc:{start:{line:7,column:51},end:{line:7,column:67}},type:"binary-expr",locations:[{start:{line:7,column:51},end:{line:7,column:61}},{start:{line:7,column:65},end:{line:7,column:67}}],line:7},"4":{loc:{start:{line:10,column:18},end:{line:36,column:1}},type:"binary-expr",locations:[{start:{line:10,column:19},end:{line:10,column:23}},{start:{line:10,column:27},end:{line:10,column:43}},{start:{line:10,column:48},end:{line:36,column:1}}],line:10},"5":{loc:{start:{line:11,column:43},end:{line:11,column:68}},type:"if",locations:[{start:{line:11,column:43},end:{line:11,column:68}},{start:{line:11,column:43},end:{line:11,column:68}}],line:11},"6":{loc:{start:{line:12,column:71},end:{line:12,column:153}},type:"binary-expr",locations:[{start:{line:12,column:71},end:{line:12,column:99}},{start:{line:12,column:104},end:{line:12,column:152}}],line:12},"7":{loc:{start:{line:15,column:8},end:{line:15,column:70}},type:"if",locations:[{start:{line:15,column:8},end:{line:15,column:70}},{start:{line:15,column:8},end:{line:15,column:70}}],line:15},"8":{loc:{start:{line:17,column:12},end:{line:17,column:169}},type:"if",locations:[{start:{line:17,column:12},end:{line:17,column:169}},{start:{line:17,column:12},end:{line:17,column:169}}],line:17},"9":{loc:{start:{line:17,column:23},end:{line:17,column:158}},type:"binary-expr",locations:[{start:{line:17,column:23},end:{line:17,column:24}},{start:{line:17,column:29},end:{line:17,column:125}},{start:{line:17,column:130},end:{line:17,column:158}}],line:17},"10":{loc:{start:{line:17,column:33},end:{line:17,column:125}},type:"cond-expr",locations:[{start:{line:17,column:45},end:{line:17,column:56}},{start:{line:17,column:59},end:{line:17,column:125}}],line:17},"11":{loc:{start:{line:17,column:59},end:{line:17,column:125}},type:"cond-expr",locations:[{start:{line:17,column:67},end:{line:17,column:116}},{start:{line:17,column:119},end:{line:17,column:125}}],line:17},"12":{loc:{start:{line:17,column:67},end:{line:17,column:116}},type:"binary-expr",locations:[{start:{line:17,column:67},end:{line:17,column:77}},{start:{line:17,column:82},end:{line:17,column:115}}],line:17},"13":{loc:{start:{line:17,column:82},end:{line:17,column:112}},type:"binary-expr",locations:[{start:{line:17,column:83},end:{line:17,column:98}},{start:{line:17,column:103},end:{line:17,column:112}}],line:17},"14":{loc:{start:{line:18,column:12},end:{line:18,column:52}},type:"if",locations:[{start:{line:18,column:12},end:{line:18,column:52}},{start:{line:18,column:12},end:{line:18,column:52}}],line:18},"15":{loc:{start:{line:19,column:12},end:{line:31,column:13}},type:"switch",locations:[{start:{line:20,column:16},end:{line:20,column:23}},{start:{line:20,column:24},end:{line:20,column:46}},{start:{line:21,column:16},end:{line:21,column:72}},{start:{line:22,column:16},end:{line:22,column:65}},{start:{line:23,column:16},end:{line:23,column:65}},{start:{line:24,column:16},end:{line:30,column:43}}],line:19},"16":{loc:{start:{line:25,column:20},end:{line:25,column:128}},type:"if",locations:[{start:{line:25,column:20},end:{line:25,column:128}},{start:{line:25,column:20},end:{line:25,column:128}}],line:25},"17":{loc:{start:{line:25,column:24},end:{line:25,column:106}},type:"binary-expr",locations:[{start:{line:25,column:24},end:{line:25,column:74}},{start:{line:25,column:79},end:{line:25,column:90}},{start:{line:25,column:94},end:{line:25,column:105}}],line:25},"18":{loc:{start:{line:25,column:42},end:{line:25,column:73}},type:"binary-expr",locations:[{start:{line:25,column:42},end:{line:25,column:54}},{start:{line:25,column:58},end:{line:25,column:73}}],line:25},"19":{loc:{start:{line:26,column:20},end:{line:26,column:106}},type:"if",locations:[{start:{line:26,column:20},end:{line:26,column:106}},{start:{line:26,column:20},end:{line:26,column:106}}],line:26},"20":{loc:{start:{line:26,column:24},end:{line:26,column:77}},type:"binary-expr",locations:[{start:{line:26,column:24},end:{line:26,column:35}},{start:{line:26,column:40},end:{line:26,column:42}},{start:{line:26,column:47},end:{line:26,column:59}},{start:{line:26,column:63},end:{line:26,column:75}}],line:26},"21":{loc:{start:{line:27,column:20},end:{line:27,column:89}},type:"if",locations:[{start:{line:27,column:20},end:{line:27,column:89}},{start:{line:27,column:20},end:{line:27,column:89}}],line:27},"22":{loc:{start:{line:27,column:24},end:{line:27,column:53}},type:"binary-expr",locations:[{start:{line:27,column:24},end:{line:27,column:35}},{start:{line:27,column:39},end:{line:27,column:53}}],line:27},"23":{loc:{start:{line:28,column:20},end:{line:28,column:87}},type:"if",locations:[{start:{line:28,column:20},end:{line:28,column:87}},{start:{line:28,column:20},end:{line:28,column:87}}],line:28},"24":{loc:{start:{line:28,column:24},end:{line:28,column:43}},type:"binary-expr",locations:[{start:{line:28,column:24},end:{line:28,column:25}},{start:{line:28,column:29},end:{line:28,column:43}}],line:28},"25":{loc:{start:{line:29,column:20},end:{line:29,column:42}},type:"if",locations:[{start:{line:29,column:20},end:{line:29,column:42}},{start:{line:29,column:20},end:{line:29,column:42}}],line:29},"26":{loc:{start:{line:34,column:8},end:{line:34,column:35}},type:"if",locations:[{start:{line:34,column:8},end:{line:34,column:35}},{start:{line:34,column:8},end:{line:34,column:35}}],line:34},"27":{loc:{start:{line:34,column:52},end:{line:34,column:74}},type:"cond-expr",locations:[{start:{line:34,column:60},end:{line:34,column:65}},{start:{line:34,column:68},end:{line:34,column:74}}],line:34},"28":{loc:{start:{line:53,column:16},end:{line:55,column:17}},type:"if",locations:[{start:{line:53,column:16},end:{line:55,column:17}},{start:{line:53,column:16},end:{line:55,column:17}}],line:53},"29":{loc:{start:{line:75,column:16},end:{line:77,column:17}},type:"if",locations:[{start:{line:75,column:16},end:{line:77,column:17}},{start:{line:75,column:16},end:{line:77,column:17}}],line:75},"30":{loc:{start:{line:94,column:16},end:{line:119,column:17}},type:"switch",locations:[{start:{line:95,column:20},end:{line:102,column:86}},{start:{line:103,column:20},end:{line:115,column:37}},{start:{line:116,column:20},end:{line:118,column:35}}],line:94},"31":{loc:{start:{line:99,column:24},end:{line:101,column:117}},type:"if",locations:[{start:{line:99,column:24},end:{line:101,column:117}},{start:{line:99,column:24},end:{line:101,column:117}}],line:99},"32":{loc:{start:{line:99,column:30},end:{line:101,column:100}},type:"binary-expr",locations:[{start:{line:99,column:30},end:{line:99,column:62}},{start:{line:100,column:28},end:{line:101,column:100}}],line:99},"33":{loc:{start:{line:134,column:16},end:{line:135,column:82}},type:"binary-expr",locations:[{start:{line:134,column:16},end:{line:134,column:53}},{start:{line:135,column:20},end:{line:135,column:82}}],line:134},"34":{loc:{start:{line:151,column:16},end:{line:152,column:82}},type:"binary-expr",locations:[{start:{line:151,column:16},end:{line:151,column:53}},{start:{line:152,column:20},end:{line:152,column:82}}],line:151},"35":{loc:{start:{line:175,column:16},end:{line:175,column:102}},type:"binary-expr",locations:[{start:{line:175,column:16},end:{line:175,column:47}},{start:{line:175,column:51},end:{line:175,column:102}}],line:175},"36":{loc:{start:{line:187,column:16},end:{line:205,column:17}},type:"switch",locations:[{start:{line:188,column:20},end:{line:192,column:84}},{start:{line:193,column:20},end:{line:204,column:35}}],line:187},"37":{loc:{start:{line:203,column:24},end:{line:203,column:110}},type:"binary-expr",locations:[{start:{line:203,column:24},end:{line:203,column:55}},{start:{line:203,column:59},end:{line:203,column:110}}],line:203},"38":{loc:{start:{line:216,column:16},end:{line:235,column:17}},type:"switch",locations:[{start:{line:217,column:20},end:{line:221,column:84}},{start:{line:222,column:20},end:{line:234,column:35}}],line:216},"39":{loc:{start:{line:232,column:24},end:{line:233,column:81}},type:"binary-expr",locations:[{start:{line:232,column:24},end:{line:232,column:56}},{start:{line:233,column:28},end:{line:233,column:81}}],line:232},"40":{loc:{start:{line:257,column:16},end:{line:258,column:73}},type:"binary-expr",locations:[{start:{line:257,column:16},end:{line:257,column:48}},{start:{line:258,column:20},end:{line:258,column:73}}],line:257},"41":{loc:{start:{line:270,column:16},end:{line:288,column:17}},type:"switch",locations:[{start:{line:271,column:20},end:{line:275,column:93}},{start:{line:276,column:20},end:{line:287,column:35}}],line:270},"42":{loc:{start:{line:285,column:24},end:{line:286,column:91}},type:"binary-expr",locations:[{start:{line:285,column:24},end:{line:285,column:61}},{start:{line:286,column:28},end:{line:286,column:91}}],line:285},"43":{loc:{start:{line:295,column:8},end:{line:295,column:50}},type:"if",locations:[{start:{line:295,column:8},end:{line:295,column:50}},{start:{line:295,column:8},end:{line:295,column:50}}],line:295},"44":{loc:{start:{line:299,column:16},end:{line:330,column:17}},type:"switch",locations:[{start:{line:300,column:20},end:{line:300,column:65}},{start:{line:301,column:20},end:{line:305,column:32}},{start:{line:306,column:20},end:{line:313,column:72}},{start:{line:314,column:20},end:{line:329,column:35}}],line:299},"45":{loc:{start:{line:309,column:24},end:{line:312,column:25}},type:"if",locations:[{start:{line:309,column:24},end:{line:312,column:25}},{start:{line:309,column:24},end:{line:312,column:25}}],line:309},"46":{loc:{start:{line:316,column:24},end:{line:328,column:25}},type:"if",locations:[{start:{line:316,column:24},end:{line:328,column:25}},{start:{line:316,column:24},end:{line:328,column:25}}],line:316},"47":{loc:{start:{line:337,column:12},end:{line:360,column:13}},type:"switch",locations:[{start:{line:338,column:16},end:{line:338,column:101}},{start:{line:339,column:16},end:{line:346,column:68}},{start:{line:347,column:16},end:{line:352,column:108}},{start:{line:353,column:16},end:{line:353,column:46}},{start:{line:354,column:16},end:{line:358,column:124}},{start:{line:359,column:16},end:{line:359,column:46}}],line:337},"48":{loc:{start:{line:342,column:20},end:{line:345,column:21}},type:"if",locations:[{start:{line:342,column:20},end:{line:345,column:21}},{start:{line:342,column:20},end:{line:345,column:21}}],line:342},"49":{loc:{start:{line:349,column:20},end:{line:351,column:87}},type:"if",locations:[{start:{line:349,column:20},end:{line:351,column:87}},{start:{line:349,column:20},end:{line:351,column:87}}],line:349},"50":{loc:{start:{line:376,column:12},end:{line:415,column:13}},type:"switch",locations:[{start:{line:377,column:16},end:{line:377,column:91}},{start:{line:378,column:16},end:{line:380,column:91}},{start:{line:381,column:16},end:{line:394,column:58}},{start:{line:395,column:16},end:{line:400,column:42}},{start:{line:401,column:16},end:{line:404,column:91}},{start:{line:405,column:16},end:{line:413,column:33}},{start:{line:414,column:16},end:{line:414,column:35}}],line:376},"51":{loc:{start:{line:384,column:20},end:{line:387,column:21}},type:"if",locations:[{start:{line:384,column:20},end:{line:387,column:21}},{start:{line:384,column:20},end:{line:387,column:21}}],line:384},"52":{loc:{start:{line:388,column:20},end:{line:391,column:21}},type:"if",locations:[{start:{line:388,column:20},end:{line:391,column:21}},{start:{line:388,column:20},end:{line:391,column:21}}],line:388},"53":{loc:{start:{line:403,column:20},end:{line:403,column:49}},type:"if",locations:[{start:{line:403,column:20},end:{line:403,column:49}},{start:{line:403,column:20},end:{line:403,column:49}}],line:403},"54":{loc:{start:{line:407,column:20},end:{line:412,column:21}},type:"if",locations:[{start:{line:407,column:20},end:{line:412,column:21}},{start:{line:407,column:20},end:{line:412,column:21}}],line:407}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0},b:{"0":[0,0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0,0,0,0],"16":[0,0],"17":[0,0,0],"18":[0,0],"19":[0,0],"20":[0,0,0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0,0,0],"45":[0,0],"46":[0,0],"47":[0,0,0,0,0,0],"48":[0,0],"49":[0,0],"50":[0,0,0,0,0,0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0]},inputSourceMap:{version:3,file:"/Users/zhang/work/DigiCash/l2app/l2.js/src/service/cita.ts",sourceRoot:"/Users/zhang/work/DigiCash/l2app/l2.js/",sources:["node_modules/source-map-loader/index.js!/Users/zhang/work/DigiCash/l2app/l2.js/src/service/cita.ts"],names:[],mappings:"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",sourcesContent:["import { ethPN, appPN, user, callbacks, puppet, cita, web3_10, web3_outer } from '../main';\nimport {\n  myEcsignToHex,\n  sendEthTx,\n  delay,\n  getAppTxOption,\n  sendAppTx,\n} from '../utils/common';\nimport {\n  TRANSFER_EVENT,\n  CITA_TX_BLOCK_INTERVAL,\n  PUPPETCHANGED_EVENT,\n  DEPOSIT_EVENT,\n  WITHDRAW_EVENT,\n  FORCEWITHDRAW_EVENT,\n} from '../utils/constants';\n\n/**\n * Handle events from cita payment contract, only filter current user related event\n */\nexport const events = {\n  ConfirmUserWithdraw: {\n    filter: () => {\n      return { user };\n    },\n    handler: async (event: any) => {\n      console.log(\n        '--------------------Handle CITA ConfirmUserWithdraw--------------------'\n      );\n      let {\n        returnValues: {\n          channelID,\n          user,\n          confirmer,\n          amount,\n          lastCommitBlock,\n          isAllConfirmed,\n          providerSignature,\n          regulatorSignature,\n        },\n        transactionHash,\n      } = event;\n\n      console.log(\n        ' channelID: [%s], user: [%s], confirmer: [%s], amount: [%s], lastCommitBlock: [%s], isAllConfirmed: [%s], providerSignature: [%s], regulatorSignature: [%s]',\n        channelID,\n        user,\n        confirmer,\n        amount,\n        lastCommitBlock,\n        isAllConfirmed,\n        providerSignature,\n        regulatorSignature\n      );\n\n      // if UserWithdraw Proposal not confirmed by both provider and regulator, ignore the event.\n      if (isAllConfirmed === false) {\n        return;\n      }\n      console.log(\n        'Receive ConfirmUserWithdraw event, will try to submit eth withdraw tx %s',\n        transactionHash\n      );\n\n      let txData = ethPN.methods\n        .userWithdraw(\n          channelID,\n          amount,\n          lastCommitBlock,\n          providerSignature,\n          regulatorSignature,\n          user\n        )\n        .encodeABI();\n      sendEthTx(web3_outer, user, ethPN.options.address, 0, txData);\n    },\n  },\n\n  ConfirmCooperativeSettle: {\n    filter: () => {\n      return { user };\n    },\n    handler: async (event: any) => {\n      console.log(\n        '--------------------Handle CITA ConfirmCooperativeSettle--------------------'\n      );\n      let {\n        returnValues: {\n          channelID,\n          user,\n          confirmer,\n          balance,\n          lastCommitBlock,\n          isAllConfirmed,\n          providerSignature,\n          regulatorSignature,\n        },\n        transactionHash,\n      } = event;\n\n      console.log(\n        ' channelID: [%s], user: [%s], confirmer: [%s], balance: [%s], lastCommitBlock: [%s], isAllConfirmed: [%s], providerSignature: [%s], regulatorSignature: [%s] ',\n        channelID,\n        user,\n        confirmer,\n        balance,\n        lastCommitBlock,\n        isAllConfirmed,\n        providerSignature,\n        regulatorSignature\n      );\n\n      // if CooperativeSettle Proposal not confirmed by both provider and regulator, ignore the event.\n      if (isAllConfirmed === false) {\n        return;\n      }\n\n      console.log(\n        'Receive ConfirmCooperativeSettle event, will try to submit eth settle tx %s',\n        transactionHash\n      );\n      let txData = ethPN.methods\n        .cooperativeSettle(\n          channelID,\n          balance,\n          lastCommitBlock,\n          providerSignature,\n          regulatorSignature\n        )\n        .encodeABI();\n      sendEthTx(web3_outer, user, ethPN.options.address, 0, txData);\n      return;\n    },\n  },\n\n  Transfer: {\n    filter: () => {\n      return { to: user };\n    },\n    handler: async (event: any) => {\n      console.log(\n        '--------------------Handle CITA Transfer--------------------'\n      );\n      let {\n        returnValues: {\n          from,\n          to,\n          channelID,\n          balance,\n          transferAmount,\n          additionalHash,\n        },\n      } = event;\n\n      console.log(\n        ' from: [%s], to: [%s], channelID: [%s], balance: [%s], transferAmount: [%s], additionalHash: [%s] ',\n        from,\n        to,\n        channelID,\n        balance,\n        transferAmount,\n        additionalHash\n      );\n\n      // emit the Transfer event to sdk caller\n      if (\n        callbacks.get('Transfer') &&\n        additionalHash ===\n          '0x0000000000000000000000000000000000000000000000000000000000000000'\n      ) {\n        let { token } = await appPN.methods.channelMap(channelID).call();\n        let amount = transferAmount;\n        let transferEvent: TRANSFER_EVENT = {\n          from,\n          to,\n          token,\n          amount,\n          additionalHash,\n          totalTransferredAmount: balance,\n        };\n        callbacks.get('Transfer')(null, transferEvent);\n      }\n\n      // automatically submit GuardProof for the received Transfer, to make sure user's proof can be submit when provider force-close channel and user is offline\n      appMethods.appSubmitGuardProof(channelID, to);\n    },\n  },\n  /****************************onchain Event(operator emit)************************************/\n  OnchainAddPuppet: {\n    filter: () => {\n      return { user };\n    },\n    handler: async (event: any) => {\n      console.log(\n        '--------------------Handle CITA OnchainAddPuppet--------------------'\n      );\n      let {\n        returnValues: { user, puppet },\n      } = event;\n      console.log('user: [%s], puppet: [%s]', user, puppet);\n      let puppetChangeEvent: PUPPETCHANGED_EVENT = { user, puppet, type: 1 };\n      callbacks.get('PuppetChanged') &&\n        callbacks.get('PuppetChanged')(null, puppetChangeEvent);\n    },\n  },\n  OnchainDisablePuppet: {\n    filter: () => {\n      return { user };\n    },\n    handler: async (event: any) => {\n      console.log(\n        '--------------------Handle CITA OnchainDisablePuppet--------------------'\n      );\n      let {\n        returnValues: { user, puppet },\n      } = event;\n      console.log('user: [%s], puppet: [%s]', user, puppet);\n      let puppetChangeEvent: PUPPETCHANGED_EVENT = { user, puppet, type: 2 };\n      callbacks.get('PuppetChanged') &&\n        callbacks.get('PuppetChanged')(null, puppetChangeEvent);\n    },\n  },\n\n  OnchainOpenChannel: {\n    filter: () => {\n      return { user };\n    },\n    handler: async (event: any) => {\n      console.log(\n        '--------------------Handle CITA OnchainOpenChannel--------------------'\n      );\n      let {\n        returnValues: { user, token, amount, channelID },\n        transactionHash,\n      } = event;\n      console.log(\n        ' user: [%s], token: [%s], amount: [%s], channelID: [%s] ',\n        user,\n        token,\n        amount,\n        channelID\n      );\n      let depositEvent: DEPOSIT_EVENT = {\n        user: user,\n        type: 1,\n        token,\n        amount: amount,\n        totalDeposit: amount,\n        txhash: transactionHash,\n      };\n      callbacks.get('Deposit') && callbacks.get('Deposit')(null, depositEvent);\n    },\n  },\n\n  OnchainUserDeposit: {\n    filter: () => {\n      return { user };\n    },\n    handler: async (event: any) => {\n      console.log(\n        '--------------------Handle CITA OnchainUserDeposit--------------------'\n      );\n      let {\n        returnValues: { channelID, user, deposit, totalDeposit },\n        transactionHash,\n      } = event;\n\n      console.log(\n        ' channelID: [%s], user: [%s], deposit: [%s], totalDeposit: [%s] ',\n        channelID,\n        user,\n        deposit,\n        totalDeposit\n      );\n\n      let { token } = await ethPN.methods.channels(channelID).call();\n\n      let depositEvent: DEPOSIT_EVENT = {\n        user: user,\n        type: 2,\n        token,\n        amount: deposit,\n        totalDeposit,\n        txhash: transactionHash,\n      };\n      callbacks.get('Deposit') && callbacks.get('Deposit')(null, depositEvent);\n    },\n  },\n\n  OnchainUserWithdraw: {\n    filter: () => {\n      return { user };\n    },\n    handler: async (event: any) => {\n      console.log(\n        '--------------------Handle CITA OnchainUserWithdraw--------------------'\n      );\n      let {\n        returnValues: {\n          channelID,\n          user,\n          amount,\n          withdraw: totalWithdraw,\n          lastCommitBlock,\n        },\n        transactionHash,\n      } = event;\n\n      console.log(\n        ' channelID: [%s], user: [%s], amount: [%s], totalWithdraw: [%s], lastCommitBlock: [%s], ',\n        channelID,\n        user,\n        amount,\n        totalWithdraw,\n        lastCommitBlock\n      );\n\n      let { token } = await ethPN.methods.channels(channelID).call();\n\n      let withdrawEvent: WITHDRAW_EVENT = {\n        user: user,\n        type: 1,\n        token,\n        amount,\n        totalWithdraw,\n        txhash: transactionHash,\n      };\n      callbacks.get('Withdraw') &&\n        callbacks.get('Withdraw')(null, withdrawEvent);\n    },\n  },\n\n  OnchainCooperativeSettleChannel: {\n    filter: () => {\n      return { user };\n    },\n    handler: async (event: any) => {\n      console.log(\n        '--------------------Handle CITA OnchainCooperativeSettleChannel--------------------'\n      );\n      let {\n        returnValues: { channelID, user, token, balance, lastCommitBlock },\n        transactionHash,\n      } = event;\n      console.log(\n        ' channelID: [%s], user: [%s], token: [%s], balance: [%s], lastCommitBlock: [%s] ',\n        channelID,\n        user,\n        token,\n        balance,\n        lastCommitBlock\n      );\n      let withdrawEvent: WITHDRAW_EVENT = {\n        user: user,\n        type: 2,\n        token,\n        amount: balance,\n        totalWithdraw: '',\n        txhash: transactionHash,\n      };\n      callbacks.get('Withdraw') &&\n        callbacks.get('Withdraw')(null, withdrawEvent);\n    },\n  },\n\n  OnchainSettleChannel: {\n    filter: () => {\n      return { user };\n    },\n    handler: async (event: any) => {\n      console.log(\n        '--------------------Handle CITA OnchainSettleChannel--------------------'\n      );\n      let {\n        returnValues: {\n          channelID,\n          user,\n          token,\n          userSettleAmount: transferTouserAmount,\n          providerSettleAmount: transferToProviderAmount,\n        },\n        transactionHash,\n      } = event;\n      console.log(\n        ' channelID: [%s], user: [%s], token: [%s], transferTouserAmount: [%s], transferToProviderAmount: [%s], ',\n        channelID,\n        user,\n        token,\n        transferTouserAmount,\n        transferToProviderAmount\n      );\n\n      let { closer } = await appPN.methods.closingChannelMap(channelID).call();\n      let forceWithdrawEvent: FORCEWITHDRAW_EVENT = {\n        closer,\n        token,\n        userSettleAmount: transferTouserAmount,\n        providerSettleAmount: transferToProviderAmount,\n        txhash: transactionHash,\n      };\n      callbacks.get('ForceWithdraw') &&\n        callbacks.get('ForceWithdraw')(null, forceWithdrawEvent);\n    },\n  },\n};\n\nexport const ethMethods = {\n  /**\n   *  submit user withdraw tx to eth payment contract.\n   *  1. find provider and regulator's confirmation from appchain\n   *  2. embrace provider and regualtor's signature in the withdraw request to eth payment contract\n   */\n  ethSubmitUserWithdraw: async (channelID: string, duration: number = 0) => {\n    await delay(duration);\n\n    let [\n      {\n        isConfirmed,\n        amount: withdraw,\n        providerSignature,\n        regulatorSignature,\n        lastCommitBlock,\n        receiver,\n      },\n    ] = await Promise.all([\n      appPN.methods.userWithdrawProofMap(channelID).call(),\n    ]);\n\n    console.log(\n      'userWithdrawProofMap: isConfirmed: [%s], withdraw: [%s], providerSignature: [%s], regulatorSignature: [%s], lastCommitBlock: [%s], receiver: [%s]',\n      isConfirmed,\n      withdraw,\n      providerSignature,\n      regulatorSignature,\n      lastCommitBlock,\n      receiver\n    );\n    if (!isConfirmed) {\n      console.log('userWithdrawProofMap not confirmed');\n      return;\n    }\n\n    let currentBlockNumber = await web3_10.eth.getBlockNumber();\n    if (\n      web3_10.utils\n        .toBN(currentBlockNumber)\n        .gt(web3_10.utils.toBN(lastCommitBlock))\n    ) {\n      console.log('unlock user withdraw now');\n\n      sendAppTx(appPN.methods.unlockUserWithdrawProof(channelID));\n    } else {\n      console.log('submit user withdraw now');\n      // TODO: check the eth tx has been submited before\n      let txData = ethPN.methods\n        .userWithdraw(\n          channelID,\n          withdraw,\n          lastCommitBlock,\n          providerSignature,\n          regulatorSignature,\n          receiver\n        )\n        .encodeABI();\n      sendEthTx(web3_outer, user, ethPN.options.address, 0, txData);\n    }\n  },\n\n  /**\n   *  submit cooperativeSettle tx to eth payment contract\n   *  1. find provider and regulator's confirmation from appchain\n   *  2. embrace provider and regualtor's signature in the cooperativeSettle request to eth payment contract\n   */\n  ethSubmitCooperativeSettle: async (channelID: string): Promise<string> => {\n    let {\n      isConfirmed,\n      balance: settleBalance,\n      lastCommitBlock,\n      providerSignature,\n      regulatorSignature,\n    } = await appPN.methods.cooperativeSettleProofMap(channelID).call();\n\n    console.log(\n      'cooperativeSettleProof: channelID: [%s], isConfirmed: [%s], balance: [%s], lastCommitBlock: [%s], providerSignature: [%s], regulatorSignature: [%s]',\n      channelID,\n      isConfirmed,\n      settleBalance,\n      lastCommitBlock,\n      providerSignature,\n      regulatorSignature\n    );\n\n    if (!isConfirmed) {\n      console.log('cooperativeSettleProof not confirmed');\n      return null;\n    }\n\n    let currentBlockNumber = await web3_10.eth.getBlockNumber();\n    if (\n      web3_10.utils\n        .toBN(currentBlockNumber)\n        .gt(web3_10.utils.toBN(lastCommitBlock))\n    ) {\n      return await sendAppTx(appPN.methods.unlockCooperativeSettle(channelID));\n    } else {\n      // TODO: check the eth tx has been submited before\n      let txData = ethPN.methods\n        .cooperativeSettle(\n          channelID,\n          settleBalance,\n          lastCommitBlock,\n          providerSignature,\n          regulatorSignature\n        )\n        .encodeABI();\n      return await sendEthTx(web3_outer, user, ethPN.options.address, 0, txData);\n    }\n  },\n\n  ethSettleChannel: async (channelID: string) => {\n    let txData = ethPN.methods.settleChannel(channelID).encodeABI();\n    sendEthTx(web3_outer, user, ethPN.options.address, 0, txData);\n  },\n};\n\nexport const appMethods = {\n  /**\n   * submit GuardProof tx to appchain payment contract\n   * 1. find user's received Transfer from appchain\n   * 2. sign the received Transfer\n   * 3. Build tx request which including user's received Transfer & user's signature\n   * 4. submit tx request to appchain payment contract\n   *\n   */\n  appSubmitGuardProof: async (channelID: string, to: string) => {\n    await delay(2 * CITA_TX_BLOCK_INTERVAL);\n    let {\n      balance,\n      nonce,\n      additionalHash,\n      signature,\n      consignorSignature,\n    } = await appPN.methods.balanceProofMap(channelID, to).call();\n\n    console.log(\n      'balanceProof:  balance: [%s], nonce: [%s], additionalHash: [%s], signature: [%s], consignorSignature: [%s]',\n      balance,\n      nonce,\n      additionalHash,\n      signature,\n      consignorSignature\n    );\n    // check if user has uploaded his guard proof\n    if (consignorSignature != null) {\n      console.log('balance proof already signed now');\n      return;\n    }\n\n    if (balance === '0') {\n      console.log('no balance proof now');\n      return;\n    }\n\n    // sign the received transfer\n    let messageHash = web3_10.utils.soliditySha3(\n      { t: 'address', v: ethPN.options.address },\n      { t: 'bytes32', v: channelID },\n      { t: 'uint256', v: balance },\n      { t: 'uint256', v: nonce },\n      { t: 'bytes32', v: additionalHash },\n      { t: 'bytes', v: signature }\n    );\n\n    consignorSignature = myEcsignToHex(\n      web3_10,\n      messageHash,\n      puppet.getAccount().privateKey\n    );\n\n    let appTx = await getAppTxOption();\n\n    console.log(\n      'guardBalanceProof params: channelID: [%s], balance: [%s], nonce: [%s], additionalHash: [%s], signature: [%s], consignorSignature: [%s]',\n      channelID,\n      balance,\n      nonce,\n      additionalHash,\n      signature,\n      consignorSignature\n    );\n    let res = await appPN.methods\n      .guardBalanceProof(\n        channelID,\n        balance,\n        nonce,\n        additionalHash,\n        signature,\n        consignorSignature\n      )\n      .send(appTx);\n\n    // check the response\n    if (res.hash) {\n      let receipt = await cita.listeners.listenToTransactionReceipt(res.hash);\n      if (receipt.errorMessage) {\n        console.error('[CITA] - guardBalanceProof', receipt.errorMessage);\n      } else {\n        console.log('submit cita tx success');\n      }\n    }\n  },\n};\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var __awaiter=(cov_1auhf3rlmu.s[0]++,(cov_1auhf3rlmu.b[0][0]++,this)&&(cov_1auhf3rlmu.b[0][1]++,this.__awaiter)||(cov_1auhf3rlmu.b[0][2]++,function(thisArg,_arguments,P,generator){cov_1auhf3rlmu.f[0]++;cov_1auhf3rlmu.s[1]++;return new((cov_1auhf3rlmu.b[1][0]++,P)||(cov_1auhf3rlmu.b[1][1]++,P=Promise))(function(resolve,reject){cov_1auhf3rlmu.f[1]++;function fulfilled(value){cov_1auhf3rlmu.f[2]++;cov_1auhf3rlmu.s[2]++;try{cov_1auhf3rlmu.s[3]++;step(generator.next(value));}catch(e){cov_1auhf3rlmu.s[4]++;reject(e);}}function rejected(value){cov_1auhf3rlmu.f[3]++;cov_1auhf3rlmu.s[5]++;try{cov_1auhf3rlmu.s[6]++;step(generator["throw"](value));}catch(e){cov_1auhf3rlmu.s[7]++;reject(e);}}function step(result){cov_1auhf3rlmu.f[4]++;cov_1auhf3rlmu.s[8]++;result.done?(cov_1auhf3rlmu.b[2][0]++,resolve(result.value)):(cov_1auhf3rlmu.b[2][1]++,new P(function(resolve){cov_1auhf3rlmu.f[5]++;cov_1auhf3rlmu.s[9]++;resolve(result.value);}).then(fulfilled,rejected));}cov_1auhf3rlmu.s[10]++;step((generator=generator.apply(thisArg,(cov_1auhf3rlmu.b[3][0]++,_arguments)||(cov_1auhf3rlmu.b[3][1]++,[]))).next());});}));var __generator=(cov_1auhf3rlmu.s[11]++,(cov_1auhf3rlmu.b[4][0]++,this)&&(cov_1auhf3rlmu.b[4][1]++,this.__generator)||(cov_1auhf3rlmu.b[4][2]++,function(thisArg,body){cov_1auhf3rlmu.f[6]++;var _=(cov_1auhf3rlmu.s[12]++,{label:0,sent:function(){cov_1auhf3rlmu.f[7]++;cov_1auhf3rlmu.s[13]++;if(t[0]&1){cov_1auhf3rlmu.b[5][0]++;cov_1auhf3rlmu.s[14]++;throw t[1];}else{cov_1auhf3rlmu.b[5][1]++;}cov_1auhf3rlmu.s[15]++;return t[1];},trys:[],ops:[]}),f,y,t,g;cov_1auhf3rlmu.s[16]++;return g={next:verb(0),"throw":verb(1),"return":verb(2)},(cov_1auhf3rlmu.b[6][0]++,typeof Symbol==="function")&&(cov_1auhf3rlmu.b[6][1]++,g[Symbol.iterator]=function(){cov_1auhf3rlmu.f[8]++;cov_1auhf3rlmu.s[17]++;return this;}),g;function verb(n){cov_1auhf3rlmu.f[9]++;cov_1auhf3rlmu.s[18]++;return function(v){cov_1auhf3rlmu.f[10]++;cov_1auhf3rlmu.s[19]++;return step([n,v]);};}function step(op){cov_1auhf3rlmu.f[11]++;cov_1auhf3rlmu.s[20]++;if(f){cov_1auhf3rlmu.b[7][0]++;cov_1auhf3rlmu.s[21]++;throw new TypeError("Generator is already executing.");}else{cov_1auhf3rlmu.b[7][1]++;}cov_1auhf3rlmu.s[22]++;while(_){cov_1auhf3rlmu.s[23]++;try{cov_1auhf3rlmu.s[24]++;if(f=1,(cov_1auhf3rlmu.b[9][0]++,y)&&(cov_1auhf3rlmu.b[9][1]++,t=op[0]&2?(cov_1auhf3rlmu.b[10][0]++,y["return"]):(cov_1auhf3rlmu.b[10][1]++,op[0]?(cov_1auhf3rlmu.b[11][0]++,(cov_1auhf3rlmu.b[12][0]++,y["throw"])||(cov_1auhf3rlmu.b[12][1]++,((cov_1auhf3rlmu.b[13][0]++,t=y["return"])&&(cov_1auhf3rlmu.b[13][1]++,t.call(y)),0))):(cov_1auhf3rlmu.b[11][1]++,y.next)))&&(cov_1auhf3rlmu.b[9][2]++,!(t=t.call(y,op[1])).done)){cov_1auhf3rlmu.b[8][0]++;cov_1auhf3rlmu.s[25]++;return t;}else{cov_1auhf3rlmu.b[8][1]++;}cov_1auhf3rlmu.s[26]++;if(y=0,t){cov_1auhf3rlmu.b[14][0]++;cov_1auhf3rlmu.s[27]++;op=[op[0]&2,t.value];}else{cov_1auhf3rlmu.b[14][1]++;}cov_1auhf3rlmu.s[28]++;switch(op[0]){case 0:cov_1auhf3rlmu.b[15][0]++;case 1:cov_1auhf3rlmu.b[15][1]++;cov_1auhf3rlmu.s[29]++;t=op;cov_1auhf3rlmu.s[30]++;break;case 4:cov_1auhf3rlmu.b[15][2]++;cov_1auhf3rlmu.s[31]++;_.label++;cov_1auhf3rlmu.s[32]++;return{value:op[1],done:false};case 5:cov_1auhf3rlmu.b[15][3]++;cov_1auhf3rlmu.s[33]++;_.label++;cov_1auhf3rlmu.s[34]++;y=op[1];cov_1auhf3rlmu.s[35]++;op=[0];cov_1auhf3rlmu.s[36]++;continue;case 7:cov_1auhf3rlmu.b[15][4]++;cov_1auhf3rlmu.s[37]++;op=_.ops.pop();cov_1auhf3rlmu.s[38]++;_.trys.pop();cov_1auhf3rlmu.s[39]++;continue;default:cov_1auhf3rlmu.b[15][5]++;cov_1auhf3rlmu.s[40]++;if((cov_1auhf3rlmu.b[17][0]++,!(t=_.trys,t=(cov_1auhf3rlmu.b[18][0]++,t.length>0)&&(cov_1auhf3rlmu.b[18][1]++,t[t.length-1])))&&((cov_1auhf3rlmu.b[17][1]++,op[0]===6)||(cov_1auhf3rlmu.b[17][2]++,op[0]===2))){cov_1auhf3rlmu.b[16][0]++;cov_1auhf3rlmu.s[41]++;_=0;cov_1auhf3rlmu.s[42]++;continue;}else{cov_1auhf3rlmu.b[16][1]++;}cov_1auhf3rlmu.s[43]++;if((cov_1auhf3rlmu.b[20][0]++,op[0]===3)&&((cov_1auhf3rlmu.b[20][1]++,!t)||(cov_1auhf3rlmu.b[20][2]++,op[1]>t[0])&&(cov_1auhf3rlmu.b[20][3]++,op[1]<t[3]))){cov_1auhf3rlmu.b[19][0]++;cov_1auhf3rlmu.s[44]++;_.label=op[1];cov_1auhf3rlmu.s[45]++;break;}else{cov_1auhf3rlmu.b[19][1]++;}cov_1auhf3rlmu.s[46]++;if((cov_1auhf3rlmu.b[22][0]++,op[0]===6)&&(cov_1auhf3rlmu.b[22][1]++,_.label<t[1])){cov_1auhf3rlmu.b[21][0]++;cov_1auhf3rlmu.s[47]++;_.label=t[1];cov_1auhf3rlmu.s[48]++;t=op;cov_1auhf3rlmu.s[49]++;break;}else{cov_1auhf3rlmu.b[21][1]++;}cov_1auhf3rlmu.s[50]++;if((cov_1auhf3rlmu.b[24][0]++,t)&&(cov_1auhf3rlmu.b[24][1]++,_.label<t[2])){cov_1auhf3rlmu.b[23][0]++;cov_1auhf3rlmu.s[51]++;_.label=t[2];cov_1auhf3rlmu.s[52]++;_.ops.push(op);cov_1auhf3rlmu.s[53]++;break;}else{cov_1auhf3rlmu.b[23][1]++;}cov_1auhf3rlmu.s[54]++;if(t[2]){cov_1auhf3rlmu.b[25][0]++;cov_1auhf3rlmu.s[55]++;_.ops.pop();}else{cov_1auhf3rlmu.b[25][1]++;}cov_1auhf3rlmu.s[56]++;_.trys.pop();cov_1auhf3rlmu.s[57]++;continue;}cov_1auhf3rlmu.s[58]++;op=body.call(thisArg,_);}catch(e){cov_1auhf3rlmu.s[59]++;op=[6,e];cov_1auhf3rlmu.s[60]++;y=0;}finally{cov_1auhf3rlmu.s[61]++;f=t=0;}}cov_1auhf3rlmu.s[62]++;if(op[0]&5){cov_1auhf3rlmu.b[26][0]++;cov_1auhf3rlmu.s[63]++;throw op[1];}else{cov_1auhf3rlmu.b[26][1]++;}cov_1auhf3rlmu.s[64]++;return{value:op[0]?(cov_1auhf3rlmu.b[27][0]++,op[1]):(cov_1auhf3rlmu.b[27][1]++,void 0),done:true};}}));var _this=(cov_1auhf3rlmu.s[65]++,this);cov_1auhf3rlmu.s[66]++;Object.defineProperty(exports,"__esModule",{value:true});var main_1=(cov_1auhf3rlmu.s[67]++,__webpack_require__(/*! ../main */ "./main.ts"));var common_1=(cov_1auhf3rlmu.s[68]++,__webpack_require__(/*! ../utils/common */ "./utils/common.ts"));var constants_1=(cov_1auhf3rlmu.s[69]++,__webpack_require__(/*! ../utils/constants */ "./utils/constants.ts"));cov_1auhf3rlmu.s[70]++;exports.events={ConfirmUserWithdraw:{filter:function(){cov_1auhf3rlmu.f[12]++;cov_1auhf3rlmu.s[71]++;return{user:main_1.user};},handler:function(event){cov_1auhf3rlmu.f[13]++;cov_1auhf3rlmu.s[72]++;return __awaiter(_this,void 0,void 0,function(){cov_1auhf3rlmu.f[14]++;var _a,channelID,user,confirmer,amount,lastCommitBlock,isAllConfirmed,providerSignature,regulatorSignature,transactionHash,txData;cov_1auhf3rlmu.s[73]++;return __generator(this,function(_b){cov_1auhf3rlmu.f[15]++;cov_1auhf3rlmu.s[74]++;console.log('--------------------Handle CITA ConfirmUserWithdraw--------------------');cov_1auhf3rlmu.s[75]++;_a=event.returnValues,channelID=_a.channelID,user=_a.user,confirmer=_a.confirmer,amount=_a.amount,lastCommitBlock=_a.lastCommitBlock,isAllConfirmed=_a.isAllConfirmed,providerSignature=_a.providerSignature,regulatorSignature=_a.regulatorSignature,transactionHash=event.transactionHash;cov_1auhf3rlmu.s[76]++;console.log(' channelID: [%s], user: [%s], confirmer: [%s], amount: [%s], lastCommitBlock: [%s], isAllConfirmed: [%s], providerSignature: [%s], regulatorSignature: [%s]',channelID,user,confirmer,amount,lastCommitBlock,isAllConfirmed,providerSignature,regulatorSignature);cov_1auhf3rlmu.s[77]++;if(isAllConfirmed===false){cov_1auhf3rlmu.b[28][0]++;cov_1auhf3rlmu.s[78]++;return[2];}else{cov_1auhf3rlmu.b[28][1]++;}cov_1auhf3rlmu.s[79]++;console.log('Receive ConfirmUserWithdraw event, will try to submit eth withdraw tx %s',transactionHash);cov_1auhf3rlmu.s[80]++;txData=main_1.ethPN.methods.userWithdraw(channelID,amount,lastCommitBlock,providerSignature,regulatorSignature,user).encodeABI();cov_1auhf3rlmu.s[81]++;common_1.sendEthTx(main_1.web3_outer,user,main_1.ethPN.options.address,0,txData);cov_1auhf3rlmu.s[82]++;return[2];});});}},ConfirmCooperativeSettle:{filter:function(){cov_1auhf3rlmu.f[16]++;cov_1auhf3rlmu.s[83]++;return{user:main_1.user};},handler:function(event){cov_1auhf3rlmu.f[17]++;cov_1auhf3rlmu.s[84]++;return __awaiter(_this,void 0,void 0,function(){cov_1auhf3rlmu.f[18]++;var _a,channelID,user,confirmer,balance,lastCommitBlock,isAllConfirmed,providerSignature,regulatorSignature,transactionHash,txData;cov_1auhf3rlmu.s[85]++;return __generator(this,function(_b){cov_1auhf3rlmu.f[19]++;cov_1auhf3rlmu.s[86]++;console.log('--------------------Handle CITA ConfirmCooperativeSettle--------------------');cov_1auhf3rlmu.s[87]++;_a=event.returnValues,channelID=_a.channelID,user=_a.user,confirmer=_a.confirmer,balance=_a.balance,lastCommitBlock=_a.lastCommitBlock,isAllConfirmed=_a.isAllConfirmed,providerSignature=_a.providerSignature,regulatorSignature=_a.regulatorSignature,transactionHash=event.transactionHash;cov_1auhf3rlmu.s[88]++;console.log(' channelID: [%s], user: [%s], confirmer: [%s], balance: [%s], lastCommitBlock: [%s], isAllConfirmed: [%s], providerSignature: [%s], regulatorSignature: [%s] ',channelID,user,confirmer,balance,lastCommitBlock,isAllConfirmed,providerSignature,regulatorSignature);cov_1auhf3rlmu.s[89]++;if(isAllConfirmed===false){cov_1auhf3rlmu.b[29][0]++;cov_1auhf3rlmu.s[90]++;return[2];}else{cov_1auhf3rlmu.b[29][1]++;}cov_1auhf3rlmu.s[91]++;console.log('Receive ConfirmCooperativeSettle event, will try to submit eth settle tx %s',transactionHash);cov_1auhf3rlmu.s[92]++;txData=main_1.ethPN.methods.cooperativeSettle(channelID,balance,lastCommitBlock,providerSignature,regulatorSignature).encodeABI();cov_1auhf3rlmu.s[93]++;common_1.sendEthTx(main_1.web3_outer,user,main_1.ethPN.options.address,0,txData);cov_1auhf3rlmu.s[94]++;return[2];});});}},Transfer:{filter:function(){cov_1auhf3rlmu.f[20]++;cov_1auhf3rlmu.s[95]++;return{to:main_1.user};},handler:function(event){cov_1auhf3rlmu.f[21]++;cov_1auhf3rlmu.s[96]++;return __awaiter(_this,void 0,void 0,function(){cov_1auhf3rlmu.f[22]++;var _a,from,to,channelID,balance,transferAmount,additionalHash,token,amount,transferEvent;cov_1auhf3rlmu.s[97]++;return __generator(this,function(_b){cov_1auhf3rlmu.f[23]++;cov_1auhf3rlmu.s[98]++;switch(_b.label){case 0:cov_1auhf3rlmu.b[30][0]++;cov_1auhf3rlmu.s[99]++;console.log('--------------------Handle CITA Transfer--------------------');cov_1auhf3rlmu.s[100]++;_a=event.returnValues,from=_a.from,to=_a.to,channelID=_a.channelID,balance=_a.balance,transferAmount=_a.transferAmount,additionalHash=_a.additionalHash;cov_1auhf3rlmu.s[101]++;console.log(' from: [%s], to: [%s], channelID: [%s], balance: [%s], transferAmount: [%s], additionalHash: [%s] ',from,to,channelID,balance,transferAmount,additionalHash);cov_1auhf3rlmu.s[102]++;if(!((cov_1auhf3rlmu.b[32][0]++,main_1.callbacks.get('Transfer'))&&(cov_1auhf3rlmu.b[32][1]++,additionalHash==='0x0000000000000000000000000000000000000000000000000000000000000000'))){cov_1auhf3rlmu.b[31][0]++;cov_1auhf3rlmu.s[103]++;return[3,2];}else{cov_1auhf3rlmu.b[31][1]++;}cov_1auhf3rlmu.s[104]++;return[4,main_1.appPN.methods.channelMap(channelID).call()];case 1:cov_1auhf3rlmu.b[30][1]++;cov_1auhf3rlmu.s[105]++;token=_b.sent().token;cov_1auhf3rlmu.s[106]++;amount=transferAmount;cov_1auhf3rlmu.s[107]++;transferEvent={from:from,to:to,token:token,amount:amount,additionalHash:additionalHash,totalTransferredAmount:balance};cov_1auhf3rlmu.s[108]++;main_1.callbacks.get('Transfer')(null,transferEvent);cov_1auhf3rlmu.s[109]++;_b.label=2;case 2:cov_1auhf3rlmu.b[30][2]++;cov_1auhf3rlmu.s[110]++;exports.appMethods.appSubmitGuardProof(channelID,to);cov_1auhf3rlmu.s[111]++;return[2];}});});}},OnchainAddPuppet:{filter:function(){cov_1auhf3rlmu.f[24]++;cov_1auhf3rlmu.s[112]++;return{user:main_1.user};},handler:function(event){cov_1auhf3rlmu.f[25]++;cov_1auhf3rlmu.s[113]++;return __awaiter(_this,void 0,void 0,function(){cov_1auhf3rlmu.f[26]++;var _a,user,puppet,puppetChangeEvent;cov_1auhf3rlmu.s[114]++;return __generator(this,function(_b){cov_1auhf3rlmu.f[27]++;cov_1auhf3rlmu.s[115]++;console.log('--------------------Handle CITA OnchainAddPuppet--------------------');cov_1auhf3rlmu.s[116]++;_a=event.returnValues,user=_a.user,puppet=_a.puppet;cov_1auhf3rlmu.s[117]++;console.log('user: [%s], puppet: [%s]',user,puppet);cov_1auhf3rlmu.s[118]++;puppetChangeEvent={user:user,puppet:puppet,type:1};cov_1auhf3rlmu.s[119]++;(cov_1auhf3rlmu.b[33][0]++,main_1.callbacks.get('PuppetChanged'))&&(cov_1auhf3rlmu.b[33][1]++,main_1.callbacks.get('PuppetChanged')(null,puppetChangeEvent));cov_1auhf3rlmu.s[120]++;return[2];});});}},OnchainDisablePuppet:{filter:function(){cov_1auhf3rlmu.f[28]++;cov_1auhf3rlmu.s[121]++;return{user:main_1.user};},handler:function(event){cov_1auhf3rlmu.f[29]++;cov_1auhf3rlmu.s[122]++;return __awaiter(_this,void 0,void 0,function(){cov_1auhf3rlmu.f[30]++;var _a,user,puppet,puppetChangeEvent;cov_1auhf3rlmu.s[123]++;return __generator(this,function(_b){cov_1auhf3rlmu.f[31]++;cov_1auhf3rlmu.s[124]++;console.log('--------------------Handle CITA OnchainDisablePuppet--------------------');cov_1auhf3rlmu.s[125]++;_a=event.returnValues,user=_a.user,puppet=_a.puppet;cov_1auhf3rlmu.s[126]++;console.log('user: [%s], puppet: [%s]',user,puppet);cov_1auhf3rlmu.s[127]++;puppetChangeEvent={user:user,puppet:puppet,type:2};cov_1auhf3rlmu.s[128]++;(cov_1auhf3rlmu.b[34][0]++,main_1.callbacks.get('PuppetChanged'))&&(cov_1auhf3rlmu.b[34][1]++,main_1.callbacks.get('PuppetChanged')(null,puppetChangeEvent));cov_1auhf3rlmu.s[129]++;return[2];});});}},OnchainOpenChannel:{filter:function(){cov_1auhf3rlmu.f[32]++;cov_1auhf3rlmu.s[130]++;return{user:main_1.user};},handler:function(event){cov_1auhf3rlmu.f[33]++;cov_1auhf3rlmu.s[131]++;return __awaiter(_this,void 0,void 0,function(){cov_1auhf3rlmu.f[34]++;var _a,user,token,amount,channelID,transactionHash,depositEvent;cov_1auhf3rlmu.s[132]++;return __generator(this,function(_b){cov_1auhf3rlmu.f[35]++;cov_1auhf3rlmu.s[133]++;console.log('--------------------Handle CITA OnchainOpenChannel--------------------');cov_1auhf3rlmu.s[134]++;_a=event.returnValues,user=_a.user,token=_a.token,amount=_a.amount,channelID=_a.channelID,transactionHash=event.transactionHash;cov_1auhf3rlmu.s[135]++;console.log(' user: [%s], token: [%s], amount: [%s], channelID: [%s] ',user,token,amount,channelID);cov_1auhf3rlmu.s[136]++;depositEvent={user:user,type:1,token:token,amount:amount,totalDeposit:amount,txhash:transactionHash};cov_1auhf3rlmu.s[137]++;(cov_1auhf3rlmu.b[35][0]++,main_1.callbacks.get('Deposit'))&&(cov_1auhf3rlmu.b[35][1]++,main_1.callbacks.get('Deposit')(null,depositEvent));cov_1auhf3rlmu.s[138]++;return[2];});});}},OnchainUserDeposit:{filter:function(){cov_1auhf3rlmu.f[36]++;cov_1auhf3rlmu.s[139]++;return{user:main_1.user};},handler:function(event){cov_1auhf3rlmu.f[37]++;cov_1auhf3rlmu.s[140]++;return __awaiter(_this,void 0,void 0,function(){cov_1auhf3rlmu.f[38]++;var _a,channelID,user,deposit,totalDeposit,transactionHash,token,depositEvent;cov_1auhf3rlmu.s[141]++;return __generator(this,function(_b){cov_1auhf3rlmu.f[39]++;cov_1auhf3rlmu.s[142]++;switch(_b.label){case 0:cov_1auhf3rlmu.b[36][0]++;cov_1auhf3rlmu.s[143]++;console.log('--------------------Handle CITA OnchainUserDeposit--------------------');cov_1auhf3rlmu.s[144]++;_a=event.returnValues,channelID=_a.channelID,user=_a.user,deposit=_a.deposit,totalDeposit=_a.totalDeposit,transactionHash=event.transactionHash;cov_1auhf3rlmu.s[145]++;console.log(' channelID: [%s], user: [%s], deposit: [%s], totalDeposit: [%s] ',channelID,user,deposit,totalDeposit);cov_1auhf3rlmu.s[146]++;return[4,main_1.ethPN.methods.channels(channelID).call()];case 1:cov_1auhf3rlmu.b[36][1]++;cov_1auhf3rlmu.s[147]++;token=_b.sent().token;cov_1auhf3rlmu.s[148]++;depositEvent={user:user,type:2,token:token,amount:deposit,totalDeposit:totalDeposit,txhash:transactionHash};cov_1auhf3rlmu.s[149]++;(cov_1auhf3rlmu.b[37][0]++,main_1.callbacks.get('Deposit'))&&(cov_1auhf3rlmu.b[37][1]++,main_1.callbacks.get('Deposit')(null,depositEvent));cov_1auhf3rlmu.s[150]++;return[2];}});});}},OnchainUserWithdraw:{filter:function(){cov_1auhf3rlmu.f[40]++;cov_1auhf3rlmu.s[151]++;return{user:main_1.user};},handler:function(event){cov_1auhf3rlmu.f[41]++;cov_1auhf3rlmu.s[152]++;return __awaiter(_this,void 0,void 0,function(){cov_1auhf3rlmu.f[42]++;var _a,channelID,user,amount,totalWithdraw,lastCommitBlock,transactionHash,token,withdrawEvent;cov_1auhf3rlmu.s[153]++;return __generator(this,function(_b){cov_1auhf3rlmu.f[43]++;cov_1auhf3rlmu.s[154]++;switch(_b.label){case 0:cov_1auhf3rlmu.b[38][0]++;cov_1auhf3rlmu.s[155]++;console.log('--------------------Handle CITA OnchainUserWithdraw--------------------');cov_1auhf3rlmu.s[156]++;_a=event.returnValues,channelID=_a.channelID,user=_a.user,amount=_a.amount,totalWithdraw=_a.withdraw,lastCommitBlock=_a.lastCommitBlock,transactionHash=event.transactionHash;cov_1auhf3rlmu.s[157]++;console.log(' channelID: [%s], user: [%s], amount: [%s], totalWithdraw: [%s], lastCommitBlock: [%s], ',channelID,user,amount,totalWithdraw,lastCommitBlock);cov_1auhf3rlmu.s[158]++;return[4,main_1.ethPN.methods.channels(channelID).call()];case 1:cov_1auhf3rlmu.b[38][1]++;cov_1auhf3rlmu.s[159]++;token=_b.sent().token;cov_1auhf3rlmu.s[160]++;withdrawEvent={user:user,type:1,token:token,amount:amount,totalWithdraw:totalWithdraw,txhash:transactionHash};cov_1auhf3rlmu.s[161]++;(cov_1auhf3rlmu.b[39][0]++,main_1.callbacks.get('Withdraw'))&&(cov_1auhf3rlmu.b[39][1]++,main_1.callbacks.get('Withdraw')(null,withdrawEvent));cov_1auhf3rlmu.s[162]++;return[2];}});});}},OnchainCooperativeSettleChannel:{filter:function(){cov_1auhf3rlmu.f[44]++;cov_1auhf3rlmu.s[163]++;return{user:main_1.user};},handler:function(event){cov_1auhf3rlmu.f[45]++;cov_1auhf3rlmu.s[164]++;return __awaiter(_this,void 0,void 0,function(){cov_1auhf3rlmu.f[46]++;var _a,channelID,user,token,balance,lastCommitBlock,transactionHash,withdrawEvent;cov_1auhf3rlmu.s[165]++;return __generator(this,function(_b){cov_1auhf3rlmu.f[47]++;cov_1auhf3rlmu.s[166]++;console.log('--------------------Handle CITA OnchainCooperativeSettleChannel--------------------');cov_1auhf3rlmu.s[167]++;_a=event.returnValues,channelID=_a.channelID,user=_a.user,token=_a.token,balance=_a.balance,lastCommitBlock=_a.lastCommitBlock,transactionHash=event.transactionHash;cov_1auhf3rlmu.s[168]++;console.log(' channelID: [%s], user: [%s], token: [%s], balance: [%s], lastCommitBlock: [%s] ',channelID,user,token,balance,lastCommitBlock);cov_1auhf3rlmu.s[169]++;withdrawEvent={user:user,type:2,token:token,amount:balance,totalWithdraw:'',txhash:transactionHash};cov_1auhf3rlmu.s[170]++;(cov_1auhf3rlmu.b[40][0]++,main_1.callbacks.get('Withdraw'))&&(cov_1auhf3rlmu.b[40][1]++,main_1.callbacks.get('Withdraw')(null,withdrawEvent));cov_1auhf3rlmu.s[171]++;return[2];});});}},OnchainSettleChannel:{filter:function(){cov_1auhf3rlmu.f[48]++;cov_1auhf3rlmu.s[172]++;return{user:main_1.user};},handler:function(event){cov_1auhf3rlmu.f[49]++;cov_1auhf3rlmu.s[173]++;return __awaiter(_this,void 0,void 0,function(){cov_1auhf3rlmu.f[50]++;var _a,channelID,user,token,transferTouserAmount,transferToProviderAmount,transactionHash,closer,forceWithdrawEvent;cov_1auhf3rlmu.s[174]++;return __generator(this,function(_b){cov_1auhf3rlmu.f[51]++;cov_1auhf3rlmu.s[175]++;switch(_b.label){case 0:cov_1auhf3rlmu.b[41][0]++;cov_1auhf3rlmu.s[176]++;console.log('--------------------Handle CITA OnchainSettleChannel--------------------');cov_1auhf3rlmu.s[177]++;_a=event.returnValues,channelID=_a.channelID,user=_a.user,token=_a.token,transferTouserAmount=_a.userSettleAmount,transferToProviderAmount=_a.providerSettleAmount,transactionHash=event.transactionHash;cov_1auhf3rlmu.s[178]++;console.log(' channelID: [%s], user: [%s], token: [%s], transferTouserAmount: [%s], transferToProviderAmount: [%s], ',channelID,user,token,transferTouserAmount,transferToProviderAmount);cov_1auhf3rlmu.s[179]++;return[4,main_1.appPN.methods.closingChannelMap(channelID).call()];case 1:cov_1auhf3rlmu.b[41][1]++;cov_1auhf3rlmu.s[180]++;closer=_b.sent().closer;cov_1auhf3rlmu.s[181]++;forceWithdrawEvent={closer:closer,token:token,userSettleAmount:transferTouserAmount,providerSettleAmount:transferToProviderAmount,txhash:transactionHash};cov_1auhf3rlmu.s[182]++;(cov_1auhf3rlmu.b[42][0]++,main_1.callbacks.get('ForceWithdraw'))&&(cov_1auhf3rlmu.b[42][1]++,main_1.callbacks.get('ForceWithdraw')(null,forceWithdrawEvent));cov_1auhf3rlmu.s[183]++;return[2];}});});}}};cov_1auhf3rlmu.s[184]++;exports.ethMethods={ethSubmitUserWithdraw:function(channelID,duration){cov_1auhf3rlmu.f[52]++;cov_1auhf3rlmu.s[185]++;if(duration===void 0){cov_1auhf3rlmu.b[43][0]++;cov_1auhf3rlmu.s[186]++;duration=0;}else{cov_1auhf3rlmu.b[43][1]++;}cov_1auhf3rlmu.s[187]++;return __awaiter(_this,void 0,void 0,function(){cov_1auhf3rlmu.f[53]++;var _a,isConfirmed,withdraw,providerSignature,regulatorSignature,lastCommitBlock,receiver,currentBlockNumber,txData;cov_1auhf3rlmu.s[188]++;return __generator(this,function(_b){cov_1auhf3rlmu.f[54]++;cov_1auhf3rlmu.s[189]++;switch(_b.label){case 0:cov_1auhf3rlmu.b[44][0]++;cov_1auhf3rlmu.s[190]++;return[4,common_1.delay(duration)];case 1:cov_1auhf3rlmu.b[44][1]++;cov_1auhf3rlmu.s[191]++;_b.sent();cov_1auhf3rlmu.s[192]++;return[4,Promise.all([main_1.appPN.methods.userWithdrawProofMap(channelID).call()])];case 2:cov_1auhf3rlmu.b[44][2]++;cov_1auhf3rlmu.s[193]++;_a=_b.sent()[0],isConfirmed=_a.isConfirmed,withdraw=_a.amount,providerSignature=_a.providerSignature,regulatorSignature=_a.regulatorSignature,lastCommitBlock=_a.lastCommitBlock,receiver=_a.receiver;cov_1auhf3rlmu.s[194]++;console.log('userWithdrawProofMap: isConfirmed: [%s], withdraw: [%s], providerSignature: [%s], regulatorSignature: [%s], lastCommitBlock: [%s], receiver: [%s]',isConfirmed,withdraw,providerSignature,regulatorSignature,lastCommitBlock,receiver);cov_1auhf3rlmu.s[195]++;if(!isConfirmed){cov_1auhf3rlmu.b[45][0]++;cov_1auhf3rlmu.s[196]++;console.log('userWithdrawProofMap not confirmed');cov_1auhf3rlmu.s[197]++;return[2];}else{cov_1auhf3rlmu.b[45][1]++;}cov_1auhf3rlmu.s[198]++;return[4,main_1.web3_10.eth.getBlockNumber()];case 3:cov_1auhf3rlmu.b[44][3]++;cov_1auhf3rlmu.s[199]++;currentBlockNumber=_b.sent();cov_1auhf3rlmu.s[200]++;if(main_1.web3_10.utils.toBN(currentBlockNumber).gt(main_1.web3_10.utils.toBN(lastCommitBlock))){cov_1auhf3rlmu.b[46][0]++;cov_1auhf3rlmu.s[201]++;console.log('unlock user withdraw now');cov_1auhf3rlmu.s[202]++;common_1.sendAppTx(main_1.appPN.methods.unlockUserWithdrawProof(channelID));}else{cov_1auhf3rlmu.b[46][1]++;cov_1auhf3rlmu.s[203]++;console.log('submit user withdraw now');cov_1auhf3rlmu.s[204]++;txData=main_1.ethPN.methods.userWithdraw(channelID,withdraw,lastCommitBlock,providerSignature,regulatorSignature,receiver).encodeABI();cov_1auhf3rlmu.s[205]++;common_1.sendEthTx(main_1.web3_outer,main_1.user,main_1.ethPN.options.address,0,txData);}cov_1auhf3rlmu.s[206]++;return[2];}});});},ethSubmitCooperativeSettle:function(channelID){cov_1auhf3rlmu.f[55]++;cov_1auhf3rlmu.s[207]++;return __awaiter(_this,void 0,void 0,function(){cov_1auhf3rlmu.f[56]++;var _a,isConfirmed,settleBalance,lastCommitBlock,providerSignature,regulatorSignature,currentBlockNumber,txData;cov_1auhf3rlmu.s[208]++;return __generator(this,function(_b){cov_1auhf3rlmu.f[57]++;cov_1auhf3rlmu.s[209]++;switch(_b.label){case 0:cov_1auhf3rlmu.b[47][0]++;cov_1auhf3rlmu.s[210]++;return[4,main_1.appPN.methods.cooperativeSettleProofMap(channelID).call()];case 1:cov_1auhf3rlmu.b[47][1]++;cov_1auhf3rlmu.s[211]++;_a=_b.sent(),isConfirmed=_a.isConfirmed,settleBalance=_a.balance,lastCommitBlock=_a.lastCommitBlock,providerSignature=_a.providerSignature,regulatorSignature=_a.regulatorSignature;cov_1auhf3rlmu.s[212]++;console.log('cooperativeSettleProof: channelID: [%s], isConfirmed: [%s], balance: [%s], lastCommitBlock: [%s], providerSignature: [%s], regulatorSignature: [%s]',channelID,isConfirmed,settleBalance,lastCommitBlock,providerSignature,regulatorSignature);cov_1auhf3rlmu.s[213]++;if(!isConfirmed){cov_1auhf3rlmu.b[48][0]++;cov_1auhf3rlmu.s[214]++;console.log('cooperativeSettleProof not confirmed');cov_1auhf3rlmu.s[215]++;return[2,null];}else{cov_1auhf3rlmu.b[48][1]++;}cov_1auhf3rlmu.s[216]++;return[4,main_1.web3_10.eth.getBlockNumber()];case 2:cov_1auhf3rlmu.b[47][2]++;cov_1auhf3rlmu.s[217]++;currentBlockNumber=_b.sent();cov_1auhf3rlmu.s[218]++;if(!main_1.web3_10.utils.toBN(currentBlockNumber).gt(main_1.web3_10.utils.toBN(lastCommitBlock))){cov_1auhf3rlmu.b[49][0]++;cov_1auhf3rlmu.s[219]++;return[3,4];}else{cov_1auhf3rlmu.b[49][1]++;}cov_1auhf3rlmu.s[220]++;return[4,common_1.sendAppTx(main_1.appPN.methods.unlockCooperativeSettle(channelID))];case 3:cov_1auhf3rlmu.b[47][3]++;cov_1auhf3rlmu.s[221]++;return[2,_b.sent()];case 4:cov_1auhf3rlmu.b[47][4]++;cov_1auhf3rlmu.s[222]++;txData=main_1.ethPN.methods.cooperativeSettle(channelID,settleBalance,lastCommitBlock,providerSignature,regulatorSignature).encodeABI();cov_1auhf3rlmu.s[223]++;return[4,common_1.sendEthTx(main_1.web3_outer,main_1.user,main_1.ethPN.options.address,0,txData)];case 5:cov_1auhf3rlmu.b[47][5]++;cov_1auhf3rlmu.s[224]++;return[2,_b.sent()];}});});},ethSettleChannel:function(channelID){cov_1auhf3rlmu.f[58]++;cov_1auhf3rlmu.s[225]++;return __awaiter(_this,void 0,void 0,function(){cov_1auhf3rlmu.f[59]++;var txData;cov_1auhf3rlmu.s[226]++;return __generator(this,function(_a){cov_1auhf3rlmu.f[60]++;cov_1auhf3rlmu.s[227]++;txData=main_1.ethPN.methods.settleChannel(channelID).encodeABI();cov_1auhf3rlmu.s[228]++;common_1.sendEthTx(main_1.web3_outer,main_1.user,main_1.ethPN.options.address,0,txData);cov_1auhf3rlmu.s[229]++;return[2];});});}};cov_1auhf3rlmu.s[230]++;exports.appMethods={appSubmitGuardProof:function(channelID,to){cov_1auhf3rlmu.f[61]++;cov_1auhf3rlmu.s[231]++;return __awaiter(_this,void 0,void 0,function(){cov_1auhf3rlmu.f[62]++;var _a,balance,nonce,additionalHash,signature,consignorSignature,messageHash,appTx,res,receipt;cov_1auhf3rlmu.s[232]++;return __generator(this,function(_b){cov_1auhf3rlmu.f[63]++;cov_1auhf3rlmu.s[233]++;switch(_b.label){case 0:cov_1auhf3rlmu.b[50][0]++;cov_1auhf3rlmu.s[234]++;return[4,common_1.delay(2*constants_1.CITA_TX_BLOCK_INTERVAL)];case 1:cov_1auhf3rlmu.b[50][1]++;cov_1auhf3rlmu.s[235]++;_b.sent();cov_1auhf3rlmu.s[236]++;return[4,main_1.appPN.methods.balanceProofMap(channelID,to).call()];case 2:cov_1auhf3rlmu.b[50][2]++;cov_1auhf3rlmu.s[237]++;_a=_b.sent(),balance=_a.balance,nonce=_a.nonce,additionalHash=_a.additionalHash,signature=_a.signature,consignorSignature=_a.consignorSignature;cov_1auhf3rlmu.s[238]++;console.log('balanceProof:  balance: [%s], nonce: [%s], additionalHash: [%s], signature: [%s], consignorSignature: [%s]',balance,nonce,additionalHash,signature,consignorSignature);cov_1auhf3rlmu.s[239]++;if(consignorSignature!=null){cov_1auhf3rlmu.b[51][0]++;cov_1auhf3rlmu.s[240]++;console.log('balance proof already signed now');cov_1auhf3rlmu.s[241]++;return[2];}else{cov_1auhf3rlmu.b[51][1]++;}cov_1auhf3rlmu.s[242]++;if(balance==='0'){cov_1auhf3rlmu.b[52][0]++;cov_1auhf3rlmu.s[243]++;console.log('no balance proof now');cov_1auhf3rlmu.s[244]++;return[2];}else{cov_1auhf3rlmu.b[52][1]++;}cov_1auhf3rlmu.s[245]++;messageHash=main_1.web3_10.utils.soliditySha3({t:'address',v:main_1.ethPN.options.address},{t:'bytes32',v:channelID},{t:'uint256',v:balance},{t:'uint256',v:nonce},{t:'bytes32',v:additionalHash},{t:'bytes',v:signature});cov_1auhf3rlmu.s[246]++;consignorSignature=common_1.myEcsignToHex(main_1.web3_10,messageHash,main_1.puppet.getAccount().privateKey);cov_1auhf3rlmu.s[247]++;return[4,common_1.getAppTxOption()];case 3:cov_1auhf3rlmu.b[50][3]++;cov_1auhf3rlmu.s[248]++;appTx=_b.sent();cov_1auhf3rlmu.s[249]++;console.log('guardBalanceProof params: channelID: [%s], balance: [%s], nonce: [%s], additionalHash: [%s], signature: [%s], consignorSignature: [%s]',channelID,balance,nonce,additionalHash,signature,consignorSignature);cov_1auhf3rlmu.s[250]++;return[4,main_1.appPN.methods.guardBalanceProof(channelID,balance,nonce,additionalHash,signature,consignorSignature).send(appTx)];case 4:cov_1auhf3rlmu.b[50][4]++;cov_1auhf3rlmu.s[251]++;res=_b.sent();cov_1auhf3rlmu.s[252]++;if(!res.hash){cov_1auhf3rlmu.b[53][0]++;cov_1auhf3rlmu.s[253]++;return[3,6];}else{cov_1auhf3rlmu.b[53][1]++;}cov_1auhf3rlmu.s[254]++;return[4,main_1.cita.listeners.listenToTransactionReceipt(res.hash)];case 5:cov_1auhf3rlmu.b[50][5]++;cov_1auhf3rlmu.s[255]++;receipt=_b.sent();cov_1auhf3rlmu.s[256]++;if(receipt.errorMessage){cov_1auhf3rlmu.b[54][0]++;cov_1auhf3rlmu.s[257]++;console.error('[CITA] - guardBalanceProof',receipt.errorMessage);}else{cov_1auhf3rlmu.b[54][1]++;cov_1auhf3rlmu.s[258]++;console.log('submit cita tx success');}cov_1auhf3rlmu.s[259]++;_b.label=6;case 6:cov_1auhf3rlmu.b[50][6]++;cov_1auhf3rlmu.s[260]++;return[2];}});});}};

/***/ }),

/***/ "./service/session.ts":
/*!****************************!*\
  !*** ./service/session.ts ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var cov_1l2lmpozf1=function(){var path="/Users/zhang/work/DigiCash/l2app/l2.js/src/service/session.ts",hash="a29ca5d550a2cedb313eaa631ba9ce1aa8fdcb67",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/zhang/work/DigiCash/l2app/l2.js/src/service/session.ts",statementMap:{"0":{start:{line:2,column:16},end:{line:9,column:1}},"1":{start:{line:3,column:4},end:{line:8,column:7}},"2":{start:{line:4,column:36},end:{line:4,column:97}},"3":{start:{line:4,column:42},end:{line:4,column:70}},"4":{start:{line:4,column:85},end:{line:4,column:95}},"5":{start:{line:5,column:35},end:{line:5,column:100}},"6":{start:{line:5,column:41},end:{line:5,column:73}},"7":{start:{line:5,column:88},end:{line:5,column:98}},"8":{start:{line:6,column:32},end:{line:6,column:149}},"9":{start:{line:6,column:97},end:{line:6,column:119}},"10":{start:{line:7,column:8},end:{line:7,column:78}},"11":{start:{line:10,column:18},end:{line:36,column:1}},"12":{start:{line:11,column:12},end:{line:11,column:104}},"13":{start:{line:11,column:43},end:{line:11,column:68}},"14":{start:{line:11,column:57},end:{line:11,column:68}},"15":{start:{line:11,column:69},end:{line:11,column:81}},"16":{start:{line:12,column:4},end:{line:12,column:157}},"17":{start:{line:12,column:138},end:{line:12,column:150}},"18":{start:{line:13,column:23},end:{line:13,column:68}},"19":{start:{line:13,column:45},end:{line:13,column:65}},"20":{start:{line:15,column:8},end:{line:15,column:70}},"21":{start:{line:15,column:15},end:{line:15,column:70}},"22":{start:{line:16,column:8},end:{line:33,column:66}},"23":{start:{line:16,column:18},end:{line:33,column:66}},"24":{start:{line:17,column:12},end:{line:17,column:169}},"25":{start:{line:17,column:160},end:{line:17,column:169}},"26":{start:{line:18,column:12},end:{line:18,column:52}},"27":{start:{line:18,column:26},end:{line:18,column:52}},"28":{start:{line:19,column:12},end:{line:31,column:13}},"29":{start:{line:20,column:32},end:{line:20,column:39}},"30":{start:{line:20,column:40},end:{line:20,column:46}},"31":{start:{line:21,column:24},end:{line:21,column:34}},"32":{start:{line:21,column:35},end:{line:21,column:72}},"33":{start:{line:22,column:24},end:{line:22,column:34}},"34":{start:{line:22,column:35},end:{line:22,column:45}},"35":{start:{line:22,column:46},end:{line:22,column:55}},"36":{start:{line:22,column:56},end:{line:22,column:65}},"37":{start:{line:23,column:24},end:{line:23,column:41}},"38":{start:{line:23,column:42},end:{line:23,column:55}},"39":{start:{line:23,column:56},end:{line:23,column:65}},"40":{start:{line:25,column:20},end:{line:25,column:128}},"41":{start:{line:25,column:110},end:{line:25,column:116}},"42":{start:{line:25,column:117},end:{line:25,column:126}},"43":{start:{line:26,column:20},end:{line:26,column:106}},"44":{start:{line:26,column:81},end:{line:26,column:97}},"45":{start:{line:26,column:98},end:{line:26,column:104}},"46":{start:{line:27,column:20},end:{line:27,column:89}},"47":{start:{line:27,column:57},end:{line:27,column:72}},"48":{start:{line:27,column:73},end:{line:27,column:80}},"49":{start:{line:27,column:81},end:{line:27,column:87}},"50":{start:{line:28,column:20},end:{line:28,column:87}},"51":{start:{line:28,column:47},end:{line:28,column:62}},"52":{start:{line:28,column:63},end:{line:28,column:78}},"53":{start:{line:28,column:79},end:{line:28,column:85}},"54":{start:{line:29,column:20},end:{line:29,column:42}},"55":{start:{line:29,column:30},end:{line:29,column:42}},"56":{start:{line:30,column:20},end:{line:30,column:33}},"57":{start:{line:30,column:34},end:{line:30,column:43}},"58":{start:{line:32,column:12},end:{line:32,column:39}},"59":{start:{line:33,column:22},end:{line:33,column:34}},"60":{start:{line:33,column:35},end:{line:33,column:41}},"61":{start:{line:33,column:54},end:{line:33,column:64}},"62":{start:{line:34,column:8},end:{line:34,column:35}},"63":{start:{line:34,column:23},end:{line:34,column:35}},"64":{start:{line:34,column:36},end:{line:34,column:89}},"65":{start:{line:37,column:12},end:{line:37,column:16}},"66":{start:{line:38,column:0},end:{line:38,column:62}},"67":{start:{line:39,column:16},end:{line:39,column:37}},"68":{start:{line:40,column:13},end:{line:40,column:31}},"69":{start:{line:41,column:0},end:{line:103,column:2}},"70":{start:{line:44,column:12},end:{line:44,column:39}},"71":{start:{line:46,column:36},end:{line:76,column:11}},"72":{start:{line:48,column:12},end:{line:75,column:15}},"73":{start:{line:49,column:16},end:{line:74,column:17}},"74":{start:{line:51,column:24},end:{line:51,column:103}},"75":{start:{line:52,column:24},end:{line:52,column:268}},"76":{start:{line:53,column:24},end:{line:53,column:236}},"77":{start:{line:54,column:24},end:{line:54,column:87}},"78":{start:{line:56,column:24},end:{line:56,column:44}},"79":{start:{line:57,column:24},end:{line:59,column:25}},"80":{start:{line:58,column:28},end:{line:58,column:39}},"81":{start:{line:60,column:24},end:{line:60,column:86}},"82":{start:{line:62,column:24},end:{line:62,column:50}},"83":{start:{line:63,column:24},end:{line:72,column:31}},"84":{start:{line:73,column:24},end:{line:73,column:35}},"85":{start:{line:80,column:12},end:{line:80,column:22}},"86":{start:{line:82,column:36},end:{line:101,column:11}},"87":{start:{line:84,column:12},end:{line:100,column:15}},"88":{start:{line:85,column:16},end:{line:99,column:17}},"89":{start:{line:87,column:24},end:{line:87,column:104}},"90":{start:{line:88,column:24},end:{line:88,column:65}},"91":{start:{line:89,column:24},end:{line:89,column:60}},"92":{start:{line:90,column:24},end:{line:90,column:87}},"93":{start:{line:92,column:24},end:{line:92,column:44}},"94":{start:{line:93,column:24},end:{line:95,column:25}},"95":{start:{line:94,column:28},end:{line:94,column:39}},"96":{start:{line:96,column:24},end:{line:97,column:69}},"97":{start:{line:98,column:24},end:{line:98,column:35}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:2,column:44},end:{line:2,column:45}},loc:{start:{line:2,column:89},end:{line:9,column:1}},line:2},"1":{name:"(anonymous_1)",decl:{start:{line:3,column:36},end:{line:3,column:37}},loc:{start:{line:3,column:63},end:{line:8,column:5}},line:3},"2":{name:"fulfilled",decl:{start:{line:4,column:17},end:{line:4,column:26}},loc:{start:{line:4,column:34},end:{line:4,column:99}},line:4},"3":{name:"rejected",decl:{start:{line:5,column:17},end:{line:5,column:25}},loc:{start:{line:5,column:33},end:{line:5,column:102}},line:5},"4":{name:"step",decl:{start:{line:6,column:17},end:{line:6,column:21}},loc:{start:{line:6,column:30},end:{line:6,column:151}},line:6},"5":{name:"(anonymous_5)",decl:{start:{line:6,column:76},end:{line:6,column:77}},loc:{start:{line:6,column:95},end:{line:6,column:121}},line:6},"6":{name:"(anonymous_6)",decl:{start:{line:10,column:48},end:{line:10,column:49}},loc:{start:{line:10,column:73},end:{line:36,column:1}},line:10},"7":{name:"(anonymous_7)",decl:{start:{line:11,column:30},end:{line:11,column:31}},loc:{start:{line:11,column:41},end:{line:11,column:83}},line:11},"8":{name:"(anonymous_8)",decl:{start:{line:12,column:125},end:{line:12,column:126}},loc:{start:{line:12,column:136},end:{line:12,column:152}},line:12},"9":{name:"verb",decl:{start:{line:13,column:13},end:{line:13,column:17}},loc:{start:{line:13,column:21},end:{line:13,column:70}},line:13},"10":{name:"(anonymous_10)",decl:{start:{line:13,column:30},end:{line:13,column:31}},loc:{start:{line:13,column:43},end:{line:13,column:67}},line:13},"11":{name:"step",decl:{start:{line:14,column:13},end:{line:14,column:17}},loc:{start:{line:14,column:22},end:{line:35,column:5}},line:14},"12":{name:"(anonymous_12)",decl:{start:{line:43,column:16},end:{line:43,column:17}},loc:{start:{line:43,column:28},end:{line:45,column:9}},line:43},"13":{name:"(anonymous_13)",decl:{start:{line:46,column:17},end:{line:46,column:18}},loc:{start:{line:46,column:34},end:{line:76,column:13}},line:46},"14":{name:"(anonymous_14)",decl:{start:{line:46,column:76},end:{line:46,column:77}},loc:{start:{line:46,column:88},end:{line:76,column:9}},line:46},"15":{name:"(anonymous_15)",decl:{start:{line:48,column:37},end:{line:48,column:38}},loc:{start:{line:48,column:51},end:{line:75,column:13}},line:48},"16":{name:"(anonymous_16)",decl:{start:{line:79,column:16},end:{line:79,column:17}},loc:{start:{line:79,column:28},end:{line:81,column:9}},line:79},"17":{name:"(anonymous_17)",decl:{start:{line:82,column:17},end:{line:82,column:18}},loc:{start:{line:82,column:34},end:{line:101,column:13}},line:82},"18":{name:"(anonymous_18)",decl:{start:{line:82,column:76},end:{line:82,column:77}},loc:{start:{line:82,column:88},end:{line:101,column:9}},line:82},"19":{name:"(anonymous_19)",decl:{start:{line:84,column:37},end:{line:84,column:38}},loc:{start:{line:84,column:51},end:{line:100,column:13}},line:84}},branchMap:{"0":{loc:{start:{line:2,column:16},end:{line:9,column:1}},type:"binary-expr",locations:[{start:{line:2,column:17},end:{line:2,column:21}},{start:{line:2,column:25},end:{line:2,column:39}},{start:{line:2,column:44},end:{line:9,column:1}}],line:2},"1":{loc:{start:{line:3,column:16},end:{line:3,column:34}},type:"binary-expr",locations:[{start:{line:3,column:16},end:{line:3,column:17}},{start:{line:3,column:22},end:{line:3,column:33}}],line:3},"2":{loc:{start:{line:6,column:32},end:{line:6,column:148}},type:"cond-expr",locations:[{start:{line:6,column:46},end:{line:6,column:67}},{start:{line:6,column:70},end:{line:6,column:148}}],line:6},"3":{loc:{start:{line:7,column:51},end:{line:7,column:67}},type:"binary-expr",locations:[{start:{line:7,column:51},end:{line:7,column:61}},{start:{line:7,column:65},end:{line:7,column:67}}],line:7},"4":{loc:{start:{line:10,column:18},end:{line:36,column:1}},type:"binary-expr",locations:[{start:{line:10,column:19},end:{line:10,column:23}},{start:{line:10,column:27},end:{line:10,column:43}},{start:{line:10,column:48},end:{line:36,column:1}}],line:10},"5":{loc:{start:{line:11,column:43},end:{line:11,column:68}},type:"if",locations:[{start:{line:11,column:43},end:{line:11,column:68}},{start:{line:11,column:43},end:{line:11,column:68}}],line:11},"6":{loc:{start:{line:12,column:71},end:{line:12,column:153}},type:"binary-expr",locations:[{start:{line:12,column:71},end:{line:12,column:99}},{start:{line:12,column:104},end:{line:12,column:152}}],line:12},"7":{loc:{start:{line:15,column:8},end:{line:15,column:70}},type:"if",locations:[{start:{line:15,column:8},end:{line:15,column:70}},{start:{line:15,column:8},end:{line:15,column:70}}],line:15},"8":{loc:{start:{line:17,column:12},end:{line:17,column:169}},type:"if",locations:[{start:{line:17,column:12},end:{line:17,column:169}},{start:{line:17,column:12},end:{line:17,column:169}}],line:17},"9":{loc:{start:{line:17,column:23},end:{line:17,column:158}},type:"binary-expr",locations:[{start:{line:17,column:23},end:{line:17,column:24}},{start:{line:17,column:29},end:{line:17,column:125}},{start:{line:17,column:130},end:{line:17,column:158}}],line:17},"10":{loc:{start:{line:17,column:33},end:{line:17,column:125}},type:"cond-expr",locations:[{start:{line:17,column:45},end:{line:17,column:56}},{start:{line:17,column:59},end:{line:17,column:125}}],line:17},"11":{loc:{start:{line:17,column:59},end:{line:17,column:125}},type:"cond-expr",locations:[{start:{line:17,column:67},end:{line:17,column:116}},{start:{line:17,column:119},end:{line:17,column:125}}],line:17},"12":{loc:{start:{line:17,column:67},end:{line:17,column:116}},type:"binary-expr",locations:[{start:{line:17,column:67},end:{line:17,column:77}},{start:{line:17,column:82},end:{line:17,column:115}}],line:17},"13":{loc:{start:{line:17,column:82},end:{line:17,column:112}},type:"binary-expr",locations:[{start:{line:17,column:83},end:{line:17,column:98}},{start:{line:17,column:103},end:{line:17,column:112}}],line:17},"14":{loc:{start:{line:18,column:12},end:{line:18,column:52}},type:"if",locations:[{start:{line:18,column:12},end:{line:18,column:52}},{start:{line:18,column:12},end:{line:18,column:52}}],line:18},"15":{loc:{start:{line:19,column:12},end:{line:31,column:13}},type:"switch",locations:[{start:{line:20,column:16},end:{line:20,column:23}},{start:{line:20,column:24},end:{line:20,column:46}},{start:{line:21,column:16},end:{line:21,column:72}},{start:{line:22,column:16},end:{line:22,column:65}},{start:{line:23,column:16},end:{line:23,column:65}},{start:{line:24,column:16},end:{line:30,column:43}}],line:19},"16":{loc:{start:{line:25,column:20},end:{line:25,column:128}},type:"if",locations:[{start:{line:25,column:20},end:{line:25,column:128}},{start:{line:25,column:20},end:{line:25,column:128}}],line:25},"17":{loc:{start:{line:25,column:24},end:{line:25,column:106}},type:"binary-expr",locations:[{start:{line:25,column:24},end:{line:25,column:74}},{start:{line:25,column:79},end:{line:25,column:90}},{start:{line:25,column:94},end:{line:25,column:105}}],line:25},"18":{loc:{start:{line:25,column:42},end:{line:25,column:73}},type:"binary-expr",locations:[{start:{line:25,column:42},end:{line:25,column:54}},{start:{line:25,column:58},end:{line:25,column:73}}],line:25},"19":{loc:{start:{line:26,column:20},end:{line:26,column:106}},type:"if",locations:[{start:{line:26,column:20},end:{line:26,column:106}},{start:{line:26,column:20},end:{line:26,column:106}}],line:26},"20":{loc:{start:{line:26,column:24},end:{line:26,column:77}},type:"binary-expr",locations:[{start:{line:26,column:24},end:{line:26,column:35}},{start:{line:26,column:40},end:{line:26,column:42}},{start:{line:26,column:47},end:{line:26,column:59}},{start:{line:26,column:63},end:{line:26,column:75}}],line:26},"21":{loc:{start:{line:27,column:20},end:{line:27,column:89}},type:"if",locations:[{start:{line:27,column:20},end:{line:27,column:89}},{start:{line:27,column:20},end:{line:27,column:89}}],line:27},"22":{loc:{start:{line:27,column:24},end:{line:27,column:53}},type:"binary-expr",locations:[{start:{line:27,column:24},end:{line:27,column:35}},{start:{line:27,column:39},end:{line:27,column:53}}],line:27},"23":{loc:{start:{line:28,column:20},end:{line:28,column:87}},type:"if",locations:[{start:{line:28,column:20},end:{line:28,column:87}},{start:{line:28,column:20},end:{line:28,column:87}}],line:28},"24":{loc:{start:{line:28,column:24},end:{line:28,column:43}},type:"binary-expr",locations:[{start:{line:28,column:24},end:{line:28,column:25}},{start:{line:28,column:29},end:{line:28,column:43}}],line:28},"25":{loc:{start:{line:29,column:20},end:{line:29,column:42}},type:"if",locations:[{start:{line:29,column:20},end:{line:29,column:42}},{start:{line:29,column:20},end:{line:29,column:42}}],line:29},"26":{loc:{start:{line:34,column:8},end:{line:34,column:35}},type:"if",locations:[{start:{line:34,column:8},end:{line:34,column:35}},{start:{line:34,column:8},end:{line:34,column:35}}],line:34},"27":{loc:{start:{line:34,column:52},end:{line:34,column:74}},type:"cond-expr",locations:[{start:{line:34,column:60},end:{line:34,column:65}},{start:{line:34,column:68},end:{line:34,column:74}}],line:34},"28":{loc:{start:{line:49,column:16},end:{line:74,column:17}},type:"switch",locations:[{start:{line:50,column:20},end:{line:54,column:87}},{start:{line:55,column:20},end:{line:60,column:86}},{start:{line:61,column:20},end:{line:73,column:35}}],line:49},"29":{loc:{start:{line:57,column:24},end:{line:59,column:25}},type:"if",locations:[{start:{line:57,column:24},end:{line:59,column:25}},{start:{line:57,column:24},end:{line:59,column:25}}],line:57},"30":{loc:{start:{line:63,column:24},end:{line:72,column:30}},type:"binary-expr",locations:[{start:{line:63,column:24},end:{line:63,column:56}},{start:{line:64,column:28},end:{line:72,column:30}}],line:63},"31":{loc:{start:{line:85,column:16},end:{line:99,column:17}},type:"switch",locations:[{start:{line:86,column:20},end:{line:90,column:87}},{start:{line:91,column:20},end:{line:98,column:35}}],line:85},"32":{loc:{start:{line:93,column:24},end:{line:95,column:25}},type:"if",locations:[{start:{line:93,column:24},end:{line:95,column:25}},{start:{line:93,column:24},end:{line:95,column:25}}],line:93},"33":{loc:{start:{line:96,column:24},end:{line:97,column:68}},type:"binary-expr",locations:[{start:{line:96,column:24},end:{line:96,column:54}},{start:{line:97,column:28},end:{line:97,column:68}}],line:96}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},b:{"0":[0,0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0,0,0,0],"16":[0,0],"17":[0,0,0],"18":[0,0],"19":[0,0],"20":[0,0,0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0]},inputSourceMap:{version:3,file:"/Users/zhang/work/DigiCash/l2app/l2.js/src/service/session.ts",sourceRoot:"/Users/zhang/work/DigiCash/l2app/l2.js/",sources:["node_modules/source-map-loader/index.js!/Users/zhang/work/DigiCash/l2app/l2.js/src/service/session.ts"],names:[],mappings:";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iBA0FA;;AA1FA,sCAAmC;AACnC,gCAAoC;AAEvB,QAAA,MAAM,GAAG;IAWpB,WAAW,EAAE;QACX,MAAM,EAAE;YACN,OAAO,EAAE,IAAI,EAAE,SAAE,EAAE,CAAC;QACtB,CAAC;QACD,OAAO,EAAE,UAAO,KAAU;;;;;wBACxB,OAAO,CAAC,GAAG,CACT,iEAAiE,CAClE,CAAC;wBAEA,KAYE,KAAK,aAFN,EATC,IAAI,UAAA,EACJ,EAAE,QAAA,EACF,SAAS,eAAA,EACF,IAAI,WAAA,EACX,OAAO,aAAA,EACP,SAAS,eAAA,EACT,OAAO,aAAA,EACP,KAAK,WAAA,EACL,MAAM,YAAA,EAER,eAAe,GACb,KAAK,gBADQ,CACP;wBAEV,OAAO,CAAC,GAAG,CACT,+HAA+H,EAC/H,IAAI,EACJ,EAAE,EACF,SAAS,EACT,IAAI,EACJ,OAAO,EACP,SAAS,EACT,OAAO,EACP,KAAK,EACL,MAAM,CACP,CAAC;wBACY,WAAM,iBAAS,CAAC,cAAc,CAAC,SAAS,EAAE,KAAK,CAAC,EAAA;;wBAA1D,OAAO,GAAG,SAAgD;wBAC9D,IAAI,CAAC,OAAO,EAAE;4BACZ,WAAO;yBACR;wBACe,WAAM,YAAK,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,EAAA;;wBAA1D,KAAK,GAAK,CAAA,SAAgD,CAAA,MAArD;wBAEX,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC;4BAC9B,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE;gCACrC,IAAI,MAAA;gCACJ,EAAE,IAAA;gCACF,SAAS,WAAA;gCACT,IAAI,MAAA;gCACJ,OAAO,SAAA;gCACP,MAAM,QAAA;gCACN,KAAK,OAAA;6BACN,CAAC,CAAC;;;;aACN;KACF;IACD,YAAY,EAAE;QACZ,MAAM,EAAE;YACN,OAAO,EAAE,CAAC;QACZ,CAAC;QACD,OAAO,EAAE,UAAO,KAAU;;;;;wBACxB,OAAO,CAAC,GAAG,CACT,kEAAkE,CACnE,CAAC;wBAEgB,SAAS,GACvB,KAAK,uBADkB,CACjB;wBACV,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;wBAEtB,WAAM,iBAAS,CAAC,cAAc,CAAC,SAAS,EAAE,KAAK,CAAC,EAAA;;wBAA1D,OAAO,GAAG,SAAgD;wBAC9D,IAAI,CAAC,OAAO,EAAE;4BACZ,WAAO;yBACR;wBAED,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC;4BAC5B,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;;;;aAC5C;KACF;CACF,CAAC",sourcesContent:["import L2Session from '../session';\nimport { cp, appPN } from '../main';\n\nexport const events = {\n  // 'InitSession': {\n  //     filter: () => { return {} },\n  //     handler: async (event: any) => {\n  //     }\n  // },\n  // 'JoinSession': {\n  //     filter: () => { return {} },\n  //     handler: async (event: any) => {\n  //     }\n  // },\n  SendMessage: {\n    filter: () => {\n      return { from: cp };\n    },\n    handler: async (event: any) => {\n      console.log(\n        '--------------------Handle CITA SendMessage--------------------'\n      );\n      let {\n        returnValues: {\n          from,\n          to,\n          sessionID,\n          mType: type,\n          content,\n          channelID,\n          balance,\n          nonce,\n          amount,\n        },\n        transactionHash,\n      } = event;\n\n      console.log(\n        ' from: [%s], to: [%s], sessionID: [%s], type: [%s], content: [%s], channelID: [%s], balance: [%s], nonce: [%s], amount: [%s] ',\n        from,\n        to,\n        sessionID,\n        type,\n        content,\n        channelID,\n        balance,\n        nonce,\n        amount\n      );\n      let session = await L2Session.getSessionById(sessionID, false);\n      if (!session) {\n        return;\n      }\n      let { token } = await appPN.methods.channelMap(channelID).call();\n\n      session.callbacks.get('message') &&\n        session.callbacks.get('message')(null, {\n          from,\n          to,\n          sessionID,\n          type,\n          content,\n          amount,\n          token,\n        });\n    },\n  },\n  CloseSession: {\n    filter: () => {\n      return {};\n    },\n    handler: async (event: any) => {\n      console.log(\n        '--------------------Handle CITA CloseSession--------------------'\n      );\n      let {\n        returnValues: { sessionID },\n      } = event;\n      console.log('sessionID', sessionID);\n\n      let session = await L2Session.getSessionById(sessionID, false);\n      if (!session) {\n        return;\n      }\n\n      session.callbacks.get('close') &&\n        session.callbacks.get('close')(null, {});\n    },\n  },\n};\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var __awaiter=(cov_1l2lmpozf1.s[0]++,(cov_1l2lmpozf1.b[0][0]++,this)&&(cov_1l2lmpozf1.b[0][1]++,this.__awaiter)||(cov_1l2lmpozf1.b[0][2]++,function(thisArg,_arguments,P,generator){cov_1l2lmpozf1.f[0]++;cov_1l2lmpozf1.s[1]++;return new((cov_1l2lmpozf1.b[1][0]++,P)||(cov_1l2lmpozf1.b[1][1]++,P=Promise))(function(resolve,reject){cov_1l2lmpozf1.f[1]++;function fulfilled(value){cov_1l2lmpozf1.f[2]++;cov_1l2lmpozf1.s[2]++;try{cov_1l2lmpozf1.s[3]++;step(generator.next(value));}catch(e){cov_1l2lmpozf1.s[4]++;reject(e);}}function rejected(value){cov_1l2lmpozf1.f[3]++;cov_1l2lmpozf1.s[5]++;try{cov_1l2lmpozf1.s[6]++;step(generator["throw"](value));}catch(e){cov_1l2lmpozf1.s[7]++;reject(e);}}function step(result){cov_1l2lmpozf1.f[4]++;cov_1l2lmpozf1.s[8]++;result.done?(cov_1l2lmpozf1.b[2][0]++,resolve(result.value)):(cov_1l2lmpozf1.b[2][1]++,new P(function(resolve){cov_1l2lmpozf1.f[5]++;cov_1l2lmpozf1.s[9]++;resolve(result.value);}).then(fulfilled,rejected));}cov_1l2lmpozf1.s[10]++;step((generator=generator.apply(thisArg,(cov_1l2lmpozf1.b[3][0]++,_arguments)||(cov_1l2lmpozf1.b[3][1]++,[]))).next());});}));var __generator=(cov_1l2lmpozf1.s[11]++,(cov_1l2lmpozf1.b[4][0]++,this)&&(cov_1l2lmpozf1.b[4][1]++,this.__generator)||(cov_1l2lmpozf1.b[4][2]++,function(thisArg,body){cov_1l2lmpozf1.f[6]++;var _=(cov_1l2lmpozf1.s[12]++,{label:0,sent:function(){cov_1l2lmpozf1.f[7]++;cov_1l2lmpozf1.s[13]++;if(t[0]&1){cov_1l2lmpozf1.b[5][0]++;cov_1l2lmpozf1.s[14]++;throw t[1];}else{cov_1l2lmpozf1.b[5][1]++;}cov_1l2lmpozf1.s[15]++;return t[1];},trys:[],ops:[]}),f,y,t,g;cov_1l2lmpozf1.s[16]++;return g={next:verb(0),"throw":verb(1),"return":verb(2)},(cov_1l2lmpozf1.b[6][0]++,typeof Symbol==="function")&&(cov_1l2lmpozf1.b[6][1]++,g[Symbol.iterator]=function(){cov_1l2lmpozf1.f[8]++;cov_1l2lmpozf1.s[17]++;return this;}),g;function verb(n){cov_1l2lmpozf1.f[9]++;cov_1l2lmpozf1.s[18]++;return function(v){cov_1l2lmpozf1.f[10]++;cov_1l2lmpozf1.s[19]++;return step([n,v]);};}function step(op){cov_1l2lmpozf1.f[11]++;cov_1l2lmpozf1.s[20]++;if(f){cov_1l2lmpozf1.b[7][0]++;cov_1l2lmpozf1.s[21]++;throw new TypeError("Generator is already executing.");}else{cov_1l2lmpozf1.b[7][1]++;}cov_1l2lmpozf1.s[22]++;while(_){cov_1l2lmpozf1.s[23]++;try{cov_1l2lmpozf1.s[24]++;if(f=1,(cov_1l2lmpozf1.b[9][0]++,y)&&(cov_1l2lmpozf1.b[9][1]++,t=op[0]&2?(cov_1l2lmpozf1.b[10][0]++,y["return"]):(cov_1l2lmpozf1.b[10][1]++,op[0]?(cov_1l2lmpozf1.b[11][0]++,(cov_1l2lmpozf1.b[12][0]++,y["throw"])||(cov_1l2lmpozf1.b[12][1]++,((cov_1l2lmpozf1.b[13][0]++,t=y["return"])&&(cov_1l2lmpozf1.b[13][1]++,t.call(y)),0))):(cov_1l2lmpozf1.b[11][1]++,y.next)))&&(cov_1l2lmpozf1.b[9][2]++,!(t=t.call(y,op[1])).done)){cov_1l2lmpozf1.b[8][0]++;cov_1l2lmpozf1.s[25]++;return t;}else{cov_1l2lmpozf1.b[8][1]++;}cov_1l2lmpozf1.s[26]++;if(y=0,t){cov_1l2lmpozf1.b[14][0]++;cov_1l2lmpozf1.s[27]++;op=[op[0]&2,t.value];}else{cov_1l2lmpozf1.b[14][1]++;}cov_1l2lmpozf1.s[28]++;switch(op[0]){case 0:cov_1l2lmpozf1.b[15][0]++;case 1:cov_1l2lmpozf1.b[15][1]++;cov_1l2lmpozf1.s[29]++;t=op;cov_1l2lmpozf1.s[30]++;break;case 4:cov_1l2lmpozf1.b[15][2]++;cov_1l2lmpozf1.s[31]++;_.label++;cov_1l2lmpozf1.s[32]++;return{value:op[1],done:false};case 5:cov_1l2lmpozf1.b[15][3]++;cov_1l2lmpozf1.s[33]++;_.label++;cov_1l2lmpozf1.s[34]++;y=op[1];cov_1l2lmpozf1.s[35]++;op=[0];cov_1l2lmpozf1.s[36]++;continue;case 7:cov_1l2lmpozf1.b[15][4]++;cov_1l2lmpozf1.s[37]++;op=_.ops.pop();cov_1l2lmpozf1.s[38]++;_.trys.pop();cov_1l2lmpozf1.s[39]++;continue;default:cov_1l2lmpozf1.b[15][5]++;cov_1l2lmpozf1.s[40]++;if((cov_1l2lmpozf1.b[17][0]++,!(t=_.trys,t=(cov_1l2lmpozf1.b[18][0]++,t.length>0)&&(cov_1l2lmpozf1.b[18][1]++,t[t.length-1])))&&((cov_1l2lmpozf1.b[17][1]++,op[0]===6)||(cov_1l2lmpozf1.b[17][2]++,op[0]===2))){cov_1l2lmpozf1.b[16][0]++;cov_1l2lmpozf1.s[41]++;_=0;cov_1l2lmpozf1.s[42]++;continue;}else{cov_1l2lmpozf1.b[16][1]++;}cov_1l2lmpozf1.s[43]++;if((cov_1l2lmpozf1.b[20][0]++,op[0]===3)&&((cov_1l2lmpozf1.b[20][1]++,!t)||(cov_1l2lmpozf1.b[20][2]++,op[1]>t[0])&&(cov_1l2lmpozf1.b[20][3]++,op[1]<t[3]))){cov_1l2lmpozf1.b[19][0]++;cov_1l2lmpozf1.s[44]++;_.label=op[1];cov_1l2lmpozf1.s[45]++;break;}else{cov_1l2lmpozf1.b[19][1]++;}cov_1l2lmpozf1.s[46]++;if((cov_1l2lmpozf1.b[22][0]++,op[0]===6)&&(cov_1l2lmpozf1.b[22][1]++,_.label<t[1])){cov_1l2lmpozf1.b[21][0]++;cov_1l2lmpozf1.s[47]++;_.label=t[1];cov_1l2lmpozf1.s[48]++;t=op;cov_1l2lmpozf1.s[49]++;break;}else{cov_1l2lmpozf1.b[21][1]++;}cov_1l2lmpozf1.s[50]++;if((cov_1l2lmpozf1.b[24][0]++,t)&&(cov_1l2lmpozf1.b[24][1]++,_.label<t[2])){cov_1l2lmpozf1.b[23][0]++;cov_1l2lmpozf1.s[51]++;_.label=t[2];cov_1l2lmpozf1.s[52]++;_.ops.push(op);cov_1l2lmpozf1.s[53]++;break;}else{cov_1l2lmpozf1.b[23][1]++;}cov_1l2lmpozf1.s[54]++;if(t[2]){cov_1l2lmpozf1.b[25][0]++;cov_1l2lmpozf1.s[55]++;_.ops.pop();}else{cov_1l2lmpozf1.b[25][1]++;}cov_1l2lmpozf1.s[56]++;_.trys.pop();cov_1l2lmpozf1.s[57]++;continue;}cov_1l2lmpozf1.s[58]++;op=body.call(thisArg,_);}catch(e){cov_1l2lmpozf1.s[59]++;op=[6,e];cov_1l2lmpozf1.s[60]++;y=0;}finally{cov_1l2lmpozf1.s[61]++;f=t=0;}}cov_1l2lmpozf1.s[62]++;if(op[0]&5){cov_1l2lmpozf1.b[26][0]++;cov_1l2lmpozf1.s[63]++;throw op[1];}else{cov_1l2lmpozf1.b[26][1]++;}cov_1l2lmpozf1.s[64]++;return{value:op[0]?(cov_1l2lmpozf1.b[27][0]++,op[1]):(cov_1l2lmpozf1.b[27][1]++,void 0),done:true};}}));var _this=(cov_1l2lmpozf1.s[65]++,this);cov_1l2lmpozf1.s[66]++;Object.defineProperty(exports,"__esModule",{value:true});var session_1=(cov_1l2lmpozf1.s[67]++,__webpack_require__(/*! ../session */ "./session.ts"));var main_1=(cov_1l2lmpozf1.s[68]++,__webpack_require__(/*! ../main */ "./main.ts"));cov_1l2lmpozf1.s[69]++;exports.events={SendMessage:{filter:function(){cov_1l2lmpozf1.f[12]++;cov_1l2lmpozf1.s[70]++;return{from:main_1.cp};},handler:function(event){cov_1l2lmpozf1.f[13]++;cov_1l2lmpozf1.s[71]++;return __awaiter(_this,void 0,void 0,function(){cov_1l2lmpozf1.f[14]++;var _a,from,to,sessionID,type,content,channelID,balance,nonce,amount,transactionHash,session,token;cov_1l2lmpozf1.s[72]++;return __generator(this,function(_b){cov_1l2lmpozf1.f[15]++;cov_1l2lmpozf1.s[73]++;switch(_b.label){case 0:cov_1l2lmpozf1.b[28][0]++;cov_1l2lmpozf1.s[74]++;console.log('--------------------Handle CITA SendMessage--------------------');cov_1l2lmpozf1.s[75]++;_a=event.returnValues,from=_a.from,to=_a.to,sessionID=_a.sessionID,type=_a.mType,content=_a.content,channelID=_a.channelID,balance=_a.balance,nonce=_a.nonce,amount=_a.amount,transactionHash=event.transactionHash;cov_1l2lmpozf1.s[76]++;console.log(' from: [%s], to: [%s], sessionID: [%s], type: [%s], content: [%s], channelID: [%s], balance: [%s], nonce: [%s], amount: [%s] ',from,to,sessionID,type,content,channelID,balance,nonce,amount);cov_1l2lmpozf1.s[77]++;return[4,session_1.default.getSessionById(sessionID,false)];case 1:cov_1l2lmpozf1.b[28][1]++;cov_1l2lmpozf1.s[78]++;session=_b.sent();cov_1l2lmpozf1.s[79]++;if(!session){cov_1l2lmpozf1.b[29][0]++;cov_1l2lmpozf1.s[80]++;return[2];}else{cov_1l2lmpozf1.b[29][1]++;}cov_1l2lmpozf1.s[81]++;return[4,main_1.appPN.methods.channelMap(channelID).call()];case 2:cov_1l2lmpozf1.b[28][2]++;cov_1l2lmpozf1.s[82]++;token=_b.sent().token;cov_1l2lmpozf1.s[83]++;(cov_1l2lmpozf1.b[30][0]++,session.callbacks.get('message'))&&(cov_1l2lmpozf1.b[30][1]++,session.callbacks.get('message')(null,{from:from,to:to,sessionID:sessionID,type:type,content:content,amount:amount,token:token}));cov_1l2lmpozf1.s[84]++;return[2];}});});}},CloseSession:{filter:function(){cov_1l2lmpozf1.f[16]++;cov_1l2lmpozf1.s[85]++;return{};},handler:function(event){cov_1l2lmpozf1.f[17]++;cov_1l2lmpozf1.s[86]++;return __awaiter(_this,void 0,void 0,function(){cov_1l2lmpozf1.f[18]++;var sessionID,session;cov_1l2lmpozf1.s[87]++;return __generator(this,function(_a){cov_1l2lmpozf1.f[19]++;cov_1l2lmpozf1.s[88]++;switch(_a.label){case 0:cov_1l2lmpozf1.b[31][0]++;cov_1l2lmpozf1.s[89]++;console.log('--------------------Handle CITA CloseSession--------------------');cov_1l2lmpozf1.s[90]++;sessionID=event.returnValues.sessionID;cov_1l2lmpozf1.s[91]++;console.log('sessionID',sessionID);cov_1l2lmpozf1.s[92]++;return[4,session_1.default.getSessionById(sessionID,false)];case 1:cov_1l2lmpozf1.b[31][1]++;cov_1l2lmpozf1.s[93]++;session=_a.sent();cov_1l2lmpozf1.s[94]++;if(!session){cov_1l2lmpozf1.b[32][0]++;cov_1l2lmpozf1.s[95]++;return[2];}else{cov_1l2lmpozf1.b[32][1]++;}cov_1l2lmpozf1.s[96]++;(cov_1l2lmpozf1.b[33][0]++,session.callbacks.get('close'))&&(cov_1l2lmpozf1.b[33][1]++,session.callbacks.get('close')(null,{}));cov_1l2lmpozf1.s[97]++;return[2];}});});}}};

/***/ }),

/***/ "./session.ts":
/*!********************!*\
  !*** ./session.ts ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var cov_1lxsz3pan5=function(){var path="/Users/zhang/work/DigiCash/l2app/l2.js/src/session.ts",hash="71faa37ed69bd0c41036d82efaca7fa0850a82aa",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/zhang/work/DigiCash/l2app/l2.js/src/session.ts",statementMap:{"0":{start:{line:2,column:16},end:{line:9,column:1}},"1":{start:{line:3,column:4},end:{line:8,column:7}},"2":{start:{line:4,column:36},end:{line:4,column:97}},"3":{start:{line:4,column:42},end:{line:4,column:70}},"4":{start:{line:4,column:85},end:{line:4,column:95}},"5":{start:{line:5,column:35},end:{line:5,column:100}},"6":{start:{line:5,column:41},end:{line:5,column:73}},"7":{start:{line:5,column:88},end:{line:5,column:98}},"8":{start:{line:6,column:32},end:{line:6,column:149}},"9":{start:{line:6,column:97},end:{line:6,column:119}},"10":{start:{line:7,column:8},end:{line:7,column:78}},"11":{start:{line:10,column:18},end:{line:36,column:1}},"12":{start:{line:11,column:12},end:{line:11,column:104}},"13":{start:{line:11,column:43},end:{line:11,column:68}},"14":{start:{line:11,column:57},end:{line:11,column:68}},"15":{start:{line:11,column:69},end:{line:11,column:81}},"16":{start:{line:12,column:4},end:{line:12,column:157}},"17":{start:{line:12,column:138},end:{line:12,column:150}},"18":{start:{line:13,column:23},end:{line:13,column:68}},"19":{start:{line:13,column:45},end:{line:13,column:65}},"20":{start:{line:15,column:8},end:{line:15,column:70}},"21":{start:{line:15,column:15},end:{line:15,column:70}},"22":{start:{line:16,column:8},end:{line:33,column:66}},"23":{start:{line:16,column:18},end:{line:33,column:66}},"24":{start:{line:17,column:12},end:{line:17,column:169}},"25":{start:{line:17,column:160},end:{line:17,column:169}},"26":{start:{line:18,column:12},end:{line:18,column:52}},"27":{start:{line:18,column:26},end:{line:18,column:52}},"28":{start:{line:19,column:12},end:{line:31,column:13}},"29":{start:{line:20,column:32},end:{line:20,column:39}},"30":{start:{line:20,column:40},end:{line:20,column:46}},"31":{start:{line:21,column:24},end:{line:21,column:34}},"32":{start:{line:21,column:35},end:{line:21,column:72}},"33":{start:{line:22,column:24},end:{line:22,column:34}},"34":{start:{line:22,column:35},end:{line:22,column:45}},"35":{start:{line:22,column:46},end:{line:22,column:55}},"36":{start:{line:22,column:56},end:{line:22,column:65}},"37":{start:{line:23,column:24},end:{line:23,column:41}},"38":{start:{line:23,column:42},end:{line:23,column:55}},"39":{start:{line:23,column:56},end:{line:23,column:65}},"40":{start:{line:25,column:20},end:{line:25,column:128}},"41":{start:{line:25,column:110},end:{line:25,column:116}},"42":{start:{line:25,column:117},end:{line:25,column:126}},"43":{start:{line:26,column:20},end:{line:26,column:106}},"44":{start:{line:26,column:81},end:{line:26,column:97}},"45":{start:{line:26,column:98},end:{line:26,column:104}},"46":{start:{line:27,column:20},end:{line:27,column:89}},"47":{start:{line:27,column:57},end:{line:27,column:72}},"48":{start:{line:27,column:73},end:{line:27,column:80}},"49":{start:{line:27,column:81},end:{line:27,column:87}},"50":{start:{line:28,column:20},end:{line:28,column:87}},"51":{start:{line:28,column:47},end:{line:28,column:62}},"52":{start:{line:28,column:63},end:{line:28,column:78}},"53":{start:{line:28,column:79},end:{line:28,column:85}},"54":{start:{line:29,column:20},end:{line:29,column:42}},"55":{start:{line:29,column:30},end:{line:29,column:42}},"56":{start:{line:30,column:20},end:{line:30,column:33}},"57":{start:{line:30,column:34},end:{line:30,column:43}},"58":{start:{line:32,column:12},end:{line:32,column:39}},"59":{start:{line:33,column:22},end:{line:33,column:34}},"60":{start:{line:33,column:35},end:{line:33,column:41}},"61":{start:{line:33,column:54},end:{line:33,column:64}},"62":{start:{line:34,column:8},end:{line:34,column:35}},"63":{start:{line:34,column:23},end:{line:34,column:35}},"64":{start:{line:34,column:36},end:{line:34,column:89}},"65":{start:{line:37,column:0},end:{line:37,column:62}},"66":{start:{line:38,column:18},end:{line:38,column:46}},"67":{start:{line:39,column:13},end:{line:39,column:30}},"68":{start:{line:40,column:15},end:{line:40,column:40}},"69":{start:{line:41,column:15},end:{line:41,column:36}},"70":{start:{line:42,column:0},end:{line:42,column:56}},"71":{start:{line:43,column:17},end:{line:240,column:3}},"72":{start:{line:45,column:8},end:{line:45,column:36}},"73":{start:{line:47,column:4},end:{line:72,column:6}},"74":{start:{line:48,column:8},end:{line:48,column:55}},"75":{start:{line:48,column:36},end:{line:48,column:53}},"76":{start:{line:49,column:8},end:{line:71,column:11}},"77":{start:{line:51,column:12},end:{line:70,column:15}},"78":{start:{line:52,column:16},end:{line:69,column:17}},"79":{start:{line:54,column:24},end:{line:54,column:72}},"80":{start:{line:55,column:24},end:{line:55,column:53}},"81":{start:{line:55,column:39},end:{line:55,column:53}},"82":{start:{line:56,column:24},end:{line:56,column:67}},"83":{start:{line:58,column:24},end:{line:58,column:49}},"84":{start:{line:59,column:24},end:{line:61,column:25}},"85":{start:{line:60,column:28},end:{line:60,column:45}},"86":{start:{line:62,column:24},end:{line:62,column:60}},"87":{start:{line:63,column:24},end:{line:63,column:57}},"88":{start:{line:65,column:24},end:{line:65,column:34}},"89":{start:{line:66,column:24},end:{line:66,column:71}},"90":{start:{line:67,column:24},end:{line:67,column:37}},"91":{start:{line:68,column:28},end:{line:68,column:48}},"92":{start:{line:73,column:4},end:{line:88,column:6}},"93":{start:{line:74,column:8},end:{line:87,column:11}},"94":{start:{line:76,column:12},end:{line:86,column:15}},"95":{start:{line:77,column:16},end:{line:85,column:17}},"96":{start:{line:78,column:28},end:{line:78,column:94}},"97":{start:{line:80,column:24},end:{line:80,column:44}},"98":{start:{line:81,column:24},end:{line:83,column:25}},"99":{start:{line:82,column:28},end:{line:82,column:46}},"100":{start:{line:84,column:24},end:{line:84,column:41}},"101":{start:{line:89,column:4},end:{line:101,column:6}},"102":{start:{line:90,column:8},end:{line:100,column:11}},"103":{start:{line:92,column:12},end:{line:99,column:15}},"104":{start:{line:93,column:16},end:{line:98,column:17}},"105":{start:{line:94,column:28},end:{line:94,column:99}},"106":{start:{line:96,column:24},end:{line:96,column:45}},"107":{start:{line:97,column:24},end:{line:97,column:45}},"108":{start:{line:102,column:4},end:{line:114,column:6}},"109":{start:{line:103,column:8},end:{line:113,column:11}},"110":{start:{line:105,column:12},end:{line:112,column:15}},"111":{start:{line:106,column:16},end:{line:111,column:17}},"112":{start:{line:107,column:28},end:{line:107,column:98}},"113":{start:{line:109,column:24},end:{line:109,column:44}},"114":{start:{line:110,column:24},end:{line:110,column:44}},"115":{start:{line:115,column:4},end:{line:132,column:6}},"116":{start:{line:116,column:8},end:{line:131,column:11}},"117":{start:{line:118,column:12},end:{line:130,column:15}},"118":{start:{line:119,column:16},end:{line:129,column:17}},"119":{start:{line:120,column:28},end:{line:120,column:98}},"120":{start:{line:122,column:24},end:{line:122,column:153}},"121":{start:{line:123,column:24},end:{line:123,column:53}},"122":{start:{line:124,column:24},end:{line:124,column:41}},"123":{start:{line:125,column:24},end:{line:125,column:41}},"124":{start:{line:126,column:24},end:{line:126,column:49}},"125":{start:{line:127,column:24},end:{line:127,column:69}},"126":{start:{line:128,column:24},end:{line:128,column:35}},"127":{start:{line:133,column:4},end:{line:159,column:6}},"128":{start:{line:134,column:8},end:{line:134,column:48}},"129":{start:{line:134,column:33},end:{line:134,column:46}},"130":{start:{line:135,column:8},end:{line:135,column:67}},"131":{start:{line:135,column:32},end:{line:135,column:65}},"132":{start:{line:136,column:8},end:{line:158,column:11}},"133":{start:{line:138,column:12},end:{line:157,column:15}},"134":{start:{line:139,column:16},end:{line:156,column:17}},"135":{start:{line:141,column:24},end:{line:141,column:180}},"136":{start:{line:142,column:24},end:{line:142,column:94}},"137":{start:{line:144,column:24},end:{line:144,column:52}},"138":{start:{line:145,column:24},end:{line:147,column:25}},"139":{start:{line:146,column:28},end:{line:146,column:67}},"140":{start:{line:148,column:24},end:{line:148,column:43}},"141":{start:{line:149,column:24},end:{line:149,column:214}},"142":{start:{line:150,column:24},end:{line:150,column:127}},"143":{start:{line:151,column:24},end:{line:151,column:131}},"144":{start:{line:153,column:24},end:{line:153,column:111}},"145":{start:{line:154,column:24},end:{line:154,column:178}},"146":{start:{line:155,column:28},end:{line:155,column:50}},"147":{start:{line:160,column:4},end:{line:167,column:6}},"148":{start:{line:161,column:8},end:{line:166,column:11}},"149":{start:{line:162,column:12},end:{line:165,column:15}},"150":{start:{line:163,column:16},end:{line:163,column:56}},"151":{start:{line:164,column:16},end:{line:164,column:27}},"152":{start:{line:168,column:4},end:{line:175,column:6}},"153":{start:{line:169,column:8},end:{line:174,column:11}},"154":{start:{line:170,column:12},end:{line:173,column:15}},"155":{start:{line:171,column:16},end:{line:171,column:54}},"156":{start:{line:172,column:16},end:{line:172,column:27}},"157":{start:{line:176,column:4},end:{line:237,column:6}},"158":{start:{line:177,column:8},end:{line:236,column:11}},"159":{start:{line:179,column:12},end:{line:235,column:15}},"160":{start:{line:180,column:16},end:{line:234,column:17}},"161":{start:{line:182,column:24},end:{line:182,column:156}},"162":{start:{line:183,column:24},end:{line:183,column:105}},"163":{start:{line:184,column:24},end:{line:184,column:38}},"164":{start:{line:185,column:24},end:{line:185,column:36}},"165":{start:{line:186,column:24},end:{line:186,column:110}},"166":{start:{line:187,column:24},end:{line:187,column:49}},"167":{start:{line:188,column:24},end:{line:188,column:65}},"168":{start:{line:188,column:51},end:{line:188,column:65}},"169":{start:{line:189,column:24},end:{line:189,column:90}},"170":{start:{line:191,column:24},end:{line:191,column:46}},"171":{start:{line:192,column:24},end:{line:192,column:86}},"172":{start:{line:194,column:24},end:{line:194,column:44}},"173":{start:{line:195,column:24},end:{line:197,column:25}},"174":{start:{line:196,column:28},end:{line:196,column:100}},"175":{start:{line:198,column:24},end:{line:200,column:25}},"176":{start:{line:199,column:28},end:{line:199,column:91}},"177":{start:{line:201,column:24},end:{line:203,column:41}},"178":{start:{line:205,column:24},end:{line:205,column:49}},"179":{start:{line:206,column:24},end:{line:208,column:40}},"180":{start:{line:209,column:24},end:{line:211,column:40}},"181":{start:{line:212,column:24},end:{line:212,column:117}},"182":{start:{line:213,column:24},end:{line:213,column:178}},"183":{start:{line:215,column:24},end:{line:215,column:53}},"184":{start:{line:216,column:24},end:{line:216,column:37}},"185":{start:{line:218,column:24},end:{line:218,column:95}},"186":{start:{line:219,column:24},end:{line:219,column:82}},"187":{start:{line:220,column:24},end:{line:226,column:26}},"188":{start:{line:227,column:24},end:{line:227,column:56}},"189":{start:{line:228,column:24},end:{line:228,column:58}},"190":{start:{line:229,column:24},end:{line:230,column:48}},"191":{start:{line:230,column:28},end:{line:230,column:48}},"192":{start:{line:231,column:24},end:{line:231,column:59}},"193":{start:{line:232,column:24},end:{line:232,column:67}},"194":{start:{line:233,column:24},end:{line:233,column:97}},"195":{start:{line:238,column:4},end:{line:238,column:38}},"196":{start:{line:239,column:4},end:{line:239,column:21}},"197":{start:{line:241,column:0},end:{line:241,column:28}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:2,column:44},end:{line:2,column:45}},loc:{start:{line:2,column:89},end:{line:9,column:1}},line:2},"1":{name:"(anonymous_1)",decl:{start:{line:3,column:36},end:{line:3,column:37}},loc:{start:{line:3,column:63},end:{line:8,column:5}},line:3},"2":{name:"fulfilled",decl:{start:{line:4,column:17},end:{line:4,column:26}},loc:{start:{line:4,column:34},end:{line:4,column:99}},line:4},"3":{name:"rejected",decl:{start:{line:5,column:17},end:{line:5,column:25}},loc:{start:{line:5,column:33},end:{line:5,column:102}},line:5},"4":{name:"step",decl:{start:{line:6,column:17},end:{line:6,column:21}},loc:{start:{line:6,column:30},end:{line:6,column:151}},line:6},"5":{name:"(anonymous_5)",decl:{start:{line:6,column:76},end:{line:6,column:77}},loc:{start:{line:6,column:95},end:{line:6,column:121}},line:6},"6":{name:"(anonymous_6)",decl:{start:{line:10,column:48},end:{line:10,column:49}},loc:{start:{line:10,column:73},end:{line:36,column:1}},line:10},"7":{name:"(anonymous_7)",decl:{start:{line:11,column:30},end:{line:11,column:31}},loc:{start:{line:11,column:41},end:{line:11,column:83}},line:11},"8":{name:"(anonymous_8)",decl:{start:{line:12,column:125},end:{line:12,column:126}},loc:{start:{line:12,column:136},end:{line:12,column:152}},line:12},"9":{name:"verb",decl:{start:{line:13,column:13},end:{line:13,column:17}},loc:{start:{line:13,column:21},end:{line:13,column:70}},line:13},"10":{name:"(anonymous_10)",decl:{start:{line:13,column:30},end:{line:13,column:31}},loc:{start:{line:13,column:43},end:{line:13,column:67}},line:13},"11":{name:"step",decl:{start:{line:14,column:13},end:{line:14,column:17}},loc:{start:{line:14,column:22},end:{line:35,column:5}},line:14},"12":{name:"(anonymous_12)",decl:{start:{line:43,column:17},end:{line:43,column:18}},loc:{start:{line:43,column:29},end:{line:240,column:1}},line:43},"13":{name:"L2Session",decl:{start:{line:44,column:13},end:{line:44,column:22}},loc:{start:{line:44,column:35},end:{line:46,column:5}},line:44},"14":{name:"(anonymous_14)",decl:{start:{line:47,column:31},end:{line:47,column:32}},loc:{start:{line:47,column:64},end:{line:72,column:5}},line:47},"15":{name:"(anonymous_15)",decl:{start:{line:49,column:47},end:{line:49,column:48}},loc:{start:{line:49,column:59},end:{line:71,column:9}},line:49},"16":{name:"(anonymous_16)",decl:{start:{line:51,column:37},end:{line:51,column:38}},loc:{start:{line:51,column:51},end:{line:70,column:13}},line:51},"17":{name:"(anonymous_17)",decl:{start:{line:73,column:25},end:{line:73,column:26}},loc:{start:{line:73,column:47},end:{line:88,column:5}},line:73},"18":{name:"(anonymous_18)",decl:{start:{line:74,column:47},end:{line:74,column:48}},loc:{start:{line:74,column:59},end:{line:87,column:9}},line:74},"19":{name:"(anonymous_19)",decl:{start:{line:76,column:37},end:{line:76,column:38}},loc:{start:{line:76,column:51},end:{line:86,column:13}},line:76},"20":{name:"(anonymous_20)",decl:{start:{line:89,column:39},end:{line:89,column:40}},loc:{start:{line:89,column:61},end:{line:101,column:5}},line:89},"21":{name:"(anonymous_21)",decl:{start:{line:90,column:47},end:{line:90,column:48}},loc:{start:{line:90,column:59},end:{line:100,column:9}},line:90},"22":{name:"(anonymous_22)",decl:{start:{line:92,column:37},end:{line:92,column:38}},loc:{start:{line:92,column:51},end:{line:99,column:13}},line:92},"23":{name:"(anonymous_23)",decl:{start:{line:102,column:38},end:{line:102,column:39}},loc:{start:{line:102,column:60},end:{line:114,column:5}},line:102},"24":{name:"(anonymous_24)",decl:{start:{line:103,column:47},end:{line:103,column:48}},loc:{start:{line:103,column:59},end:{line:113,column:9}},line:103},"25":{name:"(anonymous_25)",decl:{start:{line:105,column:37},end:{line:105,column:38}},loc:{start:{line:105,column:51},end:{line:112,column:13}},line:105},"26":{name:"(anonymous_26)",decl:{start:{line:115,column:37},end:{line:115,column:38}},loc:{start:{line:115,column:49},end:{line:132,column:5}},line:115},"27":{name:"(anonymous_27)",decl:{start:{line:116,column:47},end:{line:116,column:48}},loc:{start:{line:116,column:59},end:{line:131,column:9}},line:116},"28":{name:"(anonymous_28)",decl:{start:{line:118,column:37},end:{line:118,column:38}},loc:{start:{line:118,column:51},end:{line:130,column:13}},line:118},"29":{name:"(anonymous_29)",decl:{start:{line:133,column:38},end:{line:133,column:39}},loc:{start:{line:133,column:82},end:{line:159,column:5}},line:133},"30":{name:"(anonymous_30)",decl:{start:{line:136,column:47},end:{line:136,column:48}},loc:{start:{line:136,column:59},end:{line:158,column:9}},line:136},"31":{name:"(anonymous_31)",decl:{start:{line:138,column:37},end:{line:138,column:38}},loc:{start:{line:138,column:51},end:{line:157,column:13}},line:138},"32":{name:"(anonymous_32)",decl:{start:{line:160,column:36},end:{line:160,column:37}},loc:{start:{line:160,column:56},end:{line:167,column:5}},line:160},"33":{name:"(anonymous_33)",decl:{start:{line:161,column:47},end:{line:161,column:48}},loc:{start:{line:161,column:59},end:{line:166,column:9}},line:161},"34":{name:"(anonymous_34)",decl:{start:{line:162,column:37},end:{line:162,column:38}},loc:{start:{line:162,column:51},end:{line:165,column:13}},line:162},"35":{name:"(anonymous_35)",decl:{start:{line:168,column:41},end:{line:168,column:42}},loc:{start:{line:168,column:61},end:{line:175,column:5}},line:168},"36":{name:"(anonymous_36)",decl:{start:{line:169,column:47},end:{line:169,column:48}},loc:{start:{line:169,column:59},end:{line:174,column:9}},line:169},"37":{name:"(anonymous_37)",decl:{start:{line:170,column:37},end:{line:170,column:38}},loc:{start:{line:170,column:51},end:{line:173,column:13}},line:170},"38":{name:"(anonymous_38)",decl:{start:{line:176,column:44},end:{line:176,column:45}},loc:{start:{line:176,column:88},end:{line:237,column:5}},line:176},"39":{name:"(anonymous_39)",decl:{start:{line:177,column:47},end:{line:177,column:48}},loc:{start:{line:177,column:59},end:{line:236,column:9}},line:177},"40":{name:"(anonymous_40)",decl:{start:{line:179,column:37},end:{line:179,column:38}},loc:{start:{line:179,column:51},end:{line:235,column:13}},line:179}},branchMap:{"0":{loc:{start:{line:2,column:16},end:{line:9,column:1}},type:"binary-expr",locations:[{start:{line:2,column:17},end:{line:2,column:21}},{start:{line:2,column:25},end:{line:2,column:39}},{start:{line:2,column:44},end:{line:9,column:1}}],line:2},"1":{loc:{start:{line:3,column:16},end:{line:3,column:34}},type:"binary-expr",locations:[{start:{line:3,column:16},end:{line:3,column:17}},{start:{line:3,column:22},end:{line:3,column:33}}],line:3},"2":{loc:{start:{line:6,column:32},end:{line:6,column:148}},type:"cond-expr",locations:[{start:{line:6,column:46},end:{line:6,column:67}},{start:{line:6,column:70},end:{line:6,column:148}}],line:6},"3":{loc:{start:{line:7,column:51},end:{line:7,column:67}},type:"binary-expr",locations:[{start:{line:7,column:51},end:{line:7,column:61}},{start:{line:7,column:65},end:{line:7,column:67}}],line:7},"4":{loc:{start:{line:10,column:18},end:{line:36,column:1}},type:"binary-expr",locations:[{start:{line:10,column:19},end:{line:10,column:23}},{start:{line:10,column:27},end:{line:10,column:43}},{start:{line:10,column:48},end:{line:36,column:1}}],line:10},"5":{loc:{start:{line:11,column:43},end:{line:11,column:68}},type:"if",locations:[{start:{line:11,column:43},end:{line:11,column:68}},{start:{line:11,column:43},end:{line:11,column:68}}],line:11},"6":{loc:{start:{line:12,column:71},end:{line:12,column:153}},type:"binary-expr",locations:[{start:{line:12,column:71},end:{line:12,column:99}},{start:{line:12,column:104},end:{line:12,column:152}}],line:12},"7":{loc:{start:{line:15,column:8},end:{line:15,column:70}},type:"if",locations:[{start:{line:15,column:8},end:{line:15,column:70}},{start:{line:15,column:8},end:{line:15,column:70}}],line:15},"8":{loc:{start:{line:17,column:12},end:{line:17,column:169}},type:"if",locations:[{start:{line:17,column:12},end:{line:17,column:169}},{start:{line:17,column:12},end:{line:17,column:169}}],line:17},"9":{loc:{start:{line:17,column:23},end:{line:17,column:158}},type:"binary-expr",locations:[{start:{line:17,column:23},end:{line:17,column:24}},{start:{line:17,column:29},end:{line:17,column:125}},{start:{line:17,column:130},end:{line:17,column:158}}],line:17},"10":{loc:{start:{line:17,column:33},end:{line:17,column:125}},type:"cond-expr",locations:[{start:{line:17,column:45},end:{line:17,column:56}},{start:{line:17,column:59},end:{line:17,column:125}}],line:17},"11":{loc:{start:{line:17,column:59},end:{line:17,column:125}},type:"cond-expr",locations:[{start:{line:17,column:67},end:{line:17,column:116}},{start:{line:17,column:119},end:{line:17,column:125}}],line:17},"12":{loc:{start:{line:17,column:67},end:{line:17,column:116}},type:"binary-expr",locations:[{start:{line:17,column:67},end:{line:17,column:77}},{start:{line:17,column:82},end:{line:17,column:115}}],line:17},"13":{loc:{start:{line:17,column:82},end:{line:17,column:112}},type:"binary-expr",locations:[{start:{line:17,column:83},end:{line:17,column:98}},{start:{line:17,column:103},end:{line:17,column:112}}],line:17},"14":{loc:{start:{line:18,column:12},end:{line:18,column:52}},type:"if",locations:[{start:{line:18,column:12},end:{line:18,column:52}},{start:{line:18,column:12},end:{line:18,column:52}}],line:18},"15":{loc:{start:{line:19,column:12},end:{line:31,column:13}},type:"switch",locations:[{start:{line:20,column:16},end:{line:20,column:23}},{start:{line:20,column:24},end:{line:20,column:46}},{start:{line:21,column:16},end:{line:21,column:72}},{start:{line:22,column:16},end:{line:22,column:65}},{start:{line:23,column:16},end:{line:23,column:65}},{start:{line:24,column:16},end:{line:30,column:43}}],line:19},"16":{loc:{start:{line:25,column:20},end:{line:25,column:128}},type:"if",locations:[{start:{line:25,column:20},end:{line:25,column:128}},{start:{line:25,column:20},end:{line:25,column:128}}],line:25},"17":{loc:{start:{line:25,column:24},end:{line:25,column:106}},type:"binary-expr",locations:[{start:{line:25,column:24},end:{line:25,column:74}},{start:{line:25,column:79},end:{line:25,column:90}},{start:{line:25,column:94},end:{line:25,column:105}}],line:25},"18":{loc:{start:{line:25,column:42},end:{line:25,column:73}},type:"binary-expr",locations:[{start:{line:25,column:42},end:{line:25,column:54}},{start:{line:25,column:58},end:{line:25,column:73}}],line:25},"19":{loc:{start:{line:26,column:20},end:{line:26,column:106}},type:"if",locations:[{start:{line:26,column:20},end:{line:26,column:106}},{start:{line:26,column:20},end:{line:26,column:106}}],line:26},"20":{loc:{start:{line:26,column:24},end:{line:26,column:77}},type:"binary-expr",locations:[{start:{line:26,column:24},end:{line:26,column:35}},{start:{line:26,column:40},end:{line:26,column:42}},{start:{line:26,column:47},end:{line:26,column:59}},{start:{line:26,column:63},end:{line:26,column:75}}],line:26},"21":{loc:{start:{line:27,column:20},end:{line:27,column:89}},type:"if",locations:[{start:{line:27,column:20},end:{line:27,column:89}},{start:{line:27,column:20},end:{line:27,column:89}}],line:27},"22":{loc:{start:{line:27,column:24},end:{line:27,column:53}},type:"binary-expr",locations:[{start:{line:27,column:24},end:{line:27,column:35}},{start:{line:27,column:39},end:{line:27,column:53}}],line:27},"23":{loc:{start:{line:28,column:20},end:{line:28,column:87}},type:"if",locations:[{start:{line:28,column:20},end:{line:28,column:87}},{start:{line:28,column:20},end:{line:28,column:87}}],line:28},"24":{loc:{start:{line:28,column:24},end:{line:28,column:43}},type:"binary-expr",locations:[{start:{line:28,column:24},end:{line:28,column:25}},{start:{line:28,column:29},end:{line:28,column:43}}],line:28},"25":{loc:{start:{line:29,column:20},end:{line:29,column:42}},type:"if",locations:[{start:{line:29,column:20},end:{line:29,column:42}},{start:{line:29,column:20},end:{line:29,column:42}}],line:29},"26":{loc:{start:{line:34,column:8},end:{line:34,column:35}},type:"if",locations:[{start:{line:34,column:8},end:{line:34,column:35}},{start:{line:34,column:8},end:{line:34,column:35}}],line:34},"27":{loc:{start:{line:34,column:52},end:{line:34,column:74}},type:"cond-expr",locations:[{start:{line:34,column:60},end:{line:34,column:65}},{start:{line:34,column:68},end:{line:34,column:74}}],line:34},"28":{loc:{start:{line:48,column:8},end:{line:48,column:55}},type:"if",locations:[{start:{line:48,column:8},end:{line:48,column:55}},{start:{line:48,column:8},end:{line:48,column:55}}],line:48},"29":{loc:{start:{line:52,column:16},end:{line:69,column:17}},type:"switch",locations:[{start:{line:53,column:20},end:{line:56,column:67}},{start:{line:57,column:20},end:{line:63,column:57}},{start:{line:64,column:20},end:{line:67,column:37}},{start:{line:68,column:20},end:{line:68,column:48}}],line:52},"30":{loc:{start:{line:55,column:24},end:{line:55,column:53}},type:"if",locations:[{start:{line:55,column:24},end:{line:55,column:53}},{start:{line:55,column:24},end:{line:55,column:53}}],line:55},"31":{loc:{start:{line:59,column:24},end:{line:61,column:25}},type:"if",locations:[{start:{line:59,column:24},end:{line:61,column:25}},{start:{line:59,column:24},end:{line:61,column:25}}],line:59},"32":{loc:{start:{line:77,column:16},end:{line:85,column:17}},type:"switch",locations:[{start:{line:78,column:20},end:{line:78,column:94}},{start:{line:79,column:20},end:{line:84,column:41}}],line:77},"33":{loc:{start:{line:81,column:24},end:{line:83,column:25}},type:"if",locations:[{start:{line:81,column:24},end:{line:83,column:25}},{start:{line:81,column:24},end:{line:83,column:25}}],line:81},"34":{loc:{start:{line:93,column:16},end:{line:98,column:17}},type:"switch",locations:[{start:{line:94,column:20},end:{line:94,column:99}},{start:{line:95,column:20},end:{line:97,column:45}}],line:93},"35":{loc:{start:{line:106,column:16},end:{line:111,column:17}},type:"switch",locations:[{start:{line:107,column:20},end:{line:107,column:98}},{start:{line:108,column:20},end:{line:110,column:44}}],line:106},"36":{loc:{start:{line:119,column:16},end:{line:129,column:17}},type:"switch",locations:[{start:{line:120,column:20},end:{line:120,column:98}},{start:{line:121,column:20},end:{line:128,column:35}}],line:119},"37":{loc:{start:{line:127,column:41},end:{line:127,column:68}},type:"binary-expr",locations:[{start:{line:127,column:41},end:{line:127,column:55}},{start:{line:127,column:59},end:{line:127,column:68}}],line:127},"38":{loc:{start:{line:134,column:8},end:{line:134,column:48}},type:"if",locations:[{start:{line:134,column:8},end:{line:134,column:48}},{start:{line:134,column:8},end:{line:134,column:48}}],line:134},"39":{loc:{start:{line:135,column:8},end:{line:135,column:67}},type:"if",locations:[{start:{line:135,column:8},end:{line:135,column:67}},{start:{line:135,column:8},end:{line:135,column:67}}],line:135},"40":{loc:{start:{line:139,column:16},end:{line:156,column:17}},type:"switch",locations:[{start:{line:140,column:20},end:{line:142,column:94}},{start:{line:143,column:20},end:{line:151,column:131}},{start:{line:152,column:20},end:{line:154,column:178}},{start:{line:155,column:20},end:{line:155,column:50}}],line:139},"41":{loc:{start:{line:145,column:24},end:{line:147,column:25}},type:"if",locations:[{start:{line:145,column:24},end:{line:147,column:25}},{start:{line:145,column:24},end:{line:147,column:25}}],line:145},"42":{loc:{start:{line:180,column:16},end:{line:234,column:17}},type:"switch",locations:[{start:{line:181,column:20},end:{line:189,column:90}},{start:{line:190,column:20},end:{line:192,column:86}},{start:{line:193,column:20},end:{line:203,column:41}},{start:{line:204,column:20},end:{line:213,column:178}},{start:{line:214,column:20},end:{line:216,column:37}},{start:{line:217,column:20},end:{line:233,column:97}}],line:180},"43":{loc:{start:{line:188,column:24},end:{line:188,column:65}},type:"if",locations:[{start:{line:188,column:24},end:{line:188,column:65}},{start:{line:188,column:24},end:{line:188,column:65}}],line:188},"44":{loc:{start:{line:195,column:24},end:{line:197,column:25}},type:"if",locations:[{start:{line:195,column:24},end:{line:197,column:25}},{start:{line:195,column:24},end:{line:197,column:25}}],line:195},"45":{loc:{start:{line:198,column:24},end:{line:200,column:25}},type:"if",locations:[{start:{line:198,column:24},end:{line:200,column:25}},{start:{line:198,column:24},end:{line:200,column:25}}],line:198},"46":{loc:{start:{line:229,column:24},end:{line:230,column:48}},type:"if",locations:[{start:{line:229,column:24},end:{line:230,column:48}},{start:{line:229,column:24},end:{line:230,column:48}}],line:229}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0},b:{"0":[0,0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0,0,0,0],"16":[0,0],"17":[0,0,0],"18":[0,0],"19":[0,0],"20":[0,0,0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0,0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0,0,0],"41":[0,0],"42":[0,0,0,0,0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0]},inputSourceMap:{version:3,file:"/Users/zhang/work/DigiCash/l2app/l2.js/src/session.ts",sourceRoot:"/Users/zhang/work/DigiCash/l2app/l2.js/",sources:["node_modules/source-map-loader/index.js!/Users/zhang/work/DigiCash/l2app/l2.js/src/session.ts"],names:[],mappings:"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",sourcesContent:["import {\n  ADDRESS_ZERO,\n  SESSION_STATUS,\n  CHANNEL_STATUS,\n} from './utils/constants';\nimport {\n  appSession,\n  appPN,\n  ethPN,\n  web3_10,\n  user,\n  puppet,\n  web3_outer,\n  cp,\n} from './main';\nimport {\n  myEcsignToHex,\n  prepareSignatureForTransfer,\n  sendAppTx,\n} from './utils/common';\nimport * as protobuf from 'protobufjs';\nprotobuf.common('google/protobuf/descriptor.proto', {});\n\n/**\n * Session manager\n */\nexport default class L2Session {\n  /**-----------------Public Attributes------------------------ */\n  sessionID: string;\n  status: SESSION_STATUS;\n  //   players: Array<string>;\n  game: string;\n  data: string;\n  provider: string;\n\n  callbacks: Map<string, (err: Error, res: any) => void>;\n\n  /**-----------------Static Attributes & APIs------------------------ */\n  static sessionList: Map<string, L2Session> = new Map<string, L2Session>();\n\n  /**\n   * get session by session id\n   *\n   * @param {} _sessionID\n   * @param {} fromChain  OP\bTIONAL load session from cita chain. default: true\n   *\n   * @returns {Promise<L2Session}\n   */\n  static async getSessionById(\n    _sessionID: string,\n    fromChain: boolean = true\n  ): Promise<L2Session> {\n    let session = L2Session.sessionList.get(_sessionID);\n    if (!session) {\n      let sessionExist = await L2Session.isExists(_sessionID);\n      if (!sessionExist) {\n        return null;\n      }\n\n      session = new L2Session(_sessionID);\n      await session.initialize();\n      L2Session.sessionList.set(_sessionID, session);\n    }\n    return session;\n  }\n\n  /**\n   * check session is initialized on appchain\n   *\n   * @param {string} _sessionID\n   *\n   * @returns {Promise<boolean>}\n   */\n  static async isExists(_sessionID: string): Promise<boolean> {\n    let session = await appSession.methods.sessions(_sessionID).call();\n    if (Number(session.status) === SESSION_STATUS.SESSION_STATUS_INIT) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * get all messages of the session\n   *\n   * @param {string} _sessionID\n   *\n   * @returns {Promise<Array<any>>}\n   */\n  static async getMessagesBySessionID(_sessionID: string): Promise<Array<any>> {\n    let messages = await appSession.methods.exportSession(_sessionID).call();\n    return messages;\n  }\n\n  /**\n   * get all players join in the session\n   *\n   * @param {string} _sessionID\n   *\n   * @returns {Promise<Array<string>>}\n   */\n  static async getPlayersBySessionID(\n    _sessionID: string\n  ): Promise<Array<string>> {\n    let players = await appSession.methods.exportPlayer(_sessionID).call();\n    return players;\n  }\n\n  /**-----------------Private Constructor------------------------ */\n\n  /**\n   * constructor of L2Session\n   *\n   * @param {string} _sessionID\n   * @param {Contract} _sessionContract\n   */\n  private constructor(_sessionID: string) {\n    this.sessionID = _sessionID;\n  }\n\n  /**\n   * initialize L2Session, using session from appchain contract\n   */\n  private async initialize() {\n    // query session by _sessionPN\n    let {\n      status,\n      provider,\n      game,\n      paymentContract,\n      data,\n    } = await appSession.methods.sessions(this.sessionID).call();\n    this.status = Number(status);\n    this.game = game;\n    this.data = data;\n    this.provider = provider;\n\n    this.callbacks = this.callbacks || new Map<string, () => void>();\n  }\n\n  /**-----------------Session APIs------------------------ */\n\n  /**\n   * send message to the session contract\n   *\n   * @param {string} to the destination of the message\n   * @param {number} type the type of message encoding\n   * @param {string} content encoded message content\n   * @param {string | number} amount token amount transferred to other player\n   * @param {string} token token address, default: '0x0000000000000000000000000000000000000000'\n   *\n   * @returns {Promise<string>} the tx hash of the sendMessage transaction\n   */\n  async sendMessage(\n    to: string,\n    type: number,\n    content: string,\n    amount: string | number = '0',\n    token: string = ADDRESS_ZERO\n  ): Promise<string> {\n    console.log(\n      'sendMessage start execute with params: to: [%s], type: [%s], content: [%s], amount: [%s], token: [%s]',\n      to,\n      type,\n      content,\n      amount + '',\n      token\n    );\n\n    // TODO check params valid\n\n    // check session status\n    let { status } = await appSession.methods.sessions(this.sessionID).call();\n    if (Number(status) !== SESSION_STATUS.SESSION_STATUS_OPEN) {\n      throw new Error('session is not open');\n    }\n    // build session message\n    let from = user;\n    let messageHash = web3_10.utils.soliditySha3(\n      { t: 'address', v: from },\n      { t: 'address', v: to },\n      { t: 'bytes32', v: this.sessionID },\n      { t: 'uint8', v: type },\n      { t: 'bytes', v: content }\n    );\n    let signature = myEcsignToHex(\n      web3_10,\n      messageHash,\n      puppet.getAccount().privateKey\n    );\n\n    let { transferData, paymentSignature } = await this.buildTransferData(\n      from,\n      web3_10.utils.toBN(amount).toString(),\n      token,\n      messageHash\n    );\n    // call appSession's sendMessage\n    return await sendAppTx(\n      appSession.methods.sendMessage(\n        from,\n        to,\n        this.sessionID,\n        type,\n        content,\n        signature,\n        transferData,\n        paymentSignature\n      )\n    );\n  }\n\n  /**\n   *\n   * @param callback\n   *\n   */\n  async onMessage(callback: (error: Error, res: any) => void) {\n    this.callbacks.set('message', callback);\n  }\n\n  /**\n   *\n   * @param callback\n   */\n  async onSessionClose(callback: (error: Error, res: any) => void) {\n    this.callbacks.set('close', callback);\n  }\n\n  private async buildTransferData(\n    from: string,\n    amount: string,\n    token: string,\n    messageHash: string\n  ): Promise<any> {\n    let { hexToBytes, numberToHex, soliditySha3, toBN } = web3_10.utils;\n    let channelID =\n      '0x0000000000000000000000000000000000000000000000000000000000000000';\n    let balance = '0';\n    let nonce = '0';\n    let additionalHash =\n      '0x0000000000000000000000000000000000000000000000000000000000000000';\n    let paymentSignature = '0x0';\n    if (Number(amount) > 0) {\n      channelID = await ethPN.methods.getChannelID(from, token).call();\n      let channel = await appPN.methods.channelMap(channelID).call();\n\n      // check channel status\n      if (Number(channel.status) !== CHANNEL_STATUS.CHANNEL_STATUS_OPEN) {\n        throw new Error('app channel status is not open, can not transfer now');\n      }\n      // check user's balance is enough\n      if (toBN(channel.userBalance).lt(toBN(amount))) {\n        throw new Error(\"user's balance is less than transfer amount\");\n      }\n\n      // build transfer message\n      // get balance proof from eth contract\n      let balanceProof = await appPN.methods\n        .balanceProofMap(channelID, cp)\n        .call();\n\n      balance = toBN(amount)\n        .add(toBN(balanceProof.balance))\n        .toString();\n      nonce = toBN(balanceProof.nonce)\n        .add(toBN(1))\n        .toString();\n      additionalHash = soliditySha3(\n        { t: 'bytes32', v: messageHash },\n        { t: 'uint256', v: amount }\n      );\n      paymentSignature = await prepareSignatureForTransfer(\n        web3_outer,\n        ethPN.options.address,\n        channelID,\n        balance,\n        nonce,\n        additionalHash,\n        user\n      );\n    }\n\n    let transferPB = protobuf.Root.fromJSON(require('./config/transfer.json'));\n    // Obtain a message type\n    let Transfer = transferPB.lookupType('TransferData.Transfer');\n\n    // Exemplary payload\n    let payload = {\n      channelID: hexToBytes(channelID),\n      balance: Number(balance),\n      nonce: Number(nonce),\n      amount: Number(amount),\n      additionalHash: hexToBytes(additionalHash),\n    };\n\n    console.log('payload', payload);\n    // Verify the payload if necessary (i.e. when possibly incomplete or invalid)\n    let errMsg = Transfer.verify(payload);\n    if (errMsg) throw Error(errMsg);\n    // Create a new message\n    let message = Transfer.create(payload); // or use .fromObject if conversion is necessary\n    // Encode a message to an Uint8Array (browser) or Buffer (node)\n    let buffer = Transfer.encode(message).finish();\n    // console.log('buildTransferData', {\n    //   transferData: buffer,\n    //   paymentSignature,\n    // });\n\n    return { transferData: buffer, paymentSignature };\n  }\n}\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var __awaiter=(cov_1lxsz3pan5.s[0]++,(cov_1lxsz3pan5.b[0][0]++,this)&&(cov_1lxsz3pan5.b[0][1]++,this.__awaiter)||(cov_1lxsz3pan5.b[0][2]++,function(thisArg,_arguments,P,generator){cov_1lxsz3pan5.f[0]++;cov_1lxsz3pan5.s[1]++;return new((cov_1lxsz3pan5.b[1][0]++,P)||(cov_1lxsz3pan5.b[1][1]++,P=Promise))(function(resolve,reject){cov_1lxsz3pan5.f[1]++;function fulfilled(value){cov_1lxsz3pan5.f[2]++;cov_1lxsz3pan5.s[2]++;try{cov_1lxsz3pan5.s[3]++;step(generator.next(value));}catch(e){cov_1lxsz3pan5.s[4]++;reject(e);}}function rejected(value){cov_1lxsz3pan5.f[3]++;cov_1lxsz3pan5.s[5]++;try{cov_1lxsz3pan5.s[6]++;step(generator["throw"](value));}catch(e){cov_1lxsz3pan5.s[7]++;reject(e);}}function step(result){cov_1lxsz3pan5.f[4]++;cov_1lxsz3pan5.s[8]++;result.done?(cov_1lxsz3pan5.b[2][0]++,resolve(result.value)):(cov_1lxsz3pan5.b[2][1]++,new P(function(resolve){cov_1lxsz3pan5.f[5]++;cov_1lxsz3pan5.s[9]++;resolve(result.value);}).then(fulfilled,rejected));}cov_1lxsz3pan5.s[10]++;step((generator=generator.apply(thisArg,(cov_1lxsz3pan5.b[3][0]++,_arguments)||(cov_1lxsz3pan5.b[3][1]++,[]))).next());});}));var __generator=(cov_1lxsz3pan5.s[11]++,(cov_1lxsz3pan5.b[4][0]++,this)&&(cov_1lxsz3pan5.b[4][1]++,this.__generator)||(cov_1lxsz3pan5.b[4][2]++,function(thisArg,body){cov_1lxsz3pan5.f[6]++;var _=(cov_1lxsz3pan5.s[12]++,{label:0,sent:function(){cov_1lxsz3pan5.f[7]++;cov_1lxsz3pan5.s[13]++;if(t[0]&1){cov_1lxsz3pan5.b[5][0]++;cov_1lxsz3pan5.s[14]++;throw t[1];}else{cov_1lxsz3pan5.b[5][1]++;}cov_1lxsz3pan5.s[15]++;return t[1];},trys:[],ops:[]}),f,y,t,g;cov_1lxsz3pan5.s[16]++;return g={next:verb(0),"throw":verb(1),"return":verb(2)},(cov_1lxsz3pan5.b[6][0]++,typeof Symbol==="function")&&(cov_1lxsz3pan5.b[6][1]++,g[Symbol.iterator]=function(){cov_1lxsz3pan5.f[8]++;cov_1lxsz3pan5.s[17]++;return this;}),g;function verb(n){cov_1lxsz3pan5.f[9]++;cov_1lxsz3pan5.s[18]++;return function(v){cov_1lxsz3pan5.f[10]++;cov_1lxsz3pan5.s[19]++;return step([n,v]);};}function step(op){cov_1lxsz3pan5.f[11]++;cov_1lxsz3pan5.s[20]++;if(f){cov_1lxsz3pan5.b[7][0]++;cov_1lxsz3pan5.s[21]++;throw new TypeError("Generator is already executing.");}else{cov_1lxsz3pan5.b[7][1]++;}cov_1lxsz3pan5.s[22]++;while(_){cov_1lxsz3pan5.s[23]++;try{cov_1lxsz3pan5.s[24]++;if(f=1,(cov_1lxsz3pan5.b[9][0]++,y)&&(cov_1lxsz3pan5.b[9][1]++,t=op[0]&2?(cov_1lxsz3pan5.b[10][0]++,y["return"]):(cov_1lxsz3pan5.b[10][1]++,op[0]?(cov_1lxsz3pan5.b[11][0]++,(cov_1lxsz3pan5.b[12][0]++,y["throw"])||(cov_1lxsz3pan5.b[12][1]++,((cov_1lxsz3pan5.b[13][0]++,t=y["return"])&&(cov_1lxsz3pan5.b[13][1]++,t.call(y)),0))):(cov_1lxsz3pan5.b[11][1]++,y.next)))&&(cov_1lxsz3pan5.b[9][2]++,!(t=t.call(y,op[1])).done)){cov_1lxsz3pan5.b[8][0]++;cov_1lxsz3pan5.s[25]++;return t;}else{cov_1lxsz3pan5.b[8][1]++;}cov_1lxsz3pan5.s[26]++;if(y=0,t){cov_1lxsz3pan5.b[14][0]++;cov_1lxsz3pan5.s[27]++;op=[op[0]&2,t.value];}else{cov_1lxsz3pan5.b[14][1]++;}cov_1lxsz3pan5.s[28]++;switch(op[0]){case 0:cov_1lxsz3pan5.b[15][0]++;case 1:cov_1lxsz3pan5.b[15][1]++;cov_1lxsz3pan5.s[29]++;t=op;cov_1lxsz3pan5.s[30]++;break;case 4:cov_1lxsz3pan5.b[15][2]++;cov_1lxsz3pan5.s[31]++;_.label++;cov_1lxsz3pan5.s[32]++;return{value:op[1],done:false};case 5:cov_1lxsz3pan5.b[15][3]++;cov_1lxsz3pan5.s[33]++;_.label++;cov_1lxsz3pan5.s[34]++;y=op[1];cov_1lxsz3pan5.s[35]++;op=[0];cov_1lxsz3pan5.s[36]++;continue;case 7:cov_1lxsz3pan5.b[15][4]++;cov_1lxsz3pan5.s[37]++;op=_.ops.pop();cov_1lxsz3pan5.s[38]++;_.trys.pop();cov_1lxsz3pan5.s[39]++;continue;default:cov_1lxsz3pan5.b[15][5]++;cov_1lxsz3pan5.s[40]++;if((cov_1lxsz3pan5.b[17][0]++,!(t=_.trys,t=(cov_1lxsz3pan5.b[18][0]++,t.length>0)&&(cov_1lxsz3pan5.b[18][1]++,t[t.length-1])))&&((cov_1lxsz3pan5.b[17][1]++,op[0]===6)||(cov_1lxsz3pan5.b[17][2]++,op[0]===2))){cov_1lxsz3pan5.b[16][0]++;cov_1lxsz3pan5.s[41]++;_=0;cov_1lxsz3pan5.s[42]++;continue;}else{cov_1lxsz3pan5.b[16][1]++;}cov_1lxsz3pan5.s[43]++;if((cov_1lxsz3pan5.b[20][0]++,op[0]===3)&&((cov_1lxsz3pan5.b[20][1]++,!t)||(cov_1lxsz3pan5.b[20][2]++,op[1]>t[0])&&(cov_1lxsz3pan5.b[20][3]++,op[1]<t[3]))){cov_1lxsz3pan5.b[19][0]++;cov_1lxsz3pan5.s[44]++;_.label=op[1];cov_1lxsz3pan5.s[45]++;break;}else{cov_1lxsz3pan5.b[19][1]++;}cov_1lxsz3pan5.s[46]++;if((cov_1lxsz3pan5.b[22][0]++,op[0]===6)&&(cov_1lxsz3pan5.b[22][1]++,_.label<t[1])){cov_1lxsz3pan5.b[21][0]++;cov_1lxsz3pan5.s[47]++;_.label=t[1];cov_1lxsz3pan5.s[48]++;t=op;cov_1lxsz3pan5.s[49]++;break;}else{cov_1lxsz3pan5.b[21][1]++;}cov_1lxsz3pan5.s[50]++;if((cov_1lxsz3pan5.b[24][0]++,t)&&(cov_1lxsz3pan5.b[24][1]++,_.label<t[2])){cov_1lxsz3pan5.b[23][0]++;cov_1lxsz3pan5.s[51]++;_.label=t[2];cov_1lxsz3pan5.s[52]++;_.ops.push(op);cov_1lxsz3pan5.s[53]++;break;}else{cov_1lxsz3pan5.b[23][1]++;}cov_1lxsz3pan5.s[54]++;if(t[2]){cov_1lxsz3pan5.b[25][0]++;cov_1lxsz3pan5.s[55]++;_.ops.pop();}else{cov_1lxsz3pan5.b[25][1]++;}cov_1lxsz3pan5.s[56]++;_.trys.pop();cov_1lxsz3pan5.s[57]++;continue;}cov_1lxsz3pan5.s[58]++;op=body.call(thisArg,_);}catch(e){cov_1lxsz3pan5.s[59]++;op=[6,e];cov_1lxsz3pan5.s[60]++;y=0;}finally{cov_1lxsz3pan5.s[61]++;f=t=0;}}cov_1lxsz3pan5.s[62]++;if(op[0]&5){cov_1lxsz3pan5.b[26][0]++;cov_1lxsz3pan5.s[63]++;throw op[1];}else{cov_1lxsz3pan5.b[26][1]++;}cov_1lxsz3pan5.s[64]++;return{value:op[0]?(cov_1lxsz3pan5.b[27][0]++,op[1]):(cov_1lxsz3pan5.b[27][1]++,void 0),done:true};}}));cov_1lxsz3pan5.s[65]++;Object.defineProperty(exports,"__esModule",{value:true});var constants_1=(cov_1lxsz3pan5.s[66]++,__webpack_require__(/*! ./utils/constants */ "./utils/constants.ts"));var main_1=(cov_1lxsz3pan5.s[67]++,__webpack_require__(/*! ./main */ "./main.ts"));var common_1=(cov_1lxsz3pan5.s[68]++,__webpack_require__(/*! ./utils/common */ "./utils/common.ts"));var protobuf=(cov_1lxsz3pan5.s[69]++,__webpack_require__(/*! protobufjs */ "protobufjs"));cov_1lxsz3pan5.s[70]++;protobuf.common('google/protobuf/descriptor.proto',{});var L2Session=(cov_1lxsz3pan5.s[71]++,function(){cov_1lxsz3pan5.f[12]++;function L2Session(_sessionID){cov_1lxsz3pan5.f[13]++;cov_1lxsz3pan5.s[72]++;this.sessionID=_sessionID;}cov_1lxsz3pan5.s[73]++;L2Session.getSessionById=function(_sessionID,fromChain){cov_1lxsz3pan5.f[14]++;cov_1lxsz3pan5.s[74]++;if(fromChain===void 0){cov_1lxsz3pan5.b[28][0]++;cov_1lxsz3pan5.s[75]++;fromChain=true;}else{cov_1lxsz3pan5.b[28][1]++;}cov_1lxsz3pan5.s[76]++;return __awaiter(this,void 0,void 0,function(){cov_1lxsz3pan5.f[15]++;var session,sessionExist;cov_1lxsz3pan5.s[77]++;return __generator(this,function(_a){cov_1lxsz3pan5.f[16]++;cov_1lxsz3pan5.s[78]++;switch(_a.label){case 0:cov_1lxsz3pan5.b[29][0]++;cov_1lxsz3pan5.s[79]++;session=L2Session.sessionList.get(_sessionID);cov_1lxsz3pan5.s[80]++;if(!!session){cov_1lxsz3pan5.b[30][0]++;cov_1lxsz3pan5.s[81]++;return[3,3];}else{cov_1lxsz3pan5.b[30][1]++;}cov_1lxsz3pan5.s[82]++;return[4,L2Session.isExists(_sessionID)];case 1:cov_1lxsz3pan5.b[29][1]++;cov_1lxsz3pan5.s[83]++;sessionExist=_a.sent();cov_1lxsz3pan5.s[84]++;if(!sessionExist){cov_1lxsz3pan5.b[31][0]++;cov_1lxsz3pan5.s[85]++;return[2,null];}else{cov_1lxsz3pan5.b[31][1]++;}cov_1lxsz3pan5.s[86]++;session=new L2Session(_sessionID);cov_1lxsz3pan5.s[87]++;return[4,session.initialize()];case 2:cov_1lxsz3pan5.b[29][2]++;cov_1lxsz3pan5.s[88]++;_a.sent();cov_1lxsz3pan5.s[89]++;L2Session.sessionList.set(_sessionID,session);cov_1lxsz3pan5.s[90]++;_a.label=3;case 3:cov_1lxsz3pan5.b[29][3]++;cov_1lxsz3pan5.s[91]++;return[2,session];}});});};cov_1lxsz3pan5.s[92]++;L2Session.isExists=function(_sessionID){cov_1lxsz3pan5.f[17]++;cov_1lxsz3pan5.s[93]++;return __awaiter(this,void 0,void 0,function(){cov_1lxsz3pan5.f[18]++;var session;cov_1lxsz3pan5.s[94]++;return __generator(this,function(_a){cov_1lxsz3pan5.f[19]++;cov_1lxsz3pan5.s[95]++;switch(_a.label){case 0:cov_1lxsz3pan5.b[32][0]++;cov_1lxsz3pan5.s[96]++;return[4,main_1.appSession.methods.sessions(_sessionID).call()];case 1:cov_1lxsz3pan5.b[32][1]++;cov_1lxsz3pan5.s[97]++;session=_a.sent();cov_1lxsz3pan5.s[98]++;if(Number(session.status)===constants_1.SESSION_STATUS.SESSION_STATUS_INIT){cov_1lxsz3pan5.b[33][0]++;cov_1lxsz3pan5.s[99]++;return[2,false];}else{cov_1lxsz3pan5.b[33][1]++;}cov_1lxsz3pan5.s[100]++;return[2,true];}});});};cov_1lxsz3pan5.s[101]++;L2Session.getMessagesBySessionID=function(_sessionID){cov_1lxsz3pan5.f[20]++;cov_1lxsz3pan5.s[102]++;return __awaiter(this,void 0,void 0,function(){cov_1lxsz3pan5.f[21]++;var messages;cov_1lxsz3pan5.s[103]++;return __generator(this,function(_a){cov_1lxsz3pan5.f[22]++;cov_1lxsz3pan5.s[104]++;switch(_a.label){case 0:cov_1lxsz3pan5.b[34][0]++;cov_1lxsz3pan5.s[105]++;return[4,main_1.appSession.methods.exportSession(_sessionID).call()];case 1:cov_1lxsz3pan5.b[34][1]++;cov_1lxsz3pan5.s[106]++;messages=_a.sent();cov_1lxsz3pan5.s[107]++;return[2,messages];}});});};cov_1lxsz3pan5.s[108]++;L2Session.getPlayersBySessionID=function(_sessionID){cov_1lxsz3pan5.f[23]++;cov_1lxsz3pan5.s[109]++;return __awaiter(this,void 0,void 0,function(){cov_1lxsz3pan5.f[24]++;var players;cov_1lxsz3pan5.s[110]++;return __generator(this,function(_a){cov_1lxsz3pan5.f[25]++;cov_1lxsz3pan5.s[111]++;switch(_a.label){case 0:cov_1lxsz3pan5.b[35][0]++;cov_1lxsz3pan5.s[112]++;return[4,main_1.appSession.methods.exportPlayer(_sessionID).call()];case 1:cov_1lxsz3pan5.b[35][1]++;cov_1lxsz3pan5.s[113]++;players=_a.sent();cov_1lxsz3pan5.s[114]++;return[2,players];}});});};cov_1lxsz3pan5.s[115]++;L2Session.prototype.initialize=function(){cov_1lxsz3pan5.f[26]++;cov_1lxsz3pan5.s[116]++;return __awaiter(this,void 0,void 0,function(){cov_1lxsz3pan5.f[27]++;var _a,status,provider,game,paymentContract,data;cov_1lxsz3pan5.s[117]++;return __generator(this,function(_b){cov_1lxsz3pan5.f[28]++;cov_1lxsz3pan5.s[118]++;switch(_b.label){case 0:cov_1lxsz3pan5.b[36][0]++;cov_1lxsz3pan5.s[119]++;return[4,main_1.appSession.methods.sessions(this.sessionID).call()];case 1:cov_1lxsz3pan5.b[36][1]++;cov_1lxsz3pan5.s[120]++;_a=_b.sent(),status=_a.status,provider=_a.provider,game=_a.game,paymentContract=_a.paymentContract,data=_a.data;cov_1lxsz3pan5.s[121]++;this.status=Number(status);cov_1lxsz3pan5.s[122]++;this.game=game;cov_1lxsz3pan5.s[123]++;this.data=data;cov_1lxsz3pan5.s[124]++;this.provider=provider;cov_1lxsz3pan5.s[125]++;this.callbacks=(cov_1lxsz3pan5.b[37][0]++,this.callbacks)||(cov_1lxsz3pan5.b[37][1]++,new Map());cov_1lxsz3pan5.s[126]++;return[2];}});});};cov_1lxsz3pan5.s[127]++;L2Session.prototype.sendMessage=function(to,type,content,amount,token){cov_1lxsz3pan5.f[29]++;cov_1lxsz3pan5.s[128]++;if(amount===void 0){cov_1lxsz3pan5.b[38][0]++;cov_1lxsz3pan5.s[129]++;amount='0';}else{cov_1lxsz3pan5.b[38][1]++;}cov_1lxsz3pan5.s[130]++;if(token===void 0){cov_1lxsz3pan5.b[39][0]++;cov_1lxsz3pan5.s[131]++;token=constants_1.ADDRESS_ZERO;}else{cov_1lxsz3pan5.b[39][1]++;}cov_1lxsz3pan5.s[132]++;return __awaiter(this,void 0,void 0,function(){cov_1lxsz3pan5.f[30]++;var status,from,messageHash,signature,_a,transferData,paymentSignature;cov_1lxsz3pan5.s[133]++;return __generator(this,function(_b){cov_1lxsz3pan5.f[31]++;cov_1lxsz3pan5.s[134]++;switch(_b.label){case 0:cov_1lxsz3pan5.b[40][0]++;cov_1lxsz3pan5.s[135]++;console.log('sendMessage start execute with params: to: [%s], type: [%s], content: [%s], amount: [%s], token: [%s]',to,type,content,amount+'',token);cov_1lxsz3pan5.s[136]++;return[4,main_1.appSession.methods.sessions(this.sessionID).call()];case 1:cov_1lxsz3pan5.b[40][1]++;cov_1lxsz3pan5.s[137]++;status=_b.sent().status;cov_1lxsz3pan5.s[138]++;if(Number(status)!==constants_1.SESSION_STATUS.SESSION_STATUS_OPEN){cov_1lxsz3pan5.b[41][0]++;cov_1lxsz3pan5.s[139]++;throw new Error('session is not open');}else{cov_1lxsz3pan5.b[41][1]++;}cov_1lxsz3pan5.s[140]++;from=main_1.user;cov_1lxsz3pan5.s[141]++;messageHash=main_1.web3_10.utils.soliditySha3({t:'address',v:from},{t:'address',v:to},{t:'bytes32',v:this.sessionID},{t:'uint8',v:type},{t:'bytes',v:content});cov_1lxsz3pan5.s[142]++;signature=common_1.myEcsignToHex(main_1.web3_10,messageHash,main_1.puppet.getAccount().privateKey);cov_1lxsz3pan5.s[143]++;return[4,this.buildTransferData(from,main_1.web3_10.utils.toBN(amount).toString(),token,messageHash)];case 2:cov_1lxsz3pan5.b[40][2]++;cov_1lxsz3pan5.s[144]++;_a=_b.sent(),transferData=_a.transferData,paymentSignature=_a.paymentSignature;cov_1lxsz3pan5.s[145]++;return[4,common_1.sendAppTx(main_1.appSession.methods.sendMessage(from,to,this.sessionID,type,content,signature,transferData,paymentSignature))];case 3:cov_1lxsz3pan5.b[40][3]++;cov_1lxsz3pan5.s[146]++;return[2,_b.sent()];}});});};cov_1lxsz3pan5.s[147]++;L2Session.prototype.onMessage=function(callback){cov_1lxsz3pan5.f[32]++;cov_1lxsz3pan5.s[148]++;return __awaiter(this,void 0,void 0,function(){cov_1lxsz3pan5.f[33]++;cov_1lxsz3pan5.s[149]++;return __generator(this,function(_a){cov_1lxsz3pan5.f[34]++;cov_1lxsz3pan5.s[150]++;this.callbacks.set('message',callback);cov_1lxsz3pan5.s[151]++;return[2];});});};cov_1lxsz3pan5.s[152]++;L2Session.prototype.onSessionClose=function(callback){cov_1lxsz3pan5.f[35]++;cov_1lxsz3pan5.s[153]++;return __awaiter(this,void 0,void 0,function(){cov_1lxsz3pan5.f[36]++;cov_1lxsz3pan5.s[154]++;return __generator(this,function(_a){cov_1lxsz3pan5.f[37]++;cov_1lxsz3pan5.s[155]++;this.callbacks.set('close',callback);cov_1lxsz3pan5.s[156]++;return[2];});});};cov_1lxsz3pan5.s[157]++;L2Session.prototype.buildTransferData=function(from,amount,token,messageHash){cov_1lxsz3pan5.f[38]++;cov_1lxsz3pan5.s[158]++;return __awaiter(this,void 0,void 0,function(){cov_1lxsz3pan5.f[39]++;var _a,hexToBytes,numberToHex,soliditySha3,toBN,channelID,balance,nonce,additionalHash,paymentSignature,channel,balanceProof,transferPB,Transfer,payload,errMsg,message,buffer;cov_1lxsz3pan5.s[159]++;return __generator(this,function(_b){cov_1lxsz3pan5.f[40]++;cov_1lxsz3pan5.s[160]++;switch(_b.label){case 0:cov_1lxsz3pan5.b[42][0]++;cov_1lxsz3pan5.s[161]++;_a=main_1.web3_10.utils,hexToBytes=_a.hexToBytes,numberToHex=_a.numberToHex,soliditySha3=_a.soliditySha3,toBN=_a.toBN;cov_1lxsz3pan5.s[162]++;channelID='0x0000000000000000000000000000000000000000000000000000000000000000';cov_1lxsz3pan5.s[163]++;balance='0';cov_1lxsz3pan5.s[164]++;nonce='0';cov_1lxsz3pan5.s[165]++;additionalHash='0x0000000000000000000000000000000000000000000000000000000000000000';cov_1lxsz3pan5.s[166]++;paymentSignature='0x0';cov_1lxsz3pan5.s[167]++;if(!(Number(amount)>0)){cov_1lxsz3pan5.b[43][0]++;cov_1lxsz3pan5.s[168]++;return[3,5];}else{cov_1lxsz3pan5.b[43][1]++;}cov_1lxsz3pan5.s[169]++;return[4,main_1.ethPN.methods.getChannelID(from,token).call()];case 1:cov_1lxsz3pan5.b[42][1]++;cov_1lxsz3pan5.s[170]++;channelID=_b.sent();cov_1lxsz3pan5.s[171]++;return[4,main_1.appPN.methods.channelMap(channelID).call()];case 2:cov_1lxsz3pan5.b[42][2]++;cov_1lxsz3pan5.s[172]++;channel=_b.sent();cov_1lxsz3pan5.s[173]++;if(Number(channel.status)!==constants_1.CHANNEL_STATUS.CHANNEL_STATUS_OPEN){cov_1lxsz3pan5.b[44][0]++;cov_1lxsz3pan5.s[174]++;throw new Error('app channel status is not open, can not transfer now');}else{cov_1lxsz3pan5.b[44][1]++;}cov_1lxsz3pan5.s[175]++;if(toBN(channel.userBalance).lt(toBN(amount))){cov_1lxsz3pan5.b[45][0]++;cov_1lxsz3pan5.s[176]++;throw new Error("user's balance is less than transfer amount");}else{cov_1lxsz3pan5.b[45][1]++;}cov_1lxsz3pan5.s[177]++;return[4,main_1.appPN.methods.balanceProofMap(channelID,main_1.cp).call()];case 3:cov_1lxsz3pan5.b[42][3]++;cov_1lxsz3pan5.s[178]++;balanceProof=_b.sent();cov_1lxsz3pan5.s[179]++;balance=toBN(amount).add(toBN(balanceProof.balance)).toString();cov_1lxsz3pan5.s[180]++;nonce=toBN(balanceProof.nonce).add(toBN(1)).toString();cov_1lxsz3pan5.s[181]++;additionalHash=soliditySha3({t:'bytes32',v:messageHash},{t:'uint256',v:amount});cov_1lxsz3pan5.s[182]++;return[4,common_1.prepareSignatureForTransfer(main_1.web3_outer,main_1.ethPN.options.address,channelID,balance,nonce,additionalHash,main_1.user)];case 4:cov_1lxsz3pan5.b[42][4]++;cov_1lxsz3pan5.s[183]++;paymentSignature=_b.sent();cov_1lxsz3pan5.s[184]++;_b.label=5;case 5:cov_1lxsz3pan5.b[42][5]++;cov_1lxsz3pan5.s[185]++;transferPB=protobuf.Root.fromJSON(__webpack_require__(/*! ./config/transfer.json */ "./config/transfer.json"));cov_1lxsz3pan5.s[186]++;Transfer=transferPB.lookupType('TransferData.Transfer');cov_1lxsz3pan5.s[187]++;payload={channelID:hexToBytes(channelID),balance:Number(balance),nonce:Number(nonce),amount:Number(amount),additionalHash:hexToBytes(additionalHash)};cov_1lxsz3pan5.s[188]++;console.log('payload',payload);cov_1lxsz3pan5.s[189]++;errMsg=Transfer.verify(payload);cov_1lxsz3pan5.s[190]++;if(errMsg){cov_1lxsz3pan5.b[46][0]++;cov_1lxsz3pan5.s[191]++;throw Error(errMsg);}else{cov_1lxsz3pan5.b[46][1]++;}cov_1lxsz3pan5.s[192]++;message=Transfer.create(payload);cov_1lxsz3pan5.s[193]++;buffer=Transfer.encode(message).finish();cov_1lxsz3pan5.s[194]++;return[2,{transferData:buffer,paymentSignature:paymentSignature}];}});});};cov_1lxsz3pan5.s[195]++;L2Session.sessionList=new Map();cov_1lxsz3pan5.s[196]++;return L2Session;}());cov_1lxsz3pan5.s[197]++;exports.default=L2Session;

/***/ }),

/***/ "./utils/common.ts":
/*!*************************!*\
  !*** ./utils/common.ts ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(Buffer) {var cov_tnb33w7yv=function(){var path="/Users/zhang/work/DigiCash/l2app/l2.js/src/utils/common.ts",hash="b57f95b1b29f43b00155f1530107662708cd74cc",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/zhang/work/DigiCash/l2app/l2.js/src/utils/common.ts",statementMap:{"0":{start:{line:2,column:15},end:{line:12,column:1}},"1":{start:{line:3,column:4},end:{line:10,column:6}},"2":{start:{line:4,column:8},end:{line:8,column:9}},"3":{start:{line:5,column:12},end:{line:5,column:29}},"4":{start:{line:6,column:12},end:{line:7,column:28}},"5":{start:{line:6,column:29},end:{line:7,column:28}},"6":{start:{line:7,column:16},end:{line:7,column:28}},"7":{start:{line:9,column:8},end:{line:9,column:17}},"8":{start:{line:11,column:4},end:{line:11,column:43}},"9":{start:{line:13,column:16},end:{line:20,column:1}},"10":{start:{line:14,column:4},end:{line:19,column:7}},"11":{start:{line:15,column:36},end:{line:15,column:97}},"12":{start:{line:15,column:42},end:{line:15,column:70}},"13":{start:{line:15,column:85},end:{line:15,column:95}},"14":{start:{line:16,column:35},end:{line:16,column:100}},"15":{start:{line:16,column:41},end:{line:16,column:73}},"16":{start:{line:16,column:88},end:{line:16,column:98}},"17":{start:{line:17,column:32},end:{line:17,column:149}},"18":{start:{line:17,column:97},end:{line:17,column:119}},"19":{start:{line:18,column:8},end:{line:18,column:78}},"20":{start:{line:21,column:18},end:{line:47,column:1}},"21":{start:{line:22,column:12},end:{line:22,column:104}},"22":{start:{line:22,column:43},end:{line:22,column:68}},"23":{start:{line:22,column:57},end:{line:22,column:68}},"24":{start:{line:22,column:69},end:{line:22,column:81}},"25":{start:{line:23,column:4},end:{line:23,column:157}},"26":{start:{line:23,column:138},end:{line:23,column:150}},"27":{start:{line:24,column:23},end:{line:24,column:68}},"28":{start:{line:24,column:45},end:{line:24,column:65}},"29":{start:{line:26,column:8},end:{line:26,column:70}},"30":{start:{line:26,column:15},end:{line:26,column:70}},"31":{start:{line:27,column:8},end:{line:44,column:66}},"32":{start:{line:27,column:18},end:{line:44,column:66}},"33":{start:{line:28,column:12},end:{line:28,column:169}},"34":{start:{line:28,column:160},end:{line:28,column:169}},"35":{start:{line:29,column:12},end:{line:29,column:52}},"36":{start:{line:29,column:26},end:{line:29,column:52}},"37":{start:{line:30,column:12},end:{line:42,column:13}},"38":{start:{line:31,column:32},end:{line:31,column:39}},"39":{start:{line:31,column:40},end:{line:31,column:46}},"40":{start:{line:32,column:24},end:{line:32,column:34}},"41":{start:{line:32,column:35},end:{line:32,column:72}},"42":{start:{line:33,column:24},end:{line:33,column:34}},"43":{start:{line:33,column:35},end:{line:33,column:45}},"44":{start:{line:33,column:46},end:{line:33,column:55}},"45":{start:{line:33,column:56},end:{line:33,column:65}},"46":{start:{line:34,column:24},end:{line:34,column:41}},"47":{start:{line:34,column:42},end:{line:34,column:55}},"48":{start:{line:34,column:56},end:{line:34,column:65}},"49":{start:{line:36,column:20},end:{line:36,column:128}},"50":{start:{line:36,column:110},end:{line:36,column:116}},"51":{start:{line:36,column:117},end:{line:36,column:126}},"52":{start:{line:37,column:20},end:{line:37,column:106}},"53":{start:{line:37,column:81},end:{line:37,column:97}},"54":{start:{line:37,column:98},end:{line:37,column:104}},"55":{start:{line:38,column:20},end:{line:38,column:89}},"56":{start:{line:38,column:57},end:{line:38,column:72}},"57":{start:{line:38,column:73},end:{line:38,column:80}},"58":{start:{line:38,column:81},end:{line:38,column:87}},"59":{start:{line:39,column:20},end:{line:39,column:87}},"60":{start:{line:39,column:47},end:{line:39,column:62}},"61":{start:{line:39,column:63},end:{line:39,column:78}},"62":{start:{line:39,column:79},end:{line:39,column:85}},"63":{start:{line:40,column:20},end:{line:40,column:42}},"64":{start:{line:40,column:30},end:{line:40,column:42}},"65":{start:{line:41,column:20},end:{line:41,column:33}},"66":{start:{line:41,column:34},end:{line:41,column:43}},"67":{start:{line:43,column:12},end:{line:43,column:39}},"68":{start:{line:44,column:22},end:{line:44,column:34}},"69":{start:{line:44,column:35},end:{line:44,column:41}},"70":{start:{line:44,column:54},end:{line:44,column:64}},"71":{start:{line:45,column:8},end:{line:45,column:35}},"72":{start:{line:45,column:23},end:{line:45,column:35}},"73":{start:{line:45,column:36},end:{line:45,column:89}},"74":{start:{line:48,column:0},end:{line:48,column:62}},"75":{start:{line:49,column:24},end:{line:49,column:50}},"76":{start:{line:50,column:18},end:{line:50,column:40}},"77":{start:{line:51,column:18},end:{line:51,column:48}},"78":{start:{line:52,column:13},end:{line:52,column:31}},"79":{start:{line:54,column:29},end:{line:54,column:73}},"80":{start:{line:55,column:25},end:{line:55,column:66}},"81":{start:{line:56,column:4},end:{line:56,column:26}},"82":{start:{line:58,column:0},end:{line:58,column:28}},"83":{start:{line:60,column:27},end:{line:60,column:74}},"84":{start:{line:61,column:28},end:{line:61,column:76}},"85":{start:{line:62,column:23},end:{line:62,column:84}},"86":{start:{line:63,column:29},end:{line:63,column:103}},"87":{start:{line:64,column:4},end:{line:64,column:30}},"88":{start:{line:66,column:0},end:{line:66,column:38}},"89":{start:{line:68,column:4},end:{line:82,column:7}},"90":{start:{line:69,column:8},end:{line:81,column:11}},"91":{start:{line:70,column:12},end:{line:80,column:20}},"92":{start:{line:71,column:20},end:{line:79,column:23}},"93":{start:{line:72,column:24},end:{line:72,column:69}},"94":{start:{line:73,column:24},end:{line:78,column:25}},"95":{start:{line:74,column:28},end:{line:74,column:40}},"96":{start:{line:77,column:28},end:{line:77,column:44}},"97":{start:{line:84,column:0},end:{line:84,column:30}},"98":{start:{line:86,column:4},end:{line:115,column:7}},"99":{start:{line:88,column:20},end:{line:88,column:24}},"100":{start:{line:89,column:8},end:{line:114,column:11}},"101":{start:{line:90,column:12},end:{line:90,column:55}},"102":{start:{line:91,column:12},end:{line:91,column:32}},"103":{start:{line:92,column:12},end:{line:92,column:44}},"104":{start:{line:93,column:12},end:{line:113,column:20}},"105":{start:{line:94,column:20},end:{line:112,column:27}},"106":{start:{line:98,column:48},end:{line:112,column:23}},"107":{start:{line:99,column:24},end:{line:111,column:27}},"108":{start:{line:100,column:28},end:{line:100,column:68}},"109":{start:{line:101,column:28},end:{line:109,column:29}},"110":{start:{line:102,column:32},end:{line:102,column:44}},"111":{start:{line:104,column:33},end:{line:109,column:29}},"112":{start:{line:105,column:32},end:{line:105,column:53}},"113":{start:{line:108,column:32},end:{line:108,column:55}},"114":{start:{line:110,column:28},end:{line:110,column:39}},"115":{start:{line:117,column:0},end:{line:117,column:34}},"116":{start:{line:119,column:4},end:{line:127,column:5}},"117":{start:{line:120,column:23},end:{line:120,column:38}},"118":{start:{line:121,column:8},end:{line:122,column:29}},"119":{start:{line:122,column:12},end:{line:122,column:29}},"120":{start:{line:123,column:8},end:{line:123,column:24}},"121":{start:{line:126,column:8},end:{line:126,column:25}},"122":{start:{line:129,column:0},end:{line:129,column:46}},"123":{start:{line:131,column:4},end:{line:147,column:7}},"124":{start:{line:133,column:8},end:{line:146,column:11}},"125":{start:{line:134,column:12},end:{line:145,column:13}},"126":{start:{line:135,column:24},end:{line:135,column:58}},"127":{start:{line:137,column:20},end:{line:137,column:40}},"128":{start:{line:138,column:20},end:{line:143,column:21}},"129":{start:{line:139,column:24},end:{line:139,column:94}},"130":{start:{line:142,column:24},end:{line:142,column:90}},"131":{start:{line:144,column:20},end:{line:144,column:31}},"132":{start:{line:149,column:0},end:{line:149,column:24}},"133":{start:{line:151,column:4},end:{line:155,column:7}},"134":{start:{line:152,column:8},end:{line:154,column:11}},"135":{start:{line:153,column:12},end:{line:153,column:98}},"136":{start:{line:153,column:56},end:{line:153,column:93}},"137":{start:{line:157,column:0},end:{line:157,column:22}},"138":{start:{line:159,column:4},end:{line:196,column:7}},"139":{start:{line:161,column:8},end:{line:195,column:11}},"140":{start:{line:162,column:12},end:{line:194,column:13}},"141":{start:{line:164,column:20},end:{line:179,column:22}},"142":{start:{line:180,column:20},end:{line:180,column:57}},"143":{start:{line:181,column:20},end:{line:181,column:35}},"144":{start:{line:182,column:20},end:{line:182,column:33}},"145":{start:{line:184,column:20},end:{line:184,column:46}},"146":{start:{line:185,column:20},end:{line:185,column:73}},"147":{start:{line:187,column:20},end:{line:187,column:42}},"148":{start:{line:188,column:20},end:{line:188,column:34}},"149":{start:{line:190,column:20},end:{line:190,column:38}},"150":{start:{line:191,column:20},end:{line:191,column:63}},"151":{start:{line:192,column:20},end:{line:192,column:32}},"152":{start:{line:193,column:24},end:{line:193,column:46}},"153":{start:{line:198,column:0},end:{line:198,column:66}},"154":{start:{line:200,column:19},end:{line:200,column:49}},"155":{start:{line:201,column:26},end:{line:201,column:30}},"156":{start:{line:202,column:4},end:{line:208,column:5}},"157":{start:{line:203,column:22},end:{line:203,column:36}},"158":{start:{line:204,column:8},end:{line:207,column:9}},"159":{start:{line:205,column:12},end:{line:205,column:38}},"160":{start:{line:206,column:12},end:{line:206,column:18}},"161":{start:{line:209,column:4},end:{line:211,column:5}},"162":{start:{line:210,column:8},end:{line:210,column:20}},"163":{start:{line:212,column:25},end:{line:212,column:75}},"164":{start:{line:213,column:4},end:{line:218,column:5}},"165":{start:{line:214,column:18},end:{line:214,column:24}},"166":{start:{line:215,column:8},end:{line:217,column:9}},"167":{start:{line:216,column:12},end:{line:216,column:97}},"168":{start:{line:219,column:4},end:{line:219,column:16}},"169":{start:{line:221,column:0},end:{line:221,column:58}},"170":{start:{line:223,column:4},end:{line:242,column:7}},"171":{start:{line:225,column:8},end:{line:241,column:11}},"172":{start:{line:226,column:12},end:{line:240,column:13}},"173":{start:{line:228,column:20},end:{line:235,column:22}},"174":{start:{line:236,column:20},end:{line:236,column:34}},"175":{start:{line:237,column:20},end:{line:237,column:28}},"176":{start:{line:238,column:20},end:{line:238,column:65}},"177":{start:{line:239,column:24},end:{line:239,column:211}},"178":{start:{line:244,column:0},end:{line:244,column:40}},"179":{start:{line:246,column:4},end:{line:272,column:7}},"180":{start:{line:248,column:8},end:{line:271,column:11}},"181":{start:{line:249,column:12},end:{line:270,column:13}},"182":{start:{line:250,column:24},end:{line:250,column:53}},"183":{start:{line:252,column:20},end:{line:252,column:35}},"184":{start:{line:253,column:20},end:{line:253,column:48}},"185":{start:{line:255,column:20},end:{line:255,column:36}},"186":{start:{line:256,column:20},end:{line:256,column:49}},"187":{start:{line:256,column:35},end:{line:256,column:49}},"188":{start:{line:257,column:20},end:{line:257,column:91}},"189":{start:{line:259,column:20},end:{line:259,column:40}},"190":{start:{line:260,column:20},end:{line:266,column:21}},"191":{start:{line:261,column:24},end:{line:261,column:62}},"192":{start:{line:264,column:24},end:{line:264,column:66}},"193":{start:{line:265,column:24},end:{line:265,column:45}},"194":{start:{line:267,column:20},end:{line:267,column:34}},"195":{start:{line:268,column:24},end:{line:268,column:69}},"196":{start:{line:269,column:24},end:{line:269,column:35}},"197":{start:{line:274,column:0},end:{line:274,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:2,column:42},end:{line:2,column:43}},loc:{start:{line:2,column:54},end:{line:12,column:1}},line:2},"1":{name:"(anonymous_1)",decl:{start:{line:3,column:32},end:{line:3,column:33}},loc:{start:{line:3,column:44},end:{line:10,column:5}},line:3},"2":{name:"(anonymous_2)",decl:{start:{line:13,column:44},end:{line:13,column:45}},loc:{start:{line:13,column:89},end:{line:20,column:1}},line:13},"3":{name:"(anonymous_3)",decl:{start:{line:14,column:36},end:{line:14,column:37}},loc:{start:{line:14,column:63},end:{line:19,column:5}},line:14},"4":{name:"fulfilled",decl:{start:{line:15,column:17},end:{line:15,column:26}},loc:{start:{line:15,column:34},end:{line:15,column:99}},line:15},"5":{name:"rejected",decl:{start:{line:16,column:17},end:{line:16,column:25}},loc:{start:{line:16,column:33},end:{line:16,column:102}},line:16},"6":{name:"step",decl:{start:{line:17,column:17},end:{line:17,column:21}},loc:{start:{line:17,column:30},end:{line:17,column:151}},line:17},"7":{name:"(anonymous_7)",decl:{start:{line:17,column:76},end:{line:17,column:77}},loc:{start:{line:17,column:95},end:{line:17,column:121}},line:17},"8":{name:"(anonymous_8)",decl:{start:{line:21,column:48},end:{line:21,column:49}},loc:{start:{line:21,column:73},end:{line:47,column:1}},line:21},"9":{name:"(anonymous_9)",decl:{start:{line:22,column:30},end:{line:22,column:31}},loc:{start:{line:22,column:41},end:{line:22,column:83}},line:22},"10":{name:"(anonymous_10)",decl:{start:{line:23,column:125},end:{line:23,column:126}},loc:{start:{line:23,column:136},end:{line:23,column:152}},line:23},"11":{name:"verb",decl:{start:{line:24,column:13},end:{line:24,column:17}},loc:{start:{line:24,column:21},end:{line:24,column:70}},line:24},"12":{name:"(anonymous_12)",decl:{start:{line:24,column:30},end:{line:24,column:31}},loc:{start:{line:24,column:43},end:{line:24,column:67}},line:24},"13":{name:"step",decl:{start:{line:25,column:13},end:{line:25,column:17}},loc:{start:{line:25,column:22},end:{line:46,column:5}},line:25},"14":{name:"myEcsign",decl:{start:{line:53,column:9},end:{line:53,column:17}},loc:{start:{line:53,column:49},end:{line:57,column:1}},line:53},"15":{name:"myEcsignToHex",decl:{start:{line:59,column:9},end:{line:59,column:22}},loc:{start:{line:59,column:54},end:{line:65,column:1}},line:59},"16":{name:"sendEthTx",decl:{start:{line:67,column:9},end:{line:67,column:18}},loc:{start:{line:67,column:48},end:{line:83,column:1}},line:67},"17":{name:"(anonymous_17)",decl:{start:{line:68,column:43},end:{line:68,column:44}},loc:{start:{line:68,column:55},end:{line:82,column:5}},line:68},"18":{name:"(anonymous_18)",decl:{start:{line:69,column:33},end:{line:69,column:34}},loc:{start:{line:69,column:47},end:{line:81,column:9}},line:69},"19":{name:"(anonymous_19)",decl:{start:{line:70,column:35},end:{line:70,column:36}},loc:{start:{line:70,column:62},end:{line:80,column:17}},line:70},"20":{name:"(anonymous_20)",decl:{start:{line:71,column:111},end:{line:71,column:112}},loc:{start:{line:71,column:134},end:{line:79,column:21}},line:71},"21":{name:"signMessage",decl:{start:{line:85,column:9},end:{line:85,column:20}},loc:{start:{line:85,column:44},end:{line:116,column:1}},line:85},"22":{name:"(anonymous_22)",decl:{start:{line:86,column:43},end:{line:86,column:44}},loc:{start:{line:86,column:55},end:{line:115,column:5}},line:86},"23":{name:"(anonymous_23)",decl:{start:{line:89,column:33},end:{line:89,column:34}},loc:{start:{line:89,column:47},end:{line:114,column:9}},line:89},"24":{name:"(anonymous_24)",decl:{start:{line:93,column:35},end:{line:93,column:36}},loc:{start:{line:93,column:62},end:{line:113,column:17}},line:93},"25":{name:"(anonymous_25)",decl:{start:{line:98,column:23},end:{line:98,column:24}},loc:{start:{line:98,column:46},end:{line:112,column:25}},line:98},"26":{name:"(anonymous_26)",decl:{start:{line:98,column:88},end:{line:98,column:89}},loc:{start:{line:98,column:100},end:{line:112,column:21}},line:98},"27":{name:"(anonymous_27)",decl:{start:{line:99,column:49},end:{line:99,column:50}},loc:{start:{line:99,column:63},end:{line:111,column:25}},line:99},"28":{name:"abi2jsonInterface",decl:{start:{line:118,column:9},end:{line:118,column:26}},loc:{start:{line:118,column:32},end:{line:128,column:1}},line:118},"29":{name:"getLCB",decl:{start:{line:130,column:9},end:{line:130,column:15}},loc:{start:{line:130,column:29},end:{line:148,column:1}},line:130},"30":{name:"(anonymous_30)",decl:{start:{line:131,column:43},end:{line:131,column:44}},loc:{start:{line:131,column:55},end:{line:147,column:5}},line:131},"31":{name:"(anonymous_31)",decl:{start:{line:133,column:33},end:{line:133,column:34}},loc:{start:{line:133,column:47},end:{line:146,column:9}},line:133},"32":{name:"delay",decl:{start:{line:150,column:9},end:{line:150,column:14}},loc:{start:{line:150,column:25},end:{line:156,column:1}},line:150},"33":{name:"(anonymous_33)",decl:{start:{line:151,column:43},end:{line:151,column:44}},loc:{start:{line:151,column:55},end:{line:155,column:5}},line:151},"34":{name:"(anonymous_34)",decl:{start:{line:152,column:33},end:{line:152,column:34}},loc:{start:{line:152,column:47},end:{line:154,column:9}},line:152},"35":{name:"(anonymous_35)",decl:{start:{line:153,column:35},end:{line:153,column:36}},loc:{start:{line:153,column:54},end:{line:153,column:95}},line:153},"36":{name:"prepareSignatureForTransfer",decl:{start:{line:158,column:9},end:{line:158,column:36}},loc:{start:{line:158,column:112},end:{line:197,column:1}},line:158},"37":{name:"(anonymous_37)",decl:{start:{line:159,column:43},end:{line:159,column:44}},loc:{start:{line:159,column:55},end:{line:196,column:5}},line:159},"38":{name:"(anonymous_38)",decl:{start:{line:161,column:33},end:{line:161,column:34}},loc:{start:{line:161,column:47},end:{line:195,column:9}},line:161},"39":{name:"extractEventFromReceipt",decl:{start:{line:199,column:9},end:{line:199,column:32}},loc:{start:{line:199,column:64},end:{line:220,column:1}},line:199},"40":{name:"getAppTxOption",decl:{start:{line:222,column:9},end:{line:222,column:23}},loc:{start:{line:222,column:26},end:{line:243,column:1}},line:222},"41":{name:"(anonymous_41)",decl:{start:{line:223,column:43},end:{line:223,column:44}},loc:{start:{line:223,column:55},end:{line:242,column:5}},line:223},"42":{name:"(anonymous_42)",decl:{start:{line:225,column:33},end:{line:225,column:34}},loc:{start:{line:225,column:47},end:{line:241,column:9}},line:225},"43":{name:"sendAppTx",decl:{start:{line:245,column:9},end:{line:245,column:18}},loc:{start:{line:245,column:27},end:{line:273,column:1}},line:245},"44":{name:"(anonymous_44)",decl:{start:{line:246,column:43},end:{line:246,column:44}},loc:{start:{line:246,column:55},end:{line:272,column:5}},line:246},"45":{name:"(anonymous_45)",decl:{start:{line:248,column:33},end:{line:248,column:34}},loc:{start:{line:248,column:47},end:{line:271,column:9}},line:248}},branchMap:{"0":{loc:{start:{line:2,column:15},end:{line:12,column:1}},type:"binary-expr",locations:[{start:{line:2,column:16},end:{line:2,column:20}},{start:{line:2,column:24},end:{line:2,column:37}},{start:{line:2,column:42},end:{line:12,column:1}}],line:2},"1":{loc:{start:{line:3,column:15},end:{line:10,column:5}},type:"binary-expr",locations:[{start:{line:3,column:15},end:{line:3,column:28}},{start:{line:3,column:32},end:{line:10,column:5}}],line:3},"2":{loc:{start:{line:6,column:29},end:{line:7,column:28}},type:"if",locations:[{start:{line:6,column:29},end:{line:7,column:28}},{start:{line:6,column:29},end:{line:7,column:28}}],line:6},"3":{loc:{start:{line:13,column:16},end:{line:20,column:1}},type:"binary-expr",locations:[{start:{line:13,column:17},end:{line:13,column:21}},{start:{line:13,column:25},end:{line:13,column:39}},{start:{line:13,column:44},end:{line:20,column:1}}],line:13},"4":{loc:{start:{line:14,column:16},end:{line:14,column:34}},type:"binary-expr",locations:[{start:{line:14,column:16},end:{line:14,column:17}},{start:{line:14,column:22},end:{line:14,column:33}}],line:14},"5":{loc:{start:{line:17,column:32},end:{line:17,column:148}},type:"cond-expr",locations:[{start:{line:17,column:46},end:{line:17,column:67}},{start:{line:17,column:70},end:{line:17,column:148}}],line:17},"6":{loc:{start:{line:18,column:51},end:{line:18,column:67}},type:"binary-expr",locations:[{start:{line:18,column:51},end:{line:18,column:61}},{start:{line:18,column:65},end:{line:18,column:67}}],line:18},"7":{loc:{start:{line:21,column:18},end:{line:47,column:1}},type:"binary-expr",locations:[{start:{line:21,column:19},end:{line:21,column:23}},{start:{line:21,column:27},end:{line:21,column:43}},{start:{line:21,column:48},end:{line:47,column:1}}],line:21},"8":{loc:{start:{line:22,column:43},end:{line:22,column:68}},type:"if",locations:[{start:{line:22,column:43},end:{line:22,column:68}},{start:{line:22,column:43},end:{line:22,column:68}}],line:22},"9":{loc:{start:{line:23,column:71},end:{line:23,column:153}},type:"binary-expr",locations:[{start:{line:23,column:71},end:{line:23,column:99}},{start:{line:23,column:104},end:{line:23,column:152}}],line:23},"10":{loc:{start:{line:26,column:8},end:{line:26,column:70}},type:"if",locations:[{start:{line:26,column:8},end:{line:26,column:70}},{start:{line:26,column:8},end:{line:26,column:70}}],line:26},"11":{loc:{start:{line:28,column:12},end:{line:28,column:169}},type:"if",locations:[{start:{line:28,column:12},end:{line:28,column:169}},{start:{line:28,column:12},end:{line:28,column:169}}],line:28},"12":{loc:{start:{line:28,column:23},end:{line:28,column:158}},type:"binary-expr",locations:[{start:{line:28,column:23},end:{line:28,column:24}},{start:{line:28,column:29},end:{line:28,column:125}},{start:{line:28,column:130},end:{line:28,column:158}}],line:28},"13":{loc:{start:{line:28,column:33},end:{line:28,column:125}},type:"cond-expr",locations:[{start:{line:28,column:45},end:{line:28,column:56}},{start:{line:28,column:59},end:{line:28,column:125}}],line:28},"14":{loc:{start:{line:28,column:59},end:{line:28,column:125}},type:"cond-expr",locations:[{start:{line:28,column:67},end:{line:28,column:116}},{start:{line:28,column:119},end:{line:28,column:125}}],line:28},"15":{loc:{start:{line:28,column:67},end:{line:28,column:116}},type:"binary-expr",locations:[{start:{line:28,column:67},end:{line:28,column:77}},{start:{line:28,column:82},end:{line:28,column:115}}],line:28},"16":{loc:{start:{line:28,column:82},end:{line:28,column:112}},type:"binary-expr",locations:[{start:{line:28,column:83},end:{line:28,column:98}},{start:{line:28,column:103},end:{line:28,column:112}}],line:28},"17":{loc:{start:{line:29,column:12},end:{line:29,column:52}},type:"if",locations:[{start:{line:29,column:12},end:{line:29,column:52}},{start:{line:29,column:12},end:{line:29,column:52}}],line:29},"18":{loc:{start:{line:30,column:12},end:{line:42,column:13}},type:"switch",locations:[{start:{line:31,column:16},end:{line:31,column:23}},{start:{line:31,column:24},end:{line:31,column:46}},{start:{line:32,column:16},end:{line:32,column:72}},{start:{line:33,column:16},end:{line:33,column:65}},{start:{line:34,column:16},end:{line:34,column:65}},{start:{line:35,column:16},end:{line:41,column:43}}],line:30},"19":{loc:{start:{line:36,column:20},end:{line:36,column:128}},type:"if",locations:[{start:{line:36,column:20},end:{line:36,column:128}},{start:{line:36,column:20},end:{line:36,column:128}}],line:36},"20":{loc:{start:{line:36,column:24},end:{line:36,column:106}},type:"binary-expr",locations:[{start:{line:36,column:24},end:{line:36,column:74}},{start:{line:36,column:79},end:{line:36,column:90}},{start:{line:36,column:94},end:{line:36,column:105}}],line:36},"21":{loc:{start:{line:36,column:42},end:{line:36,column:73}},type:"binary-expr",locations:[{start:{line:36,column:42},end:{line:36,column:54}},{start:{line:36,column:58},end:{line:36,column:73}}],line:36},"22":{loc:{start:{line:37,column:20},end:{line:37,column:106}},type:"if",locations:[{start:{line:37,column:20},end:{line:37,column:106}},{start:{line:37,column:20},end:{line:37,column:106}}],line:37},"23":{loc:{start:{line:37,column:24},end:{line:37,column:77}},type:"binary-expr",locations:[{start:{line:37,column:24},end:{line:37,column:35}},{start:{line:37,column:40},end:{line:37,column:42}},{start:{line:37,column:47},end:{line:37,column:59}},{start:{line:37,column:63},end:{line:37,column:75}}],line:37},"24":{loc:{start:{line:38,column:20},end:{line:38,column:89}},type:"if",locations:[{start:{line:38,column:20},end:{line:38,column:89}},{start:{line:38,column:20},end:{line:38,column:89}}],line:38},"25":{loc:{start:{line:38,column:24},end:{line:38,column:53}},type:"binary-expr",locations:[{start:{line:38,column:24},end:{line:38,column:35}},{start:{line:38,column:39},end:{line:38,column:53}}],line:38},"26":{loc:{start:{line:39,column:20},end:{line:39,column:87}},type:"if",locations:[{start:{line:39,column:20},end:{line:39,column:87}},{start:{line:39,column:20},end:{line:39,column:87}}],line:39},"27":{loc:{start:{line:39,column:24},end:{line:39,column:43}},type:"binary-expr",locations:[{start:{line:39,column:24},end:{line:39,column:25}},{start:{line:39,column:29},end:{line:39,column:43}}],line:39},"28":{loc:{start:{line:40,column:20},end:{line:40,column:42}},type:"if",locations:[{start:{line:40,column:20},end:{line:40,column:42}},{start:{line:40,column:20},end:{line:40,column:42}}],line:40},"29":{loc:{start:{line:45,column:8},end:{line:45,column:35}},type:"if",locations:[{start:{line:45,column:8},end:{line:45,column:35}},{start:{line:45,column:8},end:{line:45,column:35}}],line:45},"30":{loc:{start:{line:45,column:52},end:{line:45,column:74}},type:"cond-expr",locations:[{start:{line:45,column:60},end:{line:45,column:65}},{start:{line:45,column:68},end:{line:45,column:74}}],line:45},"31":{loc:{start:{line:73,column:24},end:{line:78,column:25}},type:"if",locations:[{start:{line:73,column:24},end:{line:78,column:25}},{start:{line:73,column:24},end:{line:78,column:25}}],line:73},"32":{loc:{start:{line:101,column:28},end:{line:109,column:29}},type:"if",locations:[{start:{line:101,column:28},end:{line:109,column:29}},{start:{line:101,column:28},end:{line:109,column:29}}],line:101},"33":{loc:{start:{line:104,column:33},end:{line:109,column:29}},type:"if",locations:[{start:{line:104,column:33},end:{line:109,column:29}},{start:{line:104,column:33},end:{line:109,column:29}}],line:104},"34":{loc:{start:{line:121,column:8},end:{line:122,column:29}},type:"if",locations:[{start:{line:121,column:8},end:{line:122,column:29}},{start:{line:121,column:8},end:{line:122,column:29}}],line:121},"35":{loc:{start:{line:134,column:12},end:{line:145,column:13}},type:"switch",locations:[{start:{line:135,column:16},end:{line:135,column:58}},{start:{line:136,column:16},end:{line:144,column:31}}],line:134},"36":{loc:{start:{line:138,column:20},end:{line:143,column:21}},type:"if",locations:[{start:{line:138,column:20},end:{line:143,column:21}},{start:{line:138,column:20},end:{line:143,column:21}}],line:138},"37":{loc:{start:{line:162,column:12},end:{line:194,column:13}},type:"switch",locations:[{start:{line:163,column:16},end:{line:182,column:33}},{start:{line:183,column:16},end:{line:185,column:73}},{start:{line:186,column:16},end:{line:188,column:34}},{start:{line:189,column:16},end:{line:192,column:32}},{start:{line:193,column:16},end:{line:193,column:46}}],line:162},"38":{loc:{start:{line:204,column:8},end:{line:207,column:9}},type:"if",locations:[{start:{line:204,column:8},end:{line:207,column:9}},{start:{line:204,column:8},end:{line:207,column:9}}],line:204},"39":{loc:{start:{line:204,column:12},end:{line:204,column:61}},type:"binary-expr",locations:[{start:{line:204,column:12},end:{line:204,column:36}},{start:{line:204,column:40},end:{line:204,column:61}}],line:204},"40":{loc:{start:{line:209,column:4},end:{line:211,column:5}},type:"if",locations:[{start:{line:209,column:4},end:{line:211,column:5}},{start:{line:209,column:4},end:{line:211,column:5}}],line:209},"41":{loc:{start:{line:215,column:8},end:{line:217,column:9}},type:"if",locations:[{start:{line:215,column:8},end:{line:217,column:9}},{start:{line:215,column:8},end:{line:217,column:9}}],line:215},"42":{loc:{start:{line:226,column:12},end:{line:240,column:13}},type:"switch",locations:[{start:{line:227,column:16},end:{line:238,column:65}},{start:{line:239,column:16},end:{line:239,column:211}}],line:226},"43":{loc:{start:{line:249,column:12},end:{line:270,column:13}},type:"switch",locations:[{start:{line:250,column:16},end:{line:250,column:53}},{start:{line:251,column:16},end:{line:253,column:48}},{start:{line:254,column:16},end:{line:257,column:91}},{start:{line:258,column:16},end:{line:267,column:34}},{start:{line:268,column:16},end:{line:268,column:69}},{start:{line:269,column:16},end:{line:269,column:35}}],line:249},"44":{loc:{start:{line:256,column:20},end:{line:256,column:49}},type:"if",locations:[{start:{line:256,column:20},end:{line:256,column:49}},{start:{line:256,column:20},end:{line:256,column:49}}],line:256},"45":{loc:{start:{line:260,column:20},end:{line:266,column:21}},type:"if",locations:[{start:{line:260,column:20},end:{line:266,column:21}},{start:{line:260,column:20},end:{line:266,column:21}}],line:260}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0},b:{"0":[0,0,0],"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0,0,0,0,0],"19":[0,0],"20":[0,0,0],"21":[0,0],"22":[0,0],"23":[0,0,0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0,0,0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0,0,0,0,0],"44":[0,0],"45":[0,0]},inputSourceMap:{version:3,file:"/Users/zhang/work/DigiCash/l2app/l2.js/src/utils/common.ts",sourceRoot:"/Users/zhang/work/DigiCash/l2app/l2.js/",sources:["node_modules/source-map-loader/index.js!/Users/zhang/work/DigiCash/l2app/l2.js/src/utils/common.ts"],names:[],mappings:"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",sourcesContent:["/**\n * \u7B7E\u540D\u76F8\u5173\u7684\u5DE5\u5177\u51FD\u6570\n */\nimport { ecsign, toRpcSig } from 'ethereumjs-util';\nimport { AbiItem } from 'web3/node_modules/web3-utils';\nimport {\n  ETH_MESSAGE_COMMIT_BLOCK_EXPERITION,\n  CITA_TX_COMMIT_BLOCK_EXPERITION,\n} from './constants';\nimport { Contract } from 'web3/node_modules/web3-eth-contract';\nimport { EIP712_TYPES } from '../config/TypedData';\nimport { cita, puppet } from '../main';\n\n/**\n * \u7528\u79C1\u94A5\u7B7E\u7F72\u6D88\u606F\n *\n * @param {any} web3\n * @param {string} messageHash \u6D88\u606FHash\n * @param {string } privateKey \u79C1\u94A5\n *\n * @returns {Bytes} \u8FD4\u56DEbytes\u683C\u5F0F\u7684\u7B7E\u540D\u7ED3\u679C\n */\nexport function myEcsign(web3: any, messageHash: string, privateKey: string) {\n  let signatureHexString = myEcsignToHex(web3, messageHash, privateKey);\n  let signatureBytes = web3.utils.hexToBytes(signatureHexString);\n  return signatureBytes;\n}\n\n/**\n * \u7528\u79C1\u94A5\u7B7E\u7F72\u6D88\u606F\n *\n * @param {any} web3\n * @param {string} messageHash \u6D88\u606FHash\n * @param {string} privateKey \u79C1\u94A5\n *\n * @returns {String} \u8FD4\u56DEhex\u683C\u5F0F\u7684\u7B7E\u540D\u7ED3\u679C\n */\nexport function myEcsignToHex(\n  web3: any,\n  messageHash: string,\n  privateKey: string\n): string {\n  let privateKeyBuffer = new Buffer(privateKey.replace('0x', ''), 'hex');\n  let messageHashBuffer = new Buffer(messageHash.replace('0x', ''), 'hex');\n  let signatureObj = ecsign(messageHashBuffer, privateKeyBuffer);\n  let signatureHexString = toRpcSig(\n    signatureObj.v,\n    signatureObj.r,\n    signatureObj.s\n  );\n  return signatureHexString;\n}\n\n/**\n * submit a transaction to ethereum\n *\n * @param {string} from from eth address\n * @param {string} to to eth address\n * @param {number|string} value transaction value\n * @param {string} data transaction data\n *\n * @returns {Promise<string>} transactionHash\n */\nexport async function sendEthTx(\n  web3: any,\n  from: string,\n  to: string,\n  value: number | string,\n  data: string\n): Promise<string> {\n  return new Promise<string>((resolve, reject) => {\n    web3.eth.sendTransaction(\n      { from, to, value, data, gasPrice: 1e10 },\n      function(err: any, result: any) {\n        console.log('send Transaction', err, result);\n        if (err) {\n          reject(err);\n        } else {\n          resolve(result);\n        }\n      }\n    );\n  });\n}\n\n/**\n * sign message with eth_SignTypedData_v3 by metamask\n *\n * @param {any} web3\n * @param {string} typedData messages need to be signed\n *\n * @returns {Promise<string>} the sign result\n */\nexport async function signMessage(\n  web3: any,\n  from: string,\n  typedData: any\n): Promise<string> {\n  // if (!(web3.currentProvider as any).isMetaMask) {\n\n  //     const typedDataHash = ethUtil.bufferToHex(hashTypedData(typedData));\n  //     const sig = await web3.eth.sign(typedDataHash, from);\n  //     const recoveredAddress = recoverTypedData(typedData, sig);\n  //     if (recoveredAddress !== from) {\n  //     }\n  //     return sig;\n\n  // }else {\n  let params = [from, JSON.stringify(typedData)];\n  console.dir(params);\n  let method = 'eth_signTypedData_v3';\n\n  return new Promise<string>((resolve, reject) => {\n    web3.currentProvider.sendAsync(\n      {\n        method,\n        params,\n        from,\n      },\n      async (err: any, result: any) => {\n        console.log('sign Result', err, result);\n        if (err) {\n          reject(err);\n        } else if (result.error) {\n          reject(result.error);\n        } else {\n          resolve(result.result);\n        }\n      }\n    );\n  });\n\n  // }\n}\n\n/**\n * convert contract abi code of string type to AbiItem[]\n *\n * @param {string} abi contract abi code\n *\n * @returns {AbiItem[]|undefined} the abi code of AbiItem[] type\n */\nexport function abi2jsonInterface(abi: string): AbiItem[] | undefined {\n  try {\n    let abiArray: AbiItem[] = JSON.parse(abi);\n    if (!Array.isArray(abiArray)) return undefined;\n    return abiArray;\n  } catch (e) {\n    return undefined;\n  }\n}\n\n/**\n * get the valid the block number for tx or msg\n *\n * @param {any} base\n * @param {string} chain eth or cita\n *\n * @returns the last commit block for valid data\n */\nexport async function getLCB(base: any, chain: string) {\n  let current = await base.getBlockNumber();\n  if (chain === 'eth') {\n    return current + ETH_MESSAGE_COMMIT_BLOCK_EXPERITION;\n  } else {\n    return current + CITA_TX_COMMIT_BLOCK_EXPERITION;\n  }\n}\n\n/**\n * delay time for duation\n *\n * @param {number} duration  unit: milisecond\n *\n * @returns {Promise<any>}\n */\nexport async function delay(duration: number): Promise<any> {\n  return new Promise(resolve => setTimeout(resolve, duration));\n}\n\n/**\n * ask outer wallet to sign transfer message\n *\n * @param {any} web3_outer\n * @param {string} ethPNAddress\n * @param {string} channelID\n * @param {string} balance\n * @param {string} nonce\n * @param {string} additionalHash\n * @param {string} user\n *\n * @returns {Promise<string>} signature for transfer message\n */\nexport async function prepareSignatureForTransfer(\n  web3_outer: any,\n  ethPNAddress: string,\n  channelID: string,\n  balance: string,\n  nonce: string,\n  additionalHash: string,\n  user: string\n): Promise<string> {\n  // build typed data for transfer message\n  let typedData = {\n    types: EIP712_TYPES,\n    primaryType: 'Transfer',\n    domain: {\n      name: 'litexlayer2',\n      version: '1',\n      chainId: 4,\n      verifyingContract: ethPNAddress,\n    },\n    message: {\n      channelID: channelID,\n      balance,\n      nonce,\n      additionalHash,\n    },\n  };\n\n  console.log('typedData ', typedData);\n\n  let signature = '';\n  try {\n    signature = await signMessage(web3_outer, user, typedData);\n  } catch (err) {\n    console.log('user reject the sign action');\n    throw err;\n  }\n\n  return signature;\n}\n\n/**\n * extract event from transaction receipt\n *\n * @param receipt\n * @param contract contract definition\n * @param name event name\n *\n * @returns event object\n */\nexport function extractEventFromReceipt(\n  web3: any,\n  receipt: any,\n  contract: Contract,\n  name: string\n) {\n  let abiItems = contract.options.jsonInterface;\n\n  let eventDefinition = null;\n  for (let abiItem of abiItems) {\n    if (abiItem.type === 'event' && abiItem.name === name) {\n      eventDefinition = abiItem;\n      break;\n    }\n  }\n\n  if (eventDefinition === null) {\n    return null;\n  }\n\n  let eventSignature = web3.eth.abi.encodeEventSignature(eventDefinition);\n\n  for (let log of receipt.logs) {\n    if (log.topics[0] === eventSignature) {\n      return web3.eth.abi.decodeLog(\n        eventDefinition.inputs,\n        log.data,\n        log.topics.slice(1)\n      );\n    }\n  }\n\n  return null;\n}\n\n/**\n * build the valid tx options for submiting cita transaction\n */\nexport async function getAppTxOption() {\n  const tx = {\n    nonce: 999999,\n    quota: 1000000,\n    chainId: 1,\n    version: 1,\n    validUntilBlock: 999999,\n    value: '0x0',\n  };\n  return {\n    ...tx,\n    validUntilBlock: await getLCB(cita.base, 'cita'),\n    from: puppet.getAccount().address,\n    privateKey: puppet.getAccount().privateKey,\n  };\n}\n\nexport async function sendAppTx(action: any): Promise<string> {\n  let tx = await getAppTxOption();\n  let res = await action.send(tx);\n  if (res.hash) {\n    let receipt = await cita.listeners.listenToTransactionReceipt(res.hash);\n    if (receipt.errorMessage) {\n      throw new Error(receipt.errorMessage);\n    } else {\n      console.log('submit sendMessage success');\n      return res.hash;\n    }\n  } else {\n    throw new Error('submit sendMessage failed');\n  }\n}\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var __assign=(cov_tnb33w7yv.s[0]++,(cov_tnb33w7yv.b[0][0]++,this)&&(cov_tnb33w7yv.b[0][1]++,this.__assign)||(cov_tnb33w7yv.b[0][2]++,function(){cov_tnb33w7yv.f[0]++;cov_tnb33w7yv.s[1]++;__assign=(cov_tnb33w7yv.b[1][0]++,Object.assign)||(cov_tnb33w7yv.b[1][1]++,function(t){cov_tnb33w7yv.f[1]++;cov_tnb33w7yv.s[2]++;for(var s,i=1,n=arguments.length;i<n;i++){cov_tnb33w7yv.s[3]++;s=arguments[i];cov_tnb33w7yv.s[4]++;for(var p in s){cov_tnb33w7yv.s[5]++;if(Object.prototype.hasOwnProperty.call(s,p)){cov_tnb33w7yv.b[2][0]++;cov_tnb33w7yv.s[6]++;t[p]=s[p];}else{cov_tnb33w7yv.b[2][1]++;}}}cov_tnb33w7yv.s[7]++;return t;});cov_tnb33w7yv.s[8]++;return __assign.apply(this,arguments);}));var __awaiter=(cov_tnb33w7yv.s[9]++,(cov_tnb33w7yv.b[3][0]++,this)&&(cov_tnb33w7yv.b[3][1]++,this.__awaiter)||(cov_tnb33w7yv.b[3][2]++,function(thisArg,_arguments,P,generator){cov_tnb33w7yv.f[2]++;cov_tnb33w7yv.s[10]++;return new((cov_tnb33w7yv.b[4][0]++,P)||(cov_tnb33w7yv.b[4][1]++,P=Promise))(function(resolve,reject){cov_tnb33w7yv.f[3]++;function fulfilled(value){cov_tnb33w7yv.f[4]++;cov_tnb33w7yv.s[11]++;try{cov_tnb33w7yv.s[12]++;step(generator.next(value));}catch(e){cov_tnb33w7yv.s[13]++;reject(e);}}function rejected(value){cov_tnb33w7yv.f[5]++;cov_tnb33w7yv.s[14]++;try{cov_tnb33w7yv.s[15]++;step(generator["throw"](value));}catch(e){cov_tnb33w7yv.s[16]++;reject(e);}}function step(result){cov_tnb33w7yv.f[6]++;cov_tnb33w7yv.s[17]++;result.done?(cov_tnb33w7yv.b[5][0]++,resolve(result.value)):(cov_tnb33w7yv.b[5][1]++,new P(function(resolve){cov_tnb33w7yv.f[7]++;cov_tnb33w7yv.s[18]++;resolve(result.value);}).then(fulfilled,rejected));}cov_tnb33w7yv.s[19]++;step((generator=generator.apply(thisArg,(cov_tnb33w7yv.b[6][0]++,_arguments)||(cov_tnb33w7yv.b[6][1]++,[]))).next());});}));var __generator=(cov_tnb33w7yv.s[20]++,(cov_tnb33w7yv.b[7][0]++,this)&&(cov_tnb33w7yv.b[7][1]++,this.__generator)||(cov_tnb33w7yv.b[7][2]++,function(thisArg,body){cov_tnb33w7yv.f[8]++;var _=(cov_tnb33w7yv.s[21]++,{label:0,sent:function(){cov_tnb33w7yv.f[9]++;cov_tnb33w7yv.s[22]++;if(t[0]&1){cov_tnb33w7yv.b[8][0]++;cov_tnb33w7yv.s[23]++;throw t[1];}else{cov_tnb33w7yv.b[8][1]++;}cov_tnb33w7yv.s[24]++;return t[1];},trys:[],ops:[]}),f,y,t,g;cov_tnb33w7yv.s[25]++;return g={next:verb(0),"throw":verb(1),"return":verb(2)},(cov_tnb33w7yv.b[9][0]++,typeof Symbol==="function")&&(cov_tnb33w7yv.b[9][1]++,g[Symbol.iterator]=function(){cov_tnb33w7yv.f[10]++;cov_tnb33w7yv.s[26]++;return this;}),g;function verb(n){cov_tnb33w7yv.f[11]++;cov_tnb33w7yv.s[27]++;return function(v){cov_tnb33w7yv.f[12]++;cov_tnb33w7yv.s[28]++;return step([n,v]);};}function step(op){cov_tnb33w7yv.f[13]++;cov_tnb33w7yv.s[29]++;if(f){cov_tnb33w7yv.b[10][0]++;cov_tnb33w7yv.s[30]++;throw new TypeError("Generator is already executing.");}else{cov_tnb33w7yv.b[10][1]++;}cov_tnb33w7yv.s[31]++;while(_){cov_tnb33w7yv.s[32]++;try{cov_tnb33w7yv.s[33]++;if(f=1,(cov_tnb33w7yv.b[12][0]++,y)&&(cov_tnb33w7yv.b[12][1]++,t=op[0]&2?(cov_tnb33w7yv.b[13][0]++,y["return"]):(cov_tnb33w7yv.b[13][1]++,op[0]?(cov_tnb33w7yv.b[14][0]++,(cov_tnb33w7yv.b[15][0]++,y["throw"])||(cov_tnb33w7yv.b[15][1]++,((cov_tnb33w7yv.b[16][0]++,t=y["return"])&&(cov_tnb33w7yv.b[16][1]++,t.call(y)),0))):(cov_tnb33w7yv.b[14][1]++,y.next)))&&(cov_tnb33w7yv.b[12][2]++,!(t=t.call(y,op[1])).done)){cov_tnb33w7yv.b[11][0]++;cov_tnb33w7yv.s[34]++;return t;}else{cov_tnb33w7yv.b[11][1]++;}cov_tnb33w7yv.s[35]++;if(y=0,t){cov_tnb33w7yv.b[17][0]++;cov_tnb33w7yv.s[36]++;op=[op[0]&2,t.value];}else{cov_tnb33w7yv.b[17][1]++;}cov_tnb33w7yv.s[37]++;switch(op[0]){case 0:cov_tnb33w7yv.b[18][0]++;case 1:cov_tnb33w7yv.b[18][1]++;cov_tnb33w7yv.s[38]++;t=op;cov_tnb33w7yv.s[39]++;break;case 4:cov_tnb33w7yv.b[18][2]++;cov_tnb33w7yv.s[40]++;_.label++;cov_tnb33w7yv.s[41]++;return{value:op[1],done:false};case 5:cov_tnb33w7yv.b[18][3]++;cov_tnb33w7yv.s[42]++;_.label++;cov_tnb33w7yv.s[43]++;y=op[1];cov_tnb33w7yv.s[44]++;op=[0];cov_tnb33w7yv.s[45]++;continue;case 7:cov_tnb33w7yv.b[18][4]++;cov_tnb33w7yv.s[46]++;op=_.ops.pop();cov_tnb33w7yv.s[47]++;_.trys.pop();cov_tnb33w7yv.s[48]++;continue;default:cov_tnb33w7yv.b[18][5]++;cov_tnb33w7yv.s[49]++;if((cov_tnb33w7yv.b[20][0]++,!(t=_.trys,t=(cov_tnb33w7yv.b[21][0]++,t.length>0)&&(cov_tnb33w7yv.b[21][1]++,t[t.length-1])))&&((cov_tnb33w7yv.b[20][1]++,op[0]===6)||(cov_tnb33w7yv.b[20][2]++,op[0]===2))){cov_tnb33w7yv.b[19][0]++;cov_tnb33w7yv.s[50]++;_=0;cov_tnb33w7yv.s[51]++;continue;}else{cov_tnb33w7yv.b[19][1]++;}cov_tnb33w7yv.s[52]++;if((cov_tnb33w7yv.b[23][0]++,op[0]===3)&&((cov_tnb33w7yv.b[23][1]++,!t)||(cov_tnb33w7yv.b[23][2]++,op[1]>t[0])&&(cov_tnb33w7yv.b[23][3]++,op[1]<t[3]))){cov_tnb33w7yv.b[22][0]++;cov_tnb33w7yv.s[53]++;_.label=op[1];cov_tnb33w7yv.s[54]++;break;}else{cov_tnb33w7yv.b[22][1]++;}cov_tnb33w7yv.s[55]++;if((cov_tnb33w7yv.b[25][0]++,op[0]===6)&&(cov_tnb33w7yv.b[25][1]++,_.label<t[1])){cov_tnb33w7yv.b[24][0]++;cov_tnb33w7yv.s[56]++;_.label=t[1];cov_tnb33w7yv.s[57]++;t=op;cov_tnb33w7yv.s[58]++;break;}else{cov_tnb33w7yv.b[24][1]++;}cov_tnb33w7yv.s[59]++;if((cov_tnb33w7yv.b[27][0]++,t)&&(cov_tnb33w7yv.b[27][1]++,_.label<t[2])){cov_tnb33w7yv.b[26][0]++;cov_tnb33w7yv.s[60]++;_.label=t[2];cov_tnb33w7yv.s[61]++;_.ops.push(op);cov_tnb33w7yv.s[62]++;break;}else{cov_tnb33w7yv.b[26][1]++;}cov_tnb33w7yv.s[63]++;if(t[2]){cov_tnb33w7yv.b[28][0]++;cov_tnb33w7yv.s[64]++;_.ops.pop();}else{cov_tnb33w7yv.b[28][1]++;}cov_tnb33w7yv.s[65]++;_.trys.pop();cov_tnb33w7yv.s[66]++;continue;}cov_tnb33w7yv.s[67]++;op=body.call(thisArg,_);}catch(e){cov_tnb33w7yv.s[68]++;op=[6,e];cov_tnb33w7yv.s[69]++;y=0;}finally{cov_tnb33w7yv.s[70]++;f=t=0;}}cov_tnb33w7yv.s[71]++;if(op[0]&5){cov_tnb33w7yv.b[29][0]++;cov_tnb33w7yv.s[72]++;throw op[1];}else{cov_tnb33w7yv.b[29][1]++;}cov_tnb33w7yv.s[73]++;return{value:op[0]?(cov_tnb33w7yv.b[30][0]++,op[1]):(cov_tnb33w7yv.b[30][1]++,void 0),done:true};}}));cov_tnb33w7yv.s[74]++;Object.defineProperty(exports,"__esModule",{value:true});var ethereumjs_util_1=(cov_tnb33w7yv.s[75]++,__webpack_require__(/*! ethereumjs-util */ "ethereumjs-util"));var constants_1=(cov_tnb33w7yv.s[76]++,__webpack_require__(/*! ./constants */ "./utils/constants.ts"));var TypedData_1=(cov_tnb33w7yv.s[77]++,__webpack_require__(/*! ../config/TypedData */ "./config/TypedData.ts"));var main_1=(cov_tnb33w7yv.s[78]++,__webpack_require__(/*! ../main */ "./main.ts"));function myEcsign(web3,messageHash,privateKey){cov_tnb33w7yv.f[14]++;var signatureHexString=(cov_tnb33w7yv.s[79]++,myEcsignToHex(web3,messageHash,privateKey));var signatureBytes=(cov_tnb33w7yv.s[80]++,web3.utils.hexToBytes(signatureHexString));cov_tnb33w7yv.s[81]++;return signatureBytes;}cov_tnb33w7yv.s[82]++;exports.myEcsign=myEcsign;function myEcsignToHex(web3,messageHash,privateKey){cov_tnb33w7yv.f[15]++;var privateKeyBuffer=(cov_tnb33w7yv.s[83]++,new Buffer(privateKey.replace('0x',''),'hex'));var messageHashBuffer=(cov_tnb33w7yv.s[84]++,new Buffer(messageHash.replace('0x',''),'hex'));var signatureObj=(cov_tnb33w7yv.s[85]++,ethereumjs_util_1.ecsign(messageHashBuffer,privateKeyBuffer));var signatureHexString=(cov_tnb33w7yv.s[86]++,ethereumjs_util_1.toRpcSig(signatureObj.v,signatureObj.r,signatureObj.s));cov_tnb33w7yv.s[87]++;return signatureHexString;}cov_tnb33w7yv.s[88]++;exports.myEcsignToHex=myEcsignToHex;function sendEthTx(web3,from,to,value,data){cov_tnb33w7yv.f[16]++;cov_tnb33w7yv.s[89]++;return __awaiter(this,void 0,void 0,function(){cov_tnb33w7yv.f[17]++;cov_tnb33w7yv.s[90]++;return __generator(this,function(_a){cov_tnb33w7yv.f[18]++;cov_tnb33w7yv.s[91]++;return[2,new Promise(function(resolve,reject){cov_tnb33w7yv.f[19]++;cov_tnb33w7yv.s[92]++;web3.eth.sendTransaction({from:from,to:to,value:value,data:data,gasPrice:1e10},function(err,result){cov_tnb33w7yv.f[20]++;cov_tnb33w7yv.s[93]++;console.log('send Transaction',err,result);cov_tnb33w7yv.s[94]++;if(err){cov_tnb33w7yv.b[31][0]++;cov_tnb33w7yv.s[95]++;reject(err);}else{cov_tnb33w7yv.b[31][1]++;cov_tnb33w7yv.s[96]++;resolve(result);}});})];});});}cov_tnb33w7yv.s[97]++;exports.sendEthTx=sendEthTx;function signMessage(web3,from,typedData){cov_tnb33w7yv.f[21]++;cov_tnb33w7yv.s[98]++;return __awaiter(this,void 0,void 0,function(){cov_tnb33w7yv.f[22]++;var params,method;var _this=(cov_tnb33w7yv.s[99]++,this);cov_tnb33w7yv.s[100]++;return __generator(this,function(_a){cov_tnb33w7yv.f[23]++;cov_tnb33w7yv.s[101]++;params=[from,JSON.stringify(typedData)];cov_tnb33w7yv.s[102]++;console.dir(params);cov_tnb33w7yv.s[103]++;method='eth_signTypedData_v3';cov_tnb33w7yv.s[104]++;return[2,new Promise(function(resolve,reject){cov_tnb33w7yv.f[24]++;cov_tnb33w7yv.s[105]++;web3.currentProvider.sendAsync({method:method,params:params,from:from},function(err,result){cov_tnb33w7yv.f[25]++;cov_tnb33w7yv.s[106]++;return __awaiter(_this,void 0,void 0,function(){cov_tnb33w7yv.f[26]++;cov_tnb33w7yv.s[107]++;return __generator(this,function(_a){cov_tnb33w7yv.f[27]++;cov_tnb33w7yv.s[108]++;console.log('sign Result',err,result);cov_tnb33w7yv.s[109]++;if(err){cov_tnb33w7yv.b[32][0]++;cov_tnb33w7yv.s[110]++;reject(err);}else{cov_tnb33w7yv.b[32][1]++;cov_tnb33w7yv.s[111]++;if(result.error){cov_tnb33w7yv.b[33][0]++;cov_tnb33w7yv.s[112]++;reject(result.error);}else{cov_tnb33w7yv.b[33][1]++;cov_tnb33w7yv.s[113]++;resolve(result.result);}}cov_tnb33w7yv.s[114]++;return[2];});});});})];});});}cov_tnb33w7yv.s[115]++;exports.signMessage=signMessage;function abi2jsonInterface(abi){cov_tnb33w7yv.f[28]++;cov_tnb33w7yv.s[116]++;try{var abiArray=(cov_tnb33w7yv.s[117]++,JSON.parse(abi));cov_tnb33w7yv.s[118]++;if(!Array.isArray(abiArray)){cov_tnb33w7yv.b[34][0]++;cov_tnb33w7yv.s[119]++;return undefined;}else{cov_tnb33w7yv.b[34][1]++;}cov_tnb33w7yv.s[120]++;return abiArray;}catch(e){cov_tnb33w7yv.s[121]++;return undefined;}}cov_tnb33w7yv.s[122]++;exports.abi2jsonInterface=abi2jsonInterface;function getLCB(base,chain){cov_tnb33w7yv.f[29]++;cov_tnb33w7yv.s[123]++;return __awaiter(this,void 0,void 0,function(){cov_tnb33w7yv.f[30]++;var current;cov_tnb33w7yv.s[124]++;return __generator(this,function(_a){cov_tnb33w7yv.f[31]++;cov_tnb33w7yv.s[125]++;switch(_a.label){case 0:cov_tnb33w7yv.b[35][0]++;cov_tnb33w7yv.s[126]++;return[4,base.getBlockNumber()];case 1:cov_tnb33w7yv.b[35][1]++;cov_tnb33w7yv.s[127]++;current=_a.sent();cov_tnb33w7yv.s[128]++;if(chain==='eth'){cov_tnb33w7yv.b[36][0]++;cov_tnb33w7yv.s[129]++;return[2,current+constants_1.ETH_MESSAGE_COMMIT_BLOCK_EXPERITION];}else{cov_tnb33w7yv.b[36][1]++;cov_tnb33w7yv.s[130]++;return[2,current+constants_1.CITA_TX_COMMIT_BLOCK_EXPERITION];}cov_tnb33w7yv.s[131]++;return[2];}});});}cov_tnb33w7yv.s[132]++;exports.getLCB=getLCB;function delay(duration){cov_tnb33w7yv.f[32]++;cov_tnb33w7yv.s[133]++;return __awaiter(this,void 0,void 0,function(){cov_tnb33w7yv.f[33]++;cov_tnb33w7yv.s[134]++;return __generator(this,function(_a){cov_tnb33w7yv.f[34]++;cov_tnb33w7yv.s[135]++;return[2,new Promise(function(resolve){cov_tnb33w7yv.f[35]++;cov_tnb33w7yv.s[136]++;return setTimeout(resolve,duration);})];});});}cov_tnb33w7yv.s[137]++;exports.delay=delay;function prepareSignatureForTransfer(web3_outer,ethPNAddress,channelID,balance,nonce,additionalHash,user){cov_tnb33w7yv.f[36]++;cov_tnb33w7yv.s[138]++;return __awaiter(this,void 0,void 0,function(){cov_tnb33w7yv.f[37]++;var typedData,signature,err_1;cov_tnb33w7yv.s[139]++;return __generator(this,function(_a){cov_tnb33w7yv.f[38]++;cov_tnb33w7yv.s[140]++;switch(_a.label){case 0:cov_tnb33w7yv.b[37][0]++;cov_tnb33w7yv.s[141]++;typedData={types:TypedData_1.EIP712_TYPES,primaryType:'Transfer',domain:{name:'litexlayer2',version:'1',chainId:4,verifyingContract:ethPNAddress},message:{channelID:channelID,balance:balance,nonce:nonce,additionalHash:additionalHash}};cov_tnb33w7yv.s[142]++;console.log('typedData ',typedData);cov_tnb33w7yv.s[143]++;signature='';cov_tnb33w7yv.s[144]++;_a.label=1;case 1:cov_tnb33w7yv.b[37][1]++;cov_tnb33w7yv.s[145]++;_a.trys.push([1,3,,4]);cov_tnb33w7yv.s[146]++;return[4,signMessage(web3_outer,user,typedData)];case 2:cov_tnb33w7yv.b[37][2]++;cov_tnb33w7yv.s[147]++;signature=_a.sent();cov_tnb33w7yv.s[148]++;return[3,4];case 3:cov_tnb33w7yv.b[37][3]++;cov_tnb33w7yv.s[149]++;err_1=_a.sent();cov_tnb33w7yv.s[150]++;console.log('user reject the sign action');cov_tnb33w7yv.s[151]++;throw err_1;case 4:cov_tnb33w7yv.b[37][4]++;cov_tnb33w7yv.s[152]++;return[2,signature];}});});}cov_tnb33w7yv.s[153]++;exports.prepareSignatureForTransfer=prepareSignatureForTransfer;function extractEventFromReceipt(web3,receipt,contract,name){cov_tnb33w7yv.f[39]++;var abiItems=(cov_tnb33w7yv.s[154]++,contract.options.jsonInterface);var eventDefinition=(cov_tnb33w7yv.s[155]++,null);cov_tnb33w7yv.s[156]++;for(var _i=0,abiItems_1=abiItems;_i<abiItems_1.length;_i++){var abiItem=(cov_tnb33w7yv.s[157]++,abiItems_1[_i]);cov_tnb33w7yv.s[158]++;if((cov_tnb33w7yv.b[39][0]++,abiItem.type==='event')&&(cov_tnb33w7yv.b[39][1]++,abiItem.name===name)){cov_tnb33w7yv.b[38][0]++;cov_tnb33w7yv.s[159]++;eventDefinition=abiItem;cov_tnb33w7yv.s[160]++;break;}else{cov_tnb33w7yv.b[38][1]++;}}cov_tnb33w7yv.s[161]++;if(eventDefinition===null){cov_tnb33w7yv.b[40][0]++;cov_tnb33w7yv.s[162]++;return null;}else{cov_tnb33w7yv.b[40][1]++;}var eventSignature=(cov_tnb33w7yv.s[163]++,web3.eth.abi.encodeEventSignature(eventDefinition));cov_tnb33w7yv.s[164]++;for(var _a=0,_b=receipt.logs;_a<_b.length;_a++){var log=(cov_tnb33w7yv.s[165]++,_b[_a]);cov_tnb33w7yv.s[166]++;if(log.topics[0]===eventSignature){cov_tnb33w7yv.b[41][0]++;cov_tnb33w7yv.s[167]++;return web3.eth.abi.decodeLog(eventDefinition.inputs,log.data,log.topics.slice(1));}else{cov_tnb33w7yv.b[41][1]++;}}cov_tnb33w7yv.s[168]++;return null;}cov_tnb33w7yv.s[169]++;exports.extractEventFromReceipt=extractEventFromReceipt;function getAppTxOption(){cov_tnb33w7yv.f[40]++;cov_tnb33w7yv.s[170]++;return __awaiter(this,void 0,void 0,function(){cov_tnb33w7yv.f[41]++;var tx,_a,_b;cov_tnb33w7yv.s[171]++;return __generator(this,function(_c){cov_tnb33w7yv.f[42]++;cov_tnb33w7yv.s[172]++;switch(_c.label){case 0:cov_tnb33w7yv.b[42][0]++;cov_tnb33w7yv.s[173]++;tx={nonce:999999,quota:1000000,chainId:1,version:1,validUntilBlock:999999,value:'0x0'};cov_tnb33w7yv.s[174]++;_a=[{},tx];cov_tnb33w7yv.s[175]++;_b={};cov_tnb33w7yv.s[176]++;return[4,getLCB(main_1.cita.base,'cita')];case 1:cov_tnb33w7yv.b[42][1]++;cov_tnb33w7yv.s[177]++;return[2,__assign.apply(void 0,_a.concat([(_b.validUntilBlock=_c.sent(),_b.from=main_1.puppet.getAccount().address,_b.privateKey=main_1.puppet.getAccount().privateKey,_b)]))];}});});}cov_tnb33w7yv.s[178]++;exports.getAppTxOption=getAppTxOption;function sendAppTx(action){cov_tnb33w7yv.f[43]++;cov_tnb33w7yv.s[179]++;return __awaiter(this,void 0,void 0,function(){cov_tnb33w7yv.f[44]++;var tx,res,receipt;cov_tnb33w7yv.s[180]++;return __generator(this,function(_a){cov_tnb33w7yv.f[45]++;cov_tnb33w7yv.s[181]++;switch(_a.label){case 0:cov_tnb33w7yv.b[43][0]++;cov_tnb33w7yv.s[182]++;return[4,getAppTxOption()];case 1:cov_tnb33w7yv.b[43][1]++;cov_tnb33w7yv.s[183]++;tx=_a.sent();cov_tnb33w7yv.s[184]++;return[4,action.send(tx)];case 2:cov_tnb33w7yv.b[43][2]++;cov_tnb33w7yv.s[185]++;res=_a.sent();cov_tnb33w7yv.s[186]++;if(!res.hash){cov_tnb33w7yv.b[44][0]++;cov_tnb33w7yv.s[187]++;return[3,4];}else{cov_tnb33w7yv.b[44][1]++;}cov_tnb33w7yv.s[188]++;return[4,main_1.cita.listeners.listenToTransactionReceipt(res.hash)];case 3:cov_tnb33w7yv.b[43][3]++;cov_tnb33w7yv.s[189]++;receipt=_a.sent();cov_tnb33w7yv.s[190]++;if(receipt.errorMessage){cov_tnb33w7yv.b[45][0]++;cov_tnb33w7yv.s[191]++;throw new Error(receipt.errorMessage);}else{cov_tnb33w7yv.b[45][1]++;cov_tnb33w7yv.s[192]++;console.log('submit sendMessage success');cov_tnb33w7yv.s[193]++;return[2,res.hash];}cov_tnb33w7yv.s[194]++;return[3,5];case 4:cov_tnb33w7yv.b[43][4]++;cov_tnb33w7yv.s[195]++;throw new Error('submit sendMessage failed');case 5:cov_tnb33w7yv.b[43][5]++;cov_tnb33w7yv.s[196]++;return[2];}});});}cov_tnb33w7yv.s[197]++;exports.sendAppTx=sendAppTx;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/node-libs-browser/node_modules/buffer/index.js */ "../node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer))

/***/ }),

/***/ "./utils/constants.ts":
/*!****************************!*\
  !*** ./utils/constants.ts ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
var cov_1exa8fjeh4=function(){var path="/Users/zhang/work/DigiCash/l2app/l2.js/src/utils/constants.ts",hash="298d3c65afd8e077f16aa3aac0ef835b01aaa142",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/zhang/work/DigiCash/l2app/l2.js/src/utils/constants.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:50}},"2":{start:{line:4,column:0},end:{line:4,column:45}},"3":{start:{line:5,column:0},end:{line:5,column:38}},"4":{start:{line:6,column:0},end:{line:6,column:26}},"5":{start:{line:7,column:0},end:{line:7,column:68}},"6":{start:{line:9,column:0},end:{line:13,column:74}},"7":{start:{line:10,column:4},end:{line:10,column:54}},"8":{start:{line:11,column:4},end:{line:11,column:60}},"9":{start:{line:12,column:4},end:{line:12,column:62}},"10":{start:{line:15,column:0},end:{line:21,column:77}},"11":{start:{line:16,column:4},end:{line:16,column:86}},"12":{start:{line:17,column:4},end:{line:17,column:86}},"13":{start:{line:18,column:4},end:{line:18,column:88}},"14":{start:{line:19,column:4},end:{line:19,column:90}},"15":{start:{line:20,column:4},end:{line:20,column:112}},"16":{start:{line:23,column:0},end:{line:27,column:77}},"17":{start:{line:24,column:4},end:{line:24,column:86}},"18":{start:{line:25,column:4},end:{line:25,column:86}},"19":{start:{line:26,column:4},end:{line:26,column:88}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:9,column:1},end:{line:9,column:2}},loc:{start:{line:9,column:26},end:{line:13,column:1}},line:9},"1":{name:"(anonymous_1)",decl:{start:{line:15,column:1},end:{line:15,column:2}},loc:{start:{line:15,column:27},end:{line:21,column:1}},line:15},"2":{name:"(anonymous_2)",decl:{start:{line:23,column:1},end:{line:23,column:2}},loc:{start:{line:23,column:27},end:{line:27,column:1}},line:23}},branchMap:{"0":{loc:{start:{line:13,column:19},end:{line:13,column:72}},type:"binary-expr",locations:[{start:{line:13,column:19},end:{line:13,column:40}},{start:{line:13,column:45},end:{line:13,column:71}}],line:13},"1":{loc:{start:{line:21,column:20},end:{line:21,column:75}},type:"binary-expr",locations:[{start:{line:21,column:20},end:{line:21,column:42}},{start:{line:21,column:47},end:{line:21,column:74}}],line:21},"2":{loc:{start:{line:27,column:20},end:{line:27,column:75}},type:"binary-expr",locations:[{start:{line:27,column:20},end:{line:27,column:42}},{start:{line:27,column:47},end:{line:27,column:74}}],line:27}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},inputSourceMap:{version:3,file:"/Users/zhang/work/DigiCash/l2app/l2.js/src/utils/constants.ts",sourceRoot:"/Users/zhang/work/DigiCash/l2app/l2.js/",sources:["node_modules/source-map-loader/index.js!/Users/zhang/work/DigiCash/l2app/l2.js/src/utils/constants.ts"],names:[],mappings:";;AAIa,QAAA,mCAAmC,GAAG,GAAG,CAAC;AAC1C,QAAA,+BAA+B,GAAG,EAAE,CAAC;AACrC,QAAA,sBAAsB,GAAG,IAAI,CAAC;AAC9B,QAAA,aAAa,GAAG,CAAC,CAAC;AAClB,QAAA,YAAY,GAAG,4CAA4C,CAAC;AAEzE,IAAY,aAIX;AAJD,WAAY,aAAa;IACvB,iDAAI,CAAA;IACJ,uDAAO,CAAA;IACP,yDAAQ,CAAA;AACV,CAAC,EAJW,aAAa,GAAb,qBAAa,KAAb,qBAAa,QAIxB;AAED,IAAY,cAMX;AAND,WAAY,cAAc;IACxB,iFAAuB,CAAA;IACvB,iFAAmB,CAAA;IACnB,mFAAoB,CAAA;IACpB,qFAAqB,CAAA;IACrB,2GAAgC,CAAA;AAClC,CAAC,EANW,cAAc,GAAd,sBAAc,KAAd,sBAAc,QAMzB;AAED,IAAY,cAIX;AAJD,WAAY,cAAc;IACxB,iFAAuB,CAAA;IACvB,iFAAmB,CAAA;IACnB,mFAAoB,CAAA;AACtB,CAAC,EAJW,cAAc,GAAd,sBAAc,KAAd,sBAAc,QAIzB",sourcesContent:["import { AbiItem } from 'web3/node_modules/web3-utils';\n\nexport type SOL_TYPE = 'address' | 'uint256' | 'bytes32' | 'bytes';\n\nexport const ETH_MESSAGE_COMMIT_BLOCK_EXPERITION = 250;\nexport const CITA_TX_COMMIT_BLOCK_EXPERITION = 88;\nexport const CITA_TX_BLOCK_INTERVAL = 1000;\nexport const SETTLE_WINDOW = 5;\nexport const ADDRESS_ZERO = '0x0000000000000000000000000000000000000000';\n\nexport enum PUPPET_STATUS {\n  NULL,\n  ENABLED,\n  DISABLED,\n}\n\nexport enum CHANNEL_STATUS {\n  CHANNEL_STATUS_INIT = 0,\n  CHANNEL_STATUS_OPEN,\n  CHANNEL_STATUS_CLOSE,\n  CHANNEL_STATUS_SETTLE,\n  CHANNEL_STATUS_PENDING_CO_SETTLE,\n}\n\nexport enum SESSION_STATUS {\n  SESSION_STATUS_INIT = 0,\n  SESSION_STATUS_OPEN,\n  SESSION_STATUS_CLOSE,\n}\n\n/**\n * EXTERNAL EXPORTS\n * all properties need outside, will be exposed in L2.ts\n */\nexport type L2_EVENT =\n  | 'Deposit'\n  | 'Withdraw'\n  | 'ForceWithdraw'\n  | 'Transfer'\n  | 'PuppetChanged';\n\nexport type DEPOSIT_EVENT = {\n  user: string;\n  type: number;\n  token: string;\n  amount: string;\n  totalDeposit: string;\n  txhash: string;\n};\n\nexport type WITHDRAW_EVENT = {\n  user: string;\n  type: number;\n  token: string;\n  amount: string;\n  totalWithdraw: string;\n  txhash: string;\n};\n\nexport type FORCEWITHDRAW_EVENT = {\n  closer: string;\n  token: string;\n  userSettleAmount: string;\n  providerSettleAmount: string;\n  txhash: string;\n};\n\nexport type TRANSFER_EVENT = {\n  from: string;\n  to: string;\n  token: string;\n  amount: string;\n  additionalHash: string;\n  totalTransferredAmount: string;\n};\n\nexport type PUPPETCHANGED_EVENT = {\n  user: string;\n  puppet: string;\n  type: number;\n};\n\nexport type L2_CB = (\n  err: any,\n  res:\n    | DEPOSIT_EVENT\n    | WITHDRAW_EVENT\n    | FORCEWITHDRAW_EVENT\n    | TRANSFER_EVENT\n    | PUPPETCHANGED_EVENT\n) => void;\nexport type ContractInfo = {\n  address: string;\n  abi: AbiItem[] | AbiItem;\n};\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_1exa8fjeh4.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1exa8fjeh4.s[1]++;exports.ETH_MESSAGE_COMMIT_BLOCK_EXPERITION=250;cov_1exa8fjeh4.s[2]++;exports.CITA_TX_COMMIT_BLOCK_EXPERITION=88;cov_1exa8fjeh4.s[3]++;exports.CITA_TX_BLOCK_INTERVAL=1000;cov_1exa8fjeh4.s[4]++;exports.SETTLE_WINDOW=5;cov_1exa8fjeh4.s[5]++;exports.ADDRESS_ZERO='0x0000000000000000000000000000000000000000';var PUPPET_STATUS;cov_1exa8fjeh4.s[6]++;(function(PUPPET_STATUS){cov_1exa8fjeh4.f[0]++;cov_1exa8fjeh4.s[7]++;PUPPET_STATUS[PUPPET_STATUS["NULL"]=0]="NULL";cov_1exa8fjeh4.s[8]++;PUPPET_STATUS[PUPPET_STATUS["ENABLED"]=1]="ENABLED";cov_1exa8fjeh4.s[9]++;PUPPET_STATUS[PUPPET_STATUS["DISABLED"]=2]="DISABLED";})(PUPPET_STATUS=(cov_1exa8fjeh4.b[0][0]++,exports.PUPPET_STATUS)||(cov_1exa8fjeh4.b[0][1]++,exports.PUPPET_STATUS={}));var CHANNEL_STATUS;cov_1exa8fjeh4.s[10]++;(function(CHANNEL_STATUS){cov_1exa8fjeh4.f[1]++;cov_1exa8fjeh4.s[11]++;CHANNEL_STATUS[CHANNEL_STATUS["CHANNEL_STATUS_INIT"]=0]="CHANNEL_STATUS_INIT";cov_1exa8fjeh4.s[12]++;CHANNEL_STATUS[CHANNEL_STATUS["CHANNEL_STATUS_OPEN"]=1]="CHANNEL_STATUS_OPEN";cov_1exa8fjeh4.s[13]++;CHANNEL_STATUS[CHANNEL_STATUS["CHANNEL_STATUS_CLOSE"]=2]="CHANNEL_STATUS_CLOSE";cov_1exa8fjeh4.s[14]++;CHANNEL_STATUS[CHANNEL_STATUS["CHANNEL_STATUS_SETTLE"]=3]="CHANNEL_STATUS_SETTLE";cov_1exa8fjeh4.s[15]++;CHANNEL_STATUS[CHANNEL_STATUS["CHANNEL_STATUS_PENDING_CO_SETTLE"]=4]="CHANNEL_STATUS_PENDING_CO_SETTLE";})(CHANNEL_STATUS=(cov_1exa8fjeh4.b[1][0]++,exports.CHANNEL_STATUS)||(cov_1exa8fjeh4.b[1][1]++,exports.CHANNEL_STATUS={}));var SESSION_STATUS;cov_1exa8fjeh4.s[16]++;(function(SESSION_STATUS){cov_1exa8fjeh4.f[2]++;cov_1exa8fjeh4.s[17]++;SESSION_STATUS[SESSION_STATUS["SESSION_STATUS_INIT"]=0]="SESSION_STATUS_INIT";cov_1exa8fjeh4.s[18]++;SESSION_STATUS[SESSION_STATUS["SESSION_STATUS_OPEN"]=1]="SESSION_STATUS_OPEN";cov_1exa8fjeh4.s[19]++;SESSION_STATUS[SESSION_STATUS["SESSION_STATUS_CLOSE"]=2]="SESSION_STATUS_CLOSE";})(SESSION_STATUS=(cov_1exa8fjeh4.b[2][0]++,exports.SESSION_STATUS)||(cov_1exa8fjeh4.b[2][1]++,exports.SESSION_STATUS={}));

/***/ }),

/***/ "@cryptape/cita-sdk":
/*!*************************************!*\
  !*** external "@cryptape/cita-sdk" ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@cryptape/cita-sdk");

/***/ }),

/***/ "base64-js":
/*!****************************!*\
  !*** external "base64-js" ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("base64-js");

/***/ }),

/***/ "ethereumjs-util":
/*!**********************************!*\
  !*** external "ethereumjs-util" ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("ethereumjs-util");

/***/ }),

/***/ "ieee754":
/*!**************************!*\
  !*** external "ieee754" ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("ieee754");

/***/ }),

/***/ "isarray":
/*!**************************!*\
  !*** external "isarray" ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("isarray");

/***/ }),

/***/ "protobufjs":
/*!*****************************!*\
  !*** external "protobufjs" ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("protobufjs");

/***/ }),

/***/ "simple-crypto-js":
/*!***********************************!*\
  !*** external "simple-crypto-js" ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("simple-crypto-js");

/***/ }),

/***/ "web3":
/*!***********************!*\
  !*** external "web3" ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("web3");

/***/ }),

/***/ "web3/node_modules/web3-eth-contract":
/*!******************************************************!*\
  !*** external "web3/node_modules/web3-eth-contract" ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("web3/node_modules/web3-eth-contract");

/***/ }),

/***/ "web3/node_modules/web3-utils":
/*!***********************************************!*\
  !*** external "web3/node_modules/web3-utils" ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("web3/node_modules/web3-utils");

/***/ })

/******/ });
});
//# sourceMappingURL=app.bundle.js.map